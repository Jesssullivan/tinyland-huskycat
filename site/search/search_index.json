{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"HuskyCat Universal Code Validation Platform","text":"<p>Welcome to HuskyCat, the Universal Code Validation Platform with integrated MCP (Model Context Protocol) Server support for seamless Claude Code integration.</p>"},{"location":"#what-is-huskycat","title":"What is HuskyCat?","text":"<p>HuskyCat is a container-based validation platform designed for consistent toolchains, repository isolation, and AI integration:</p> <ul> <li>Container-Based Execution: Automatic container detection with toolchain consistency across all environments</li> <li>Pre-Built Binaries: Download and run immediately on Linux (AMD64/ARM64) and macOS (Apple Silicon)</li> <li>Repository Safety: Validation tools run in isolation from your actual repository</li> <li>MCP Server Integration: stdio-based server for seamless Claude Code integration</li> <li>Git Hooks: Fast validation with automatic container orchestration</li> <li>Universal Validation: Python, JavaScript, YAML, Shell, Docker, security scanning</li> <li>Auto-Fix Support: Interactive auto-repair of validation issues</li> </ul>"},{"location":"#quick-start","title":"Quick Start","text":""},{"location":"#option-1-pre-built-binary-fastest","title":"Option 1: Pre-Built Binary (Fastest)","text":"<pre><code># Download for your platform (Linux AMD64 example)\ncurl -L -o ~/.local/bin/huskycat https://gitlab.com/tinyland/ai/huskycat/-/releases/permalink/latest/downloads/huskycat-linux-amd64\nchmod +x ~/.local/bin/huskycat\n\n# Install container runtime (required)\nbrew install podman  # macOS\n# or: sudo dnf install podman  # Rocky Linux\n\n# Verify installation\nhuskycat --version\nhuskycat status\n</code></pre> <p>See Binary Downloads for all platforms and detailed instructions.</p>"},{"location":"#option-2-build-from-source","title":"Option 2: Build from Source","text":"<pre><code># Clone repository\ngit clone https://gitlab.com/tinyland/ai/huskycat.git\ncd huskycat\n\n# Install dependencies\nnpm install\nuv sync --dev\n\n# Build binary\nnpm run build:binary\n\n# Verify\n./dist/huskycat --version\n</code></pre>"},{"location":"#key-features","title":"Key Features","text":""},{"location":"#container-based-execution","title":"\ud83d\udc33 Container-Based Execution","text":"<ul> <li>Automatic detection: containers on host, direct execution in CI</li> <li>Consistent toolchain across all environments</li> <li>Complete isolation from host repository</li> <li>No \"tool not found\" errors - ever</li> </ul>"},{"location":"#repository-safety-isolation","title":"\ud83d\udd12 Repository Safety &amp; Isolation","text":"<ul> <li>Binary configs stored separately from repository</li> <li>Validation tools cannot interfere with actual files</li> <li>Read-only repository mounting for security</li> </ul>"},{"location":"#ai-integration-via-mcp","title":"\ud83e\udd16 AI Integration via MCP","text":"<ul> <li>stdio-based MCP server for Claude Code</li> <li>Container-backed validation tools as AI-callable functions</li> <li>Real-time code quality feedback with full toolchain</li> </ul>"},{"location":"#universal-validation-with-auto-fix","title":"\ud83d\udd04 Universal Validation with Auto-Fix","text":"<ul> <li>Core Tools: Black, Flake8, MyPy, Ruff</li> <li>Extended Tools: yamllint, shellcheck, hadolint, eslint</li> <li>Security: bandit, safety, dependency scanning</li> <li>GitLab CI: Schema validation and pipeline testing</li> <li>Auto-Fix: Interactive prompts for automatic issue resolution</li> </ul>"},{"location":"#architecture","title":"Architecture","text":"<p>HuskyCat uses container-based execution with automatic environment detection:</p> <pre><code>graph LR\n    A[\"\ud83d\ude80 Binary Entry Point\"] --&gt; B[\"Container Runtime\"]\n    C[\"\ud83d\udee0\ufe0f NPM Scripts\"] --&gt; B\n    D[\"\ud83e\udd16 MCP Server\"] --&gt; B\n\n    B --&gt; E[\"\ud83d\udc33 Container Execution\"]\n    E --&gt; F[\"Complete Toolchain\"]\n    E --&gt; G[\"Repository Isolation\"] \n    E --&gt; H[\"Consistent Environment\"]\n\n    style B fill:#f3e5f5\n    style E fill:#e8f5e8\n    style F fill:#fff3e0</code></pre>"},{"location":"#getting-started","title":"Getting Started","text":"<p>Choose your installation method:</p> <p>All execution modes use container-only validation for consistency:</p> \ud83d\ude80 Binary Entry Point (Recommended)\ud83d\udee0\ufe0f NPM Script Development\ud83e\udd16 MCP Server Mode <p><pre><code>./dist/huskycat [command]            # Fast startup, container execution\n</code></pre> Best for: Git hooks, CI/CD, production deployments</p> <p><pre><code>npm run dev -- [command]            # Python module via NPM\n</code></pre> Best for: Development, testing, convenience</p> <p><pre><code>./dist/huskycat mcp-server           # stdio JSON-RPC server\n</code></pre> Best for: Claude Code integration, AI-powered validation</p> <p>All modes provide: Complete toolchain (Python + Node.js + Shell + Docker + Security) via container execution</p>"},{"location":"#usage-examples","title":"Usage Examples","text":""},{"location":"#core-operations","title":"Core Operations","text":"<pre><code># Fast binary execution (git hooks, production)\n./dist/huskycat validate --staged    # Validate staged files\n./dist/huskycat setup-hooks          # Install git hooks\n./dist/huskycat ci-validate .gitlab-ci.yml\n\n# Auto-fix validation (NEW)\n./dist/huskycat validate --fix       # Auto-fix validation issues\ngit addf &lt;files&gt;                     # Interactive auto-fix before staging\ngit addf .                          # Validate and auto-fix all files\n\n# Development mode (NPM scripts)\nnpm run validate                     # Quick validation\nnpm run validate:ci                  # CI configuration\nnpm run mcp:server                   # Start MCP server\n\n# Container mode (comprehensive)\nnpm run container:test:validate      # Full toolchain\n</code></pre>"},{"location":"#claude-code-integration","title":"Claude Code Integration","text":"<pre><code># Start MCP server (stdio protocol)\n./dist/huskycat mcp-server\n\n# Test connection\necho '{\"jsonrpc\": \"2.0\", \"method\": \"tools/list\", \"id\": 1}' | npm run mcp:server\n</code></pre>"},{"location":"#next-steps","title":"Next Steps","text":""},{"location":"#getting-started_1","title":"Getting Started","text":"<ul> <li>Binary Downloads - Download pre-built binaries (recommended)</li> <li>Installation Guide - Build from source and setup</li> <li>CLI Reference - Complete command reference</li> </ul>"},{"location":"#integration","title":"Integration","text":"<ul> <li>GitLab CI/CD - GitLab pipeline integration</li> <li>GitHub Actions - GitHub workflow integration</li> <li>MCP Server - Claude Code integration</li> </ul>"},{"location":"#reference","title":"Reference","text":"<ul> <li>Configuration - Customize validation rules</li> <li>MCP Tools API - MCP server tools reference</li> <li>Troubleshooting - Common issues and solutions</li> </ul>"},{"location":"#for-ai-agents-llms","title":"For AI Agents &amp; LLMs","text":"<p>HuskyCat documentation is available in LLM-friendly formats for easy ingestion by AI agents:</p> <ul> <li>llms.txt: https://tinyland.gitlab.io/ai/huskycat/llms.txt - Plain text format</li> <li>llms.json: https://tinyland.gitlab.io/ai/huskycat/llms.json - Structured JSON</li> <li>llms-full.md: https://tinyland.gitlab.io/ai/huskycat/llms-full.md - Single markdown file</li> </ul> <p>These files are automatically generated from the documentation source and updated with every commit to main.</p>"},{"location":"#support","title":"Support","text":"<ul> <li>Documentation: https://huskycat.pages.io</li> <li>Issues: GitLab Issues</li> <li>Discussions: GitLab Discussions</li> </ul> <p>HuskyCat - Making code validation universal, fast, and intelligent.</p>"},{"location":"SPRINT_PLAN/","title":"HuskyCat Focused Sprint Plan","text":"<p>Based on comprehensive repository audit, this sprint addresses critical issues and establishes clear product modes with distinct architectural requirements.</p>"},{"location":"SPRINT_PLAN/#product-mode-architecture","title":"Product Mode Architecture","text":""},{"location":"SPRINT_PLAN/#the-core-problem","title":"The Core Problem","text":"<p>HuskyCat serves five distinct product modes that share validation logic but have fundamentally different: - Performance requirements - Output formats - Interactivity expectations - Error handling strategies - Tool availability assumptions - Environment contexts</p> <p>This architectural ambiguity has caused design friction. The factory pattern helps with command dispatch but doesn't address mode-specific behavior differences.</p>"},{"location":"SPRINT_PLAN/#the-five-product-modes","title":"The Five Product Modes","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                         HUSKYCAT PRODUCT MODES                              \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                             \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u2502\n\u2502  \u2502  GIT HOOKS  \u2502   \u2502     CI      \u2502   \u2502     CLI     \u2502   \u2502  PIPELINE   \u2502     \u2502\n\u2502  \u2502    MODE     \u2502   \u2502    MODE     \u2502   \u2502    MODE     \u2502   \u2502    MODE     \u2502     \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2502\n\u2502         \u2502                 \u2502                 \u2502                 \u2502            \u2502\n\u2502         v                 v                 v                 v            \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510       \u2502\n\u2502  \u2502                    MCP SERVER MODE                              \u2502       \u2502\n\u2502  \u2502              (AI assistant integration)                         \u2502       \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518       \u2502\n\u2502                                    \u2502                                        \u2502\n\u2502                                    v                                        \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510       \u2502\n\u2502  \u2502              UNIFIED VALIDATION ENGINE                          \u2502       \u2502\n\u2502  \u2502         (shared validation logic, tool execution)               \u2502       \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518       \u2502\n\u2502                                                                             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"SPRINT_PLAN/#mode-1-git-hooks-mode","title":"Mode 1: Git Hooks Mode","text":"<p>Purpose: Pre-commit/pre-push validation Runtime: Binary (fast) or container fallback Critical Requirements: - Speed: Must complete in &lt;5s for good DX - Staged files only: <code>--staged</code> flag - Silent success: No output on pass - Loud failure: Clear, actionable errors - Auto-fix prompts: Interactive when terminal available - Exit codes: 0=pass, 1=fail (blocks commit)</p> <pre><code>class GitHooksAdapter:\n    output_format = \"minimal\"      # Errors only\n    interactive = \"auto\"           # Detect TTY\n    fail_fast = True               # Stop on first error\n    tools = \"fast\"                 # black, ruff, mypy only\n    color = \"auto\"                 # Detect terminal\n</code></pre>"},{"location":"SPRINT_PLAN/#mode-2-ci-validation-mode","title":"Mode 2: CI Validation Mode","text":"<p>Purpose: Pipeline integration for MR/PR checks Runtime: Container (guaranteed environment) Critical Requirements: - Comprehensive: Run ALL validators - Structured output: JUnit XML, JSON reports - Exit codes: 0=pass, non-zero=fail - Artifacts: Save reports for pipeline artifacts - No interactivity: Fully automated - Badge-ready: Status for MR badges</p> <pre><code>class CIAdapter:\n    output_format = \"structured\"   # JUnit XML, JSON\n    interactive = False            # Never prompt\n    fail_fast = False              # Run all validators\n    tools = \"all\"                  # Complete toolchain\n    color = False                  # No ANSI codes\n    report_path = \"./reports/\"     # Artifact directory\n</code></pre>"},{"location":"SPRINT_PLAN/#mode-3-standalone-cli-mode","title":"Mode 3: Standalone CLI Mode","text":"<p>Purpose: Developer running validation manually Runtime: Binary or container Critical Requirements: - Interactive feedback: Progress indicators - Colored output: Rich terminal experience - Auto-fix: <code>--fix</code> flag with prompts - File selection: Glob patterns, paths - Verbose options: <code>-v</code>, <code>-vv</code>, <code>-vvv</code> - Help text: Comprehensive <code>--help</code></p> <pre><code>class CLIAdapter:\n    output_format = \"human\"        # Colored, formatted\n    interactive = True             # Prompts enabled\n    fail_fast = False              # Show all issues\n    tools = \"configured\"           # Per .huskycat.yaml\n    color = True                   # Rich output\n    progress = True                # Spinners, bars\n</code></pre>"},{"location":"SPRINT_PLAN/#mode-4-pipeline-tool-mode","title":"Mode 4: Pipeline Tool Mode","text":"<p>Purpose: Part of larger build/lint/validate toolchain Runtime: Container only Critical Requirements: - Composable: stdin/stdout friendly - Machine-readable: JSON output - Non-interactive: Never prompt - Scriptable: Predictable behavior - Exit codes: Semantic (0, 1, 2, etc.) - No side effects: Read-only by default</p> <pre><code>class PipelineAdapter:\n    output_format = \"json\"         # Machine-readable\n    interactive = False            # Never prompt\n    fail_fast = False              # Complete run\n    tools = \"all\"                  # Complete toolchain\n    color = False                  # No ANSI\n    stdin_mode = True              # Accept file list from stdin\n</code></pre>"},{"location":"SPRINT_PLAN/#mode-5-mcp-server-mode","title":"Mode 5: MCP Server Mode","text":"<p>Purpose: AI assistant integration Runtime: Container or local (stdio) Critical Requirements: - JSON-RPC protocol: stdio transport - Tool registration: Expose validators as tools - Context-aware: Understand project structure - No terminal output: Pure protocol - Stateless requests: Each call independent - Error responses: JSON-RPC error format</p> <pre><code>class MCPAdapter:\n    output_format = \"jsonrpc\"      # JSON-RPC 2.0\n    interactive = False            # Never prompt\n    fail_fast = True               # Per-request\n    tools = \"all\"                  # All available\n    color = False                  # No ANSI\n    transport = \"stdio\"            # stdin/stdout\n</code></pre>"},{"location":"SPRINT_PLAN/#mode-detection-strategy","title":"Mode Detection Strategy","text":"<pre><code># src/huskycat/core/mode_detector.py\n\nfrom enum import Enum\nimport os\nimport sys\n\nclass ProductMode(Enum):\n    GIT_HOOKS = \"git_hooks\"\n    CI = \"ci\"\n    CLI = \"cli\"\n    PIPELINE = \"pipeline\"\n    MCP = \"mcp\"\n\ndef detect_mode() -&gt; ProductMode:\n    \"\"\"Auto-detect product mode from environment.\"\"\"\n\n    # Explicit mode override\n    if mode := os.environ.get(\"HUSKYCAT_MODE\"):\n        return ProductMode(mode)\n\n    # MCP mode: invoked with mcp-server command\n    if \"mcp-server\" in sys.argv or \"mcp\" in sys.argv:\n        return ProductMode.MCP\n\n    # Git hooks: GIT_* environment variables present\n    if os.environ.get(\"GIT_AUTHOR_NAME\") or os.environ.get(\"GIT_INDEX_FILE\"):\n        return ProductMode.GIT_HOOKS\n\n    # CI mode: CI environment variables\n    ci_vars = [\"CI\", \"GITLAB_CI\", \"GITHUB_ACTIONS\", \"JENKINS_URL\", \"TRAVIS\"]\n    if any(os.environ.get(v) for v in ci_vars):\n        return ProductMode.CI\n\n    # Pipeline mode: no TTY or piped input\n    if not sys.stdin.isatty() or not sys.stdout.isatty():\n        return ProductMode.PIPELINE\n\n    # Default: CLI mode\n    return ProductMode.CLI\n\ndef get_adapter(mode: ProductMode) -&gt; \"ModeAdapter\":\n    \"\"\"Get mode-specific adapter.\"\"\"\n    adapters = {\n        ProductMode.GIT_HOOKS: GitHooksAdapter,\n        ProductMode.CI: CIAdapter,\n        ProductMode.CLI: CLIAdapter,\n        ProductMode.PIPELINE: PipelineAdapter,\n        ProductMode.MCP: MCPAdapter,\n    }\n    return adapters[mode]()\n</code></pre>"},{"location":"SPRINT_PLAN/#architecture-implementation","title":"Architecture Implementation","text":"<pre><code>src/huskycat/\n\u251c\u2500\u2500 core/\n\u2502   \u251c\u2500\u2500 mode_detector.py      # Mode detection logic\n\u2502   \u251c\u2500\u2500 adapters/             # Mode-specific adapters\n\u2502   \u2502   \u251c\u2500\u2500 base.py           # Abstract adapter interface\n\u2502   \u2502   \u251c\u2500\u2500 git_hooks.py      # Git hooks adapter\n\u2502   \u2502   \u251c\u2500\u2500 ci.py             # CI adapter\n\u2502   \u2502   \u251c\u2500\u2500 cli.py            # CLI adapter\n\u2502   \u2502   \u251c\u2500\u2500 pipeline.py       # Pipeline adapter\n\u2502   \u2502   \u2514\u2500\u2500 mcp.py            # MCP adapter\n\u2502   \u251c\u2500\u2500 validation_engine.py  # Shared validation logic\n\u2502   \u2514\u2500\u2500 factory.py            # Command factory (unchanged)\n\u251c\u2500\u2500 commands/                 # Command implementations\n\u251c\u2500\u2500 tools/                    # Individual validators\n\u2514\u2500\u2500 __main__.py               # Entry point with mode detection\n</code></pre>"},{"location":"SPRINT_PLAN/#key-design-decisions","title":"Key Design Decisions","text":"<ol> <li>Mode detection at entry point: Detect mode once, configure adapter</li> <li>Adapter pattern: Mode-specific behavior without conditionals everywhere</li> <li>Shared validation engine: All modes use same validation logic</li> <li>Output formatting at edge: Adapter handles all output formatting</li> <li>Tool availability per mode: Git hooks = fast tools, CI = all tools</li> </ol>"},{"location":"SPRINT_PLAN/#migration-path","title":"Migration Path","text":"<p>Current codebase has mode logic scattered throughout. Migration:</p> <ol> <li>Sprint 0: Create mode detector and adapter interfaces</li> <li>Sprint 1-5: Existing sprint work (critical fixes, builds, etc.)</li> <li>Sprint 6: Refactor commands to use adapters</li> <li>Sprint 7: Consolidate all mode-specific logic into adapters</li> </ol>"},{"location":"SPRINT_PLAN/#execution-modes-runtime","title":"Execution Modes (Runtime)","text":"<p>Orthogonal to product modes, HuskyCat supports two execution modes:</p>"},{"location":"SPRINT_PLAN/#execution-mode-1-container","title":"Execution Mode 1: Container","text":"<ul> <li>Complete toolchain guaranteed</li> <li>Consistent across environments</li> <li>Used by: CI mode, Pipeline mode, MCP mode (default)</li> <li>Image: <code>ghcr.io/huskycats/validator:latest</code></li> </ul>"},{"location":"SPRINT_PLAN/#execution-mode-2-binary","title":"Execution Mode 2: Binary","text":"<ul> <li>Fast startup, minimal dependencies</li> <li>Core tools only (black, ruff, mypy, flake8)</li> <li>Used by: Git hooks mode, CLI mode</li> <li>Binaries: <code>linux-amd64</code>, <code>linux-arm64</code>, <code>darwin-arm64</code>, <code>darwin-amd64</code>, <code>windows-amd64</code></li> </ul> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    PRODUCT MODE                            \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502  \u2502Git Hooks \u2502    CI    \u2502   CLI    \u2502 Pipeline \u2502   MCP    \u2502 \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2502       \u2502          \u2502          \u2502          \u2502          \u2502        \u2502\n\u2502       v          v          v          v          v        \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n\u2502  \u2502              EXECUTION MODE                         \u2502  \u2502\n\u2502  \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510        \u2502  \u2502\n\u2502  \u2502  \u2502     BINARY      \u2502    \u2502    CONTAINER    \u2502        \u2502  \u2502\n\u2502  \u2502  \u2502  (fast, local)  \u2502    \u2502 (complete, CI)  \u2502        \u2502  \u2502\n\u2502  \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518        \u2502  \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"SPRINT_PLAN/#auto-fix-architecture","title":"Auto-Fix Architecture","text":""},{"location":"SPRINT_PLAN/#the-value-proposition","title":"The Value Proposition","text":"<p>Most linting tools only complain. HuskyCat should fix. Auto-fix transforms validation from a friction point into a productivity multiplier.</p> <pre><code>Traditional Linting:           HuskyCat Auto-Fix:\n\n  detect \u2192 report \u2192 manual     detect \u2192 fix \u2192 report \u2192 commit\n     \u2193                            \u2193\n  frustration                  productivity\n</code></pre>"},{"location":"SPRINT_PLAN/#auto-fix-categories","title":"Auto-Fix Categories","text":"Category Fixable Tool Confidence Formatting Always black, prettier, gofmt 100% Import sorting Always isort, ruff 100% Unused imports Usually autoflake, ruff 95% Whitespace Always yamllint, trim 100% Simple patterns Usually ruff, eslint 90% Security issues Sometimes Manual + suggestion 50% Type errors Rarely Manual + suggestion 10%"},{"location":"SPRINT_PLAN/#auto-fix-tiers","title":"Auto-Fix Tiers","text":"<pre><code>class FixConfidence(Enum):\n    SAFE = \"safe\"           # 100% safe, always apply (formatting)\n    LIKELY = \"likely\"       # 90%+ safe, apply with --fix\n    UNCERTAIN = \"uncertain\" # Needs review, apply with --fix-unsafe\n    MANUAL = \"manual\"       # Cannot auto-fix, provide suggestion\n</code></pre>"},{"location":"SPRINT_PLAN/#mode-specific-auto-fix-behavior","title":"Mode-Specific Auto-Fix Behavior","text":"Mode <code>--fix</code> Behavior Interactive Report Git Hooks Fix SAFE, prompt for LIKELY Yes (if TTY) Changed files CI Report only (no fixes) No JSON diff CLI Fix SAFE+LIKELY, prompt for UNCERTAIN Yes Detailed Pipeline Fix all (SAFE+LIKELY+UNCERTAIN) No JSON MCP Return fix suggestions No JSON-RPC"},{"location":"SPRINT_PLAN/#autofixer-interface","title":"AutoFixer Interface","text":"<pre><code># src/huskycat/core/autofix.py\n\nfrom abc import ABC, abstractmethod\nfrom dataclasses import dataclass\nfrom enum import Enum\nfrom pathlib import Path\nfrom typing import List, Optional\n\nclass FixConfidence(Enum):\n    SAFE = \"safe\"\n    LIKELY = \"likely\"\n    UNCERTAIN = \"uncertain\"\n    MANUAL = \"manual\"\n\n@dataclass\nclass FixResult:\n    file: Path\n    original: str\n    fixed: str\n    confidence: FixConfidence\n    tool: str\n    description: str\n    line_range: Optional[tuple[int, int]] = None\n\n@dataclass\nclass FixSuggestion:\n    file: Path\n    line: int\n    message: str\n    suggested_fix: Optional[str]\n    confidence: FixConfidence\n\nclass AutoFixer(ABC):\n    \"\"\"Base class for all auto-fixers.\"\"\"\n\n    @property\n    @abstractmethod\n    def name(self) -&gt; str:\n        \"\"\"Tool name (e.g., 'black', 'ruff').\"\"\"\n        pass\n\n    @property\n    @abstractmethod\n    def confidence(self) -&gt; FixConfidence:\n        \"\"\"Default confidence level for this fixer.\"\"\"\n        pass\n\n    @abstractmethod\n    def can_fix(self, file: Path) -&gt; bool:\n        \"\"\"Check if this fixer can handle the file type.\"\"\"\n        pass\n\n    @abstractmethod\n    def fix(self, file: Path, dry_run: bool = False) -&gt; List[FixResult]:\n        \"\"\"Apply fixes to the file.\"\"\"\n        pass\n\n    @abstractmethod\n    def suggest(self, file: Path, issues: List[dict]) -&gt; List[FixSuggestion]:\n        \"\"\"Generate fix suggestions without applying.\"\"\"\n        pass\n</code></pre>"},{"location":"SPRINT_PLAN/#implemented-auto-fixers","title":"Implemented Auto-Fixers","text":""},{"location":"SPRINT_PLAN/#python-auto-fixers","title":"Python Auto-Fixers","text":"<pre><code>class BlackFixer(AutoFixer):\n    name = \"black\"\n    confidence = FixConfidence.SAFE\n\n    def fix(self, file: Path, dry_run: bool = False) -&gt; List[FixResult]:\n        if dry_run:\n            result = subprocess.run(\n                [\"black\", \"--check\", \"--diff\", str(file)],\n                capture_output=True, text=True\n            )\n            # Parse diff to create FixResult\n        else:\n            subprocess.run([\"black\", str(file)])\n        # ...\n\nclass RuffFixer(AutoFixer):\n    name = \"ruff\"\n    confidence = FixConfidence.LIKELY\n\n    def fix(self, file: Path, dry_run: bool = False) -&gt; List[FixResult]:\n        cmd = [\"ruff\", \"check\", \"--fix\"]\n        if dry_run:\n            cmd.append(\"--diff\")\n        cmd.append(str(file))\n        # ...\n\nclass AutoflakeFixer(AutoFixer):\n    name = \"autoflake\"\n    confidence = FixConfidence.LIKELY\n\n    def fix(self, file: Path, dry_run: bool = False) -&gt; List[FixResult]:\n        cmd = [\"autoflake\", \"--remove-all-unused-imports\"]\n        if not dry_run:\n            cmd.append(\"--in-place\")\n        cmd.append(str(file))\n        # ...\n\nclass IsortFixer(AutoFixer):\n    name = \"isort\"\n    confidence = FixConfidence.SAFE\n\n    def fix(self, file: Path, dry_run: bool = False) -&gt; List[FixResult]:\n        cmd = [\"isort\"]\n        if dry_run:\n            cmd.append(\"--diff\")\n        cmd.append(str(file))\n        # ...\n</code></pre>"},{"location":"SPRINT_PLAN/#javascript-auto-fixers","title":"JavaScript Auto-Fixers","text":"<pre><code>class ESLintFixer(AutoFixer):\n    name = \"eslint\"\n    confidence = FixConfidence.LIKELY\n\n    def fix(self, file: Path, dry_run: bool = False) -&gt; List[FixResult]:\n        cmd = [\"eslint\", \"--fix\"]\n        if dry_run:\n            cmd.append(\"--fix-dry-run\")\n        cmd.append(str(file))\n        # ...\n\nclass PrettierFixer(AutoFixer):\n    name = \"prettier\"\n    confidence = FixConfidence.SAFE\n\n    def fix(self, file: Path, dry_run: bool = False) -&gt; List[FixResult]:\n        if dry_run:\n            cmd = [\"prettier\", \"--check\", str(file)]\n        else:\n            cmd = [\"prettier\", \"--write\", str(file)]\n        # ...\n</code></pre>"},{"location":"SPRINT_PLAN/#yamlconfig-auto-fixers","title":"YAML/Config Auto-Fixers","text":"<pre><code>class YAMLFixer(AutoFixer):\n    name = \"yamllint\"\n    confidence = FixConfidence.SAFE\n\n    def fix(self, file: Path, dry_run: bool = False) -&gt; List[FixResult]:\n        # Fix trailing whitespace, missing newlines, indentation\n        content = file.read_text()\n        fixed = self._fix_yaml(content)\n        if not dry_run:\n            file.write_text(fixed)\n        # ...\n\n    def _fix_yaml(self, content: str) -&gt; str:\n        lines = content.split('\\n')\n        # Remove trailing whitespace\n        lines = [line.rstrip() for line in lines]\n        # Ensure final newline\n        result = '\\n'.join(lines)\n        if not result.endswith('\\n'):\n            result += '\\n'\n        return result\n</code></pre>"},{"location":"SPRINT_PLAN/#security-auto-fixers","title":"Security Auto-Fixers","text":"<pre><code>class SecurityFixer(AutoFixer):\n    name = \"security\"\n    confidence = FixConfidence.UNCERTAIN  # Always needs review\n\n    # Pattern-based replacements for common issues\n    SAFE_REPLACEMENTS = {\n        # SQL injection\n        r'cursor\\.execute\\(f\"': 'cursor.execute(',\n        # eval() usage\n        r'eval\\(': 'ast.literal_eval(',\n        # Hardcoded secrets (suggest .env)\n        r'password\\s*=\\s*[\"\\'][^\"\\']+[\"\\']': 'password = os.environ.get(\"PASSWORD\")',\n    }\n\n    def suggest(self, file: Path, issues: List[dict]) -&gt; List[FixSuggestion]:\n        suggestions = []\n        for issue in issues:\n            if fix := self._get_suggestion(issue):\n                suggestions.append(FixSuggestion(\n                    file=file,\n                    line=issue['line'],\n                    message=issue['message'],\n                    suggested_fix=fix,\n                    confidence=FixConfidence.UNCERTAIN\n                ))\n        return suggestions\n</code></pre>"},{"location":"SPRINT_PLAN/#fix-orchestration","title":"Fix Orchestration","text":"<pre><code># src/huskycat/core/fix_orchestrator.py\n\nclass FixOrchestrator:\n    \"\"\"Coordinates auto-fix across multiple tools.\"\"\"\n\n    def __init__(self, mode: ProductMode):\n        self.mode = mode\n        self.adapter = get_adapter(mode)\n        self.fixers = self._load_fixers()\n\n    def fix_files(\n        self,\n        files: List[Path],\n        dry_run: bool = False,\n        confidence_threshold: FixConfidence = FixConfidence.LIKELY\n    ) -&gt; FixReport:\n        \"\"\"Apply fixes to files based on mode and confidence.\"\"\"\n\n        results = []\n        suggestions = []\n\n        for file in files:\n            for fixer in self._get_fixers_for_file(file):\n                if fixer.confidence.value &lt;= confidence_threshold.value:\n                    if self.adapter.interactive and fixer.confidence == FixConfidence.UNCERTAIN:\n                        # Prompt user in CLI mode\n                        if not self._prompt_for_fix(file, fixer):\n                            continue\n\n                    result = fixer.fix(file, dry_run=dry_run)\n                    results.extend(result)\n                else:\n                    # Generate suggestions for lower-confidence fixes\n                    sugg = fixer.suggest(file, self._get_issues(file, fixer))\n                    suggestions.extend(sugg)\n\n        return FixReport(\n            fixed=results,\n            suggestions=suggestions,\n            mode=self.mode\n        )\n</code></pre>"},{"location":"SPRINT_PLAN/#cli-integration","title":"CLI Integration","text":"<pre><code># Basic fix\nhuskycat fix src/\n\n# Fix with preview (dry-run)\nhuskycat fix --dry-run src/\n\n# Fix only safe changes\nhuskycat fix --safe-only src/\n\n# Fix everything including uncertain\nhuskycat fix --unsafe src/\n\n# Fix staged files (git hooks)\nhuskycat fix --staged\n\n# Interactive mode (prompts for each uncertain fix)\nhuskycat fix --interactive src/\n\n# JSON output for pipelines\nhuskycat fix --format=json src/ | jq '.fixed[]'\n</code></pre>"},{"location":"SPRINT_PLAN/#mcp-tool-exposure","title":"MCP Tool Exposure","text":"<pre><code># MCP tools for AI-assisted fixing\n\n@mcp_tool(\"huskycat_fix\")\ndef fix_files(paths: List[str], dry_run: bool = True) -&gt; dict:\n    \"\"\"Fix code issues in specified files.\"\"\"\n    return orchestrator.fix_files(paths, dry_run=dry_run).to_dict()\n\n@mcp_tool(\"huskycat_suggest_fixes\")\ndef suggest_fixes(path: str) -&gt; List[dict]:\n    \"\"\"Get fix suggestions without applying.\"\"\"\n    return orchestrator.get_suggestions(path)\n\n@mcp_tool(\"huskycat_apply_suggestion\")\ndef apply_suggestion(file: str, suggestion_id: str) -&gt; dict:\n    \"\"\"Apply a specific fix suggestion.\"\"\"\n    return orchestrator.apply_suggestion(file, suggestion_id)\n</code></pre>"},{"location":"SPRINT_PLAN/#fix-reporting","title":"Fix Reporting","text":"<pre><code>{\n  \"summary\": {\n    \"files_scanned\": 42,\n    \"files_fixed\": 12,\n    \"fixes_applied\": 28,\n    \"suggestions_generated\": 5\n  },\n  \"fixed\": [\n    {\n      \"file\": \"src/main.py\",\n      \"tool\": \"black\",\n      \"confidence\": \"safe\",\n      \"changes\": [\n        {\"line\": 15, \"type\": \"formatting\", \"description\": \"Reformatted function\"}\n      ]\n    }\n  ],\n  \"suggestions\": [\n    {\n      \"file\": \"src/auth.py\",\n      \"line\": 42,\n      \"tool\": \"security\",\n      \"confidence\": \"uncertain\",\n      \"message\": \"Hardcoded password detected\",\n      \"suggested_fix\": \"Use environment variable: os.environ.get('DB_PASSWORD')\"\n    }\n  ],\n  \"unfixable\": [\n    {\n      \"file\": \"src/types.py\",\n      \"line\": 88,\n      \"tool\": \"mypy\",\n      \"message\": \"Type error requires manual review\",\n      \"reason\": \"Complex generic type inference\"\n    }\n  ]\n}\n</code></pre>"},{"location":"SPRINT_PLAN/#sprint-1-critical-fixes-blocking-issues","title":"Sprint 1: Critical Fixes (Blocking Issues)","text":""},{"location":"SPRINT_PLAN/#11-fix-pyprojecttoml-entry-point","title":"1.1 Fix pyproject.toml Entry Point","text":"<p>File: <code>pyproject.toml:68</code> Issue: Entry point <code>huskycat = \"huskycat:main\"</code> references non-existent function Fix: <pre><code>[project.scripts]\nhuskycat = \"huskycat.__main__:main\"\n</code></pre></p>"},{"location":"SPRINT_PLAN/#12-fix-gitlab-ci-binary-build-path","title":"1.2 Fix GitLab CI Binary Build Path","text":"<p>File: <code>.gitlab-ci.yml:287</code> Issue: References <code>src/__main__.py</code> which doesn't exist Fix: <pre><code>- uv run pyinstaller --onefile --name huskycat-linux-amd64 huskycat_main.py\n</code></pre></p>"},{"location":"SPRINT_PLAN/#13-remove-or-create-containerfiledev","title":"1.3 Remove or Create ContainerFile.dev","text":"<p>File: <code>.gitlab-ci.yml:220-221</code> Issue: References <code>ContainerFile.dev</code> that doesn't exist Options: - Create <code>ContainerFile.dev</code> with development tools - Remove the dev container build job if not needed</p>"},{"location":"SPRINT_PLAN/#14-fix-test-imports","title":"1.4 Fix Test Imports","text":"<p>File: <code>tests/test_mcp_integration_comprehensive.py</code> Issue: <code>MCPServer</code> type annotation causes NameError Fix: Use <code>TYPE_CHECKING</code> pattern: <pre><code>from typing import TYPE_CHECKING\nif TYPE_CHECKING:\n    from src.huskycat.mcp_server import MCPServer\n</code></pre></p>"},{"location":"SPRINT_PLAN/#sprint-2-multiarch-ci-builds-adopt-crush-patterns","title":"Sprint 2: Multiarch CI Builds (Adopt Crush Patterns)","text":""},{"location":"SPRINT_PLAN/#21-gitlab-ci-multiarch-configuration","title":"2.1 GitLab CI Multiarch Configuration","text":"<p>Add platform-specific runners and build jobs following crush patterns:</p> <pre><code># .gitlab-ci.yml additions\n\n# macOS runner template\n.macos_saas_runners:\n  tags:\n    - saas-macos-medium-m1\n  image: macos-14-xcode-15\n\n# Build matrix\nbuild:linux-amd64:\n  stage: build\n  image: python:3.11-slim\n  script:\n    - pip install uv\n    - uv pip install --system pyinstaller\n    - uv pip install --system -e .\n    - pyinstaller --onefile --name huskycat-linux-amd64 huskycat_main.py\n  artifacts:\n    paths:\n      - dist/huskycat-linux-amd64\n\nbuild:linux-arm64:\n  stage: build\n  tags:\n    - arm64\n  image: python:3.11-slim\n  script:\n    - pip install uv\n    - uv pip install --system pyinstaller\n    - uv pip install --system -e .\n    - pyinstaller --onefile --name huskycat-linux-arm64 huskycat_main.py\n  artifacts:\n    paths:\n      - dist/huskycat-linux-arm64\n\nbuild:darwin-arm64:\n  extends: .macos_saas_runners\n  stage: build\n  script:\n    - pip3 install uv\n    - uv pip install --system pyinstaller\n    - uv pip install --system -e .\n    - pyinstaller --onefile --name huskycat-darwin-arm64 huskycat_main.py\n  artifacts:\n    paths:\n      - dist/huskycat-darwin-arm64\n</code></pre>"},{"location":"SPRINT_PLAN/#22-darwin-code-signing","title":"2.2 Darwin Code Signing","text":"<p>Following crush patterns for Darwin signing:</p> <pre><code># Required CI/CD Variables:\n# APPLE_CERTIFICATE_BASE64 - Base64 encoded .p12 certificate\n# APPLE_CERTIFICATE_PASSWORD - Certificate password\n# APPLE_DEVELOPER_ID_APPLICATION - \"Developer ID Application: Your Name (TEAMID)\"\n# APPLE_DEVELOPER_ID_INSTALLER - \"Developer ID Installer: Your Name (TEAMID)\"\n# APPLE_ID - Apple ID email\n# APPLE_NOTARIZE_PASSWORD - App-specific password\n# APPLE_TEAM_ID - Team ID\n\nsign:darwin:\n  extends: .macos_saas_runners\n  stage: sign\n  needs:\n    - build:darwin-arm64\n  variables:\n    KEYCHAIN_NAME: \"signing.keychain-db\"\n    KEYCHAIN_PASSWORD: \"ci-keychain-password\"\n  script:\n    # Download Developer ID CA certificates\n    - curl -fsSL -o DeveloperIDG2CA.cer \"https://www.apple.com/certificateauthority/DeveloperIDG2CA.cer\"\n    - curl -fsSL -o AppleWWDRCAG2.cer \"https://www.apple.com/certificateauthority/AppleWWDRCAG2.cer\"\n\n    # Create and configure keychain\n    - security create-keychain -p \"$KEYCHAIN_PASSWORD\" \"$KEYCHAIN_NAME\"\n    - security default-keychain -s \"$KEYCHAIN_NAME\"\n    - security unlock-keychain -p \"$KEYCHAIN_PASSWORD\" \"$KEYCHAIN_NAME\"\n    - security set-keychain-settings -lut 3600 \"$KEYCHAIN_NAME\"\n\n    # Import certificates\n    - security import DeveloperIDG2CA.cer -k \"$KEYCHAIN_NAME\" -T /usr/bin/codesign -T /usr/bin/productsign\n    - security import AppleWWDRCAG2.cer -k \"$KEYCHAIN_NAME\" -T /usr/bin/codesign -T /usr/bin/productsign\n    - echo \"$APPLE_CERTIFICATE_BASE64\" | base64 -d &gt; certificate.p12\n    - security import certificate.p12 -k \"$KEYCHAIN_NAME\" -P \"$APPLE_CERTIFICATE_PASSWORD\" -T /usr/bin/codesign -T /usr/bin/productsign\n\n    # Set partition list (critical for CI)\n    - security set-key-partition-list -S apple-tool:,apple:,codesign: -s -k \"$KEYCHAIN_PASSWORD\" \"$KEYCHAIN_NAME\"\n\n    # Sign binary\n    - |\n      codesign --force --options runtime \\\n        --sign \"$APPLE_DEVELOPER_ID_APPLICATION\" \\\n        --timestamp \\\n        dist/huskycat-darwin-arm64\n\n    # Verify signature\n    - codesign --verify --verbose=4 dist/huskycat-darwin-arm64\n\n    # Create ZIP for notarization\n    - zip -j huskycat-darwin-arm64.zip dist/huskycat-darwin-arm64\n\n    # Submit for notarization\n    - |\n      xcrun notarytool submit huskycat-darwin-arm64.zip \\\n        --apple-id \"$APPLE_ID\" \\\n        --password \"$APPLE_NOTARIZE_PASSWORD\" \\\n        --team-id \"$APPLE_TEAM_ID\" \\\n        --wait\n\n    # Cleanup\n    - security delete-keychain \"$KEYCHAIN_NAME\"\n  artifacts:\n    paths:\n      - dist/huskycat-darwin-arm64\n</code></pre>"},{"location":"SPRINT_PLAN/#sprint-3-git-hooks-cli-installer","title":"Sprint 3: Git Hooks CLI Installer","text":""},{"location":"SPRINT_PLAN/#31-clean-hooks-installer-command","title":"3.1 Clean Hooks Installer Command","text":"<p>Create a streamlined <code>setup-hooks</code> command:</p> <pre><code># src/huskycat/commands/hooks.py\n\nimport os\nimport stat\nfrom pathlib import Path\n\nHOOK_TEMPLATE = '''#!/usr/bin/env sh\n# HuskyCat pre-commit hook\n# Installed by: huskycat setup-hooks\n\n# Find huskycat binary (prefer local, then global, then container)\nif [ -x \"./dist/huskycat\" ]; then\n    HUSKYCAT=\"./dist/huskycat\"\nelif command -v huskycat &gt;/dev/null 2&gt;&amp;1; then\n    HUSKYCAT=\"huskycat\"\nelif command -v podman &gt;/dev/null 2&gt;&amp;1; then\n    HUSKYCAT=\"podman run --rm -v .:/workspace ghcr.io/huskycats/validator:latest\"\nelif command -v docker &gt;/dev/null 2&gt;&amp;1; then\n    HUSKYCAT=\"docker run --rm -v .:/workspace ghcr.io/huskycats/validator:latest\"\nelse\n    echo \"HuskyCat not found. Install from: https://github.com/huskycats/huskycat\"\n    exit 1\nfi\n\n# Run validation on staged files\n$HUSKYCAT validate --staged\n'''\n\ndef setup_hooks(git_dir: Path = None):\n    \"\"\"Install HuskyCat git hooks in repository.\"\"\"\n    if git_dir is None:\n        git_dir = Path.cwd()\n\n    hooks_dir = git_dir / \".git\" / \"hooks\"\n    if not hooks_dir.exists():\n        raise ValueError(f\"Not a git repository: {git_dir}\")\n\n    # Install pre-commit hook\n    pre_commit = hooks_dir / \"pre-commit\"\n    pre_commit.write_text(HOOK_TEMPLATE)\n    pre_commit.chmod(pre_commit.stat().st_mode | stat.S_IXUSR | stat.S_IXGRP | stat.S_IXOTH)\n\n    print(f\"Installed pre-commit hook: {pre_commit}\")\n    return True\n</code></pre>"},{"location":"SPRINT_PLAN/#32-one-line-installer-script","title":"3.2 One-Line Installer Script","text":"<p>Create <code>scripts/install.sh</code> for curl-pipe-bash installation:</p> <pre><code>#!/usr/bin/env bash\nset -euo pipefail\n\n# HuskyCat installer\n# Usage: curl -fsSL https://huskycat.io/install | bash\n\nGITHUB_REPO=\"huskycats/huskycat\"\nINSTALL_DIR=\"${HOME}/.local/bin\"\n\n# Detect platform\ndetect_platform() {\n    local os arch\n    os=\"$(uname -s | tr '[:upper:]' '[:lower:]')\"\n    arch=\"$(uname -m)\"\n\n    case \"$arch\" in\n        x86_64) arch=\"amd64\" ;;\n        aarch64|arm64) arch=\"arm64\" ;;\n        *) echo \"Unsupported architecture: $arch\"; exit 1 ;;\n    esac\n\n    case \"$os\" in\n        linux) echo \"linux-${arch}\" ;;\n        darwin) echo \"darwin-${arch}\" ;;\n        *) echo \"Unsupported OS: $os\"; exit 1 ;;\n    esac\n}\n\n# Download and install\ninstall_huskycat() {\n    local platform=\"$1\"\n    local version=\"${HUSKYCAT_VERSION:-latest}\"\n    local url\n\n    if [ \"$version\" = \"latest\" ]; then\n        url=\"https://github.com/${GITHUB_REPO}/releases/latest/download/huskycat-${platform}\"\n    else\n        url=\"https://github.com/${GITHUB_REPO}/releases/download/${version}/huskycat-${platform}\"\n    fi\n\n    mkdir -p \"$INSTALL_DIR\"\n    echo \"Downloading huskycat from $url...\"\n    curl -fsSL \"$url\" -o \"${INSTALL_DIR}/huskycat\"\n    chmod +x \"${INSTALL_DIR}/huskycat\"\n\n    echo \"Installed huskycat to ${INSTALL_DIR}/huskycat\"\n\n    # Check PATH\n    if [[ \":$PATH:\" != *\":${INSTALL_DIR}:\"* ]]; then\n        echo \"\"\n        echo \"Add to your PATH:\"\n        echo \"  export PATH=\\\"\\$PATH:${INSTALL_DIR}\\\"\"\n    fi\n}\n\n# Optional: setup git hooks\nsetup_hooks() {\n    if [ -d \".git\" ]; then\n        read -p \"Setup git hooks in current repository? [y/N] \" -n 1 -r\n        echo\n        if [[ $REPLY =~ ^[Yy]$ ]]; then\n            \"${INSTALL_DIR}/huskycat\" setup-hooks\n        fi\n    fi\n}\n\nmain() {\n    local platform\n    platform=\"$(detect_platform)\"\n    echo \"Detected platform: $platform\"\n\n    install_huskycat \"$platform\"\n    setup_hooks\n\n    echo \"\"\n    echo \"Installation complete!\"\n    echo \"Run 'huskycat --help' to get started.\"\n}\n\nmain \"$@\"\n</code></pre>"},{"location":"SPRINT_PLAN/#sprint-4-ci-templates","title":"Sprint 4: CI Templates","text":""},{"location":"SPRINT_PLAN/#41-gitlab-ci-template-remote-include","title":"4.1 GitLab CI Template (Remote Include)","text":"<p>Create <code>ci-templates/gitlab-ci-huskycat.yml</code> for remote include:</p> <pre><code># HuskyCat GitLab CI Template\n# Include in your .gitlab-ci.yml:\n#   include:\n#     - remote: 'https://raw.githubusercontent.com/huskycats/huskycat/main/ci-templates/gitlab-ci-huskycat.yml'\n\n.huskycat:validate:\n  image: ghcr.io/huskycats/validator:latest\n  script:\n    - huskycat validate ${HUSKYCAT_PATHS:-\".\"}\n  rules:\n    - if: $CI_PIPELINE_SOURCE == \"merge_request_event\"\n    - if: $CI_COMMIT_BRANCH == $CI_DEFAULT_BRANCH\n\n.huskycat:validate-staged:\n  image: ghcr.io/huskycats/validator:latest\n  script:\n    - git diff --cached --name-only | xargs huskycat validate\n  rules:\n    - if: $CI_PIPELINE_SOURCE == \"merge_request_event\"\n\n# Ready-to-use jobs\nhuskycat:lint:\n  extends: .huskycat:validate\n  stage: test\n  allow_failure: false\n\nhuskycat:security:\n  extends: .huskycat:validate\n  stage: test\n  variables:\n    HUSKYCAT_TOOLS: \"bandit,gitleaks\"\n  allow_failure: true\n</code></pre>"},{"location":"SPRINT_PLAN/#42-github-actions-workflow","title":"4.2 GitHub Actions Workflow","text":"<p>Create <code>.github/workflows/huskycat.yml</code>:</p> <pre><code># HuskyCat GitHub Actions Workflow\n# Copy to your repository's .github/workflows/ directory\n\nname: HuskyCat Validation\n\non:\n  push:\n    branches: [main, develop]\n  pull_request:\n    branches: [main]\n\njobs:\n  validate:\n    runs-on: ubuntu-latest\n    container:\n      image: ghcr.io/huskycats/validator:latest\n    steps:\n      - uses: actions/checkout@v4\n      - name: Run HuskyCat validation\n        run: huskycat validate .\n\n  # Optional: Run on specific file types\n  validate-python:\n    runs-on: ubuntu-latest\n    container:\n      image: ghcr.io/huskycats/validator:latest\n    steps:\n      - uses: actions/checkout@v4\n      - name: Validate Python files\n        run: |\n          find . -name \"*.py\" -not -path \"./venv/*\" | xargs huskycat validate\n</code></pre>"},{"location":"SPRINT_PLAN/#43-reusable-github-action","title":"4.3 Reusable GitHub Action","text":"<p>Create <code>action.yml</code> in repository root:</p> <pre><code>name: 'HuskyCat Validation'\ndescription: 'Run HuskyCat code validation'\nbranding:\n  icon: 'check-circle'\n  color: 'blue'\n\ninputs:\n  paths:\n    description: 'Paths to validate'\n    required: false\n    default: '.'\n  tools:\n    description: 'Comma-separated list of tools to run'\n    required: false\n    default: 'all'\n  fix:\n    description: 'Auto-fix issues where possible'\n    required: false\n    default: 'false'\n\nruns:\n  using: 'docker'\n  image: 'docker://ghcr.io/huskycats/validator:latest'\n  args:\n    - validate\n    - ${{ inputs.paths }}\n    - --tools=${{ inputs.tools }}\n    - ${{ inputs.fix == 'true' &amp;&amp; '--fix' || '' }}\n</code></pre>"},{"location":"SPRINT_PLAN/#sprint-5-documentation-accuracy","title":"Sprint 5: Documentation Accuracy","text":""},{"location":"SPRINT_PLAN/#51-update-claudemd","title":"5.1 Update CLAUDE.md","text":"<ul> <li>Remove \"container-only\" claims (code has fallback logic)</li> <li>Document actual dual-mode execution</li> <li>Update command examples to match implementation</li> </ul>"},{"location":"SPRINT_PLAN/#52-update-architecture-docs","title":"5.2 Update Architecture Docs","text":"<ul> <li>Remove specific timing claims</li> <li>Document actual tool availability per execution mode</li> <li>Add architecture decision records (ADRs)</li> </ul>"},{"location":"SPRINT_PLAN/#priority-matrix","title":"Priority Matrix","text":"Item Severity Effort Sprint Mode detector + adapter interfaces Critical Medium 0 pyproject.toml entry point Critical Low 1 GitLab CI binary path Critical Low 1 ContainerFile.dev High Medium 1 Test imports High Low 1 Multiarch builds High High 2 Darwin signing High High 2 Git hooks installer Medium Medium 3 CI templates Medium Medium 4 Documentation + ADRs Medium Medium 5 Adapter implementations Medium High 6 Mode consolidation Medium High 7 Auto-fix framework High High 8"},{"location":"SPRINT_PLAN/#sprint-dependencies","title":"Sprint Dependencies","text":"<pre><code>Sprint 0 (Foundation) \u2500\u252c\u2500&gt; Sprint 1 (Critical) \u2500&gt; Sprint 2 (Builds)\n                       \u2502\n                       \u2514\u2500&gt; Sprint 6 (Adapters) \u2500&gt; Sprint 7 (Consolidation) \u2500&gt; Sprint 8 (Auto-Fix)\n\nSprint 3 (Hooks) \u2500\u252c\u2500&gt; Sprint 4 (CI Templates)\n                  \u2502\n                  \u2514\u2500&gt; Sprint 5 (Docs)\n</code></pre> <p>Parallel Work Possible: - Sprints 1-2 can proceed independently of Sprint 6-8 - Sprints 3-5 can proceed in parallel with Sprint 2 - Sprint 0 must complete before Sprint 6 - Sprint 7 must complete before Sprint 8 (auto-fix uses adapters)</p> <p>Critical Path: Sprint 0 \u2192 Sprint 6 \u2192 Sprint 7 \u2192 Sprint 8</p>"},{"location":"SPRINT_PLAN/#required-cicd-variables-darwin-signing","title":"Required CI/CD Variables (Darwin Signing)","text":"<p>For Darwin code signing, configure these in GitLab CI/CD settings:</p> Variable Description Protected Masked <code>APPLE_CERTIFICATE_BASE64</code> Base64 .p12 certificate Yes Yes <code>APPLE_CERTIFICATE_PASSWORD</code> Certificate password Yes Yes <code>APPLE_DEVELOPER_ID_APPLICATION</code> Signing identity Yes No <code>APPLE_DEVELOPER_ID_INSTALLER</code> Installer identity Yes No <code>APPLE_ID</code> Apple ID email Yes No <code>APPLE_NOTARIZE_PASSWORD</code> App-specific password Yes Yes <code>APPLE_TEAM_ID</code> Team ID Yes No"},{"location":"SPRINT_PLAN/#implementation-checklist","title":"Implementation Checklist","text":""},{"location":"SPRINT_PLAN/#sprint-0-architecture-foundation","title":"Sprint 0 (Architecture Foundation)","text":"<ul> <li> Create <code>ProductMode</code> enum in <code>src/huskycat/core/mode_detector.py</code></li> <li> Implement <code>detect_mode()</code> function</li> <li> Create base <code>ModeAdapter</code> abstract class</li> <li> Create adapter interfaces for all five modes</li> <li> Wire mode detection into <code>__main__.py</code> entry point</li> <li> Add <code>HUSKYCAT_MODE</code> environment variable override</li> <li> Add unit tests for mode detection</li> </ul>"},{"location":"SPRINT_PLAN/#sprint-1-critical-fixes","title":"Sprint 1 (Critical Fixes)","text":"<ul> <li> Fix pyproject.toml entry point</li> <li> Fix .gitlab-ci.yml binary build path</li> <li> Create ContainerFile.dev or remove job</li> <li> Fix test import issues</li> </ul>"},{"location":"SPRINT_PLAN/#sprint-2-multiarch-builds","title":"Sprint 2 (Multiarch Builds)","text":"<ul> <li> Add linux-arm64 build job</li> <li> Add darwin-arm64 build job</li> <li> Add darwin-amd64 build job</li> <li> Implement Darwin signing job</li> <li> Test notarization workflow</li> </ul>"},{"location":"SPRINT_PLAN/#sprint-3-git-hooks","title":"Sprint 3 (Git Hooks)","text":"<ul> <li> Refactor setup-hooks command</li> <li> Create one-line installer script</li> <li> Test on Linux, macOS, Windows</li> <li> Add uninstall command</li> </ul>"},{"location":"SPRINT_PLAN/#sprint-4-ci-templates_1","title":"Sprint 4 (CI Templates)","text":"<ul> <li> Create GitLab CI template</li> <li> Create GitHub Actions workflow</li> <li> Create reusable GitHub Action</li> <li> Test remote includes</li> </ul>"},{"location":"SPRINT_PLAN/#sprint-5-documentation","title":"Sprint 5 (Documentation)","text":"<ul> <li> Update CLAUDE.md accuracy</li> <li> Update architecture docs</li> <li> Add ADR for product mode architecture</li> <li> Document mode detection logic</li> <li> Add usage examples for each mode</li> </ul>"},{"location":"SPRINT_PLAN/#sprint-6-adapter-refactor","title":"Sprint 6 (Adapter Refactor)","text":"<ul> <li> Implement <code>GitHooksAdapter</code> with minimal output</li> <li> Implement <code>CIAdapter</code> with JUnit XML output</li> <li> Implement <code>CLIAdapter</code> with rich terminal output</li> <li> Implement <code>PipelineAdapter</code> with JSON output</li> <li> Implement <code>MCPAdapter</code> with JSON-RPC output</li> <li> Refactor <code>validate</code> command to use adapters</li> <li> Add adapter selection tests</li> </ul>"},{"location":"SPRINT_PLAN/#sprint-7-mode-consolidation","title":"Sprint 7 (Mode Consolidation)","text":"<ul> <li> Audit codebase for scattered mode-specific logic</li> <li> Consolidate output formatting into adapters</li> <li> Consolidate error handling into adapters</li> <li> Consolidate tool selection into adapters</li> <li> Remove duplicate conditionals</li> <li> Final integration testing across all modes</li> </ul>"},{"location":"SPRINT_PLAN/#sprint-8-auto-fix-framework","title":"Sprint 8 (Auto-Fix Framework)","text":"<ul> <li> Create unified <code>AutoFixer</code> interface</li> <li> Implement Python auto-fixers (black, ruff, autoflake, isort)</li> <li> Implement JavaScript auto-fixers (eslint --fix, prettier)</li> <li> Implement YAML auto-fixers (yamllint suggestions)</li> <li> Implement Shell auto-fixers (shellcheck directives)</li> <li> Implement security auto-fixers (safe pattern replacements)</li> <li> Add <code>--fix</code> flag to all validate commands</li> <li> Add <code>--fix-dry-run</code> for preview mode</li> <li> Implement interactive fix prompts (CLI mode)</li> <li> Implement batch fix mode (Pipeline/CI modes)</li> <li> Add fix reporting (what was changed, what couldn't be fixed)</li> <li> Test auto-fix across all product modes</li> </ul>"},{"location":"SPRINT_PLAN/#mode-specific-test-matrix","title":"Mode-Specific Test Matrix","text":""},{"location":"SPRINT_PLAN/#validation-tests","title":"Validation Tests","text":"Mode Input Expected Output Exit Code Git Hooks Staged files with errors Minimal error text 1 Git Hooks Staged files clean (silent) 0 CI Any files with errors JUnit XML report 1 CI Clean files JUnit XML (pass) 0 CLI Files with errors Colored output + suggestions 1 CLI Clean files Success message 0 Pipeline stdin file list JSON array of results 0/1 MCP JSON-RPC request JSON-RPC response N/A"},{"location":"SPRINT_PLAN/#auto-fix-tests","title":"Auto-Fix Tests","text":"Mode Input <code>--fix</code> Behavior Output Git Hooks Staged + fixable Fix SAFE only List of fixed files Git Hooks Staged + LIKELY fixes Prompt if TTY Fixed + prompted files CI Any files Report only (no changes) JSON diff of what would fix CLI Files + <code>--fix</code> Fix SAFE+LIKELY Colored report CLI Files + <code>--fix --interactive</code> Prompt for each UNCERTAIN Interactive prompts CLI Files + <code>--fix --unsafe</code> Fix ALL including UNCERTAIN Full report CLI Files + <code>--fix --dry-run</code> Preview changes Diff output Pipeline stdin + <code>--fix</code> Fix all JSON report MCP <code>huskycat_fix</code> tool Return suggestions JSON-RPC with fixes MCP <code>huskycat_apply_suggestion</code> Apply single fix JSON-RPC confirmation"},{"location":"binary-downloads/","title":"Binary Downloads","text":"<p>HuskyCat provides pre-built binaries for multiple platforms through GitLab releases.</p>"},{"location":"binary-downloads/#quick-install","title":"Quick Install","text":""},{"location":"binary-downloads/#linux-amd64","title":"Linux (AMD64)","text":"<pre><code># Download latest release\ncurl -L -o huskycat https://gitlab.com/tinyland/ai/huskycat/-/releases/permalink/latest/downloads/huskycat-linux-amd64\n\n# Make executable\nchmod +x huskycat\n\n# Install to system path (optional)\nsudo mv huskycat /usr/local/bin/\n</code></pre>"},{"location":"binary-downloads/#linux-arm64","title":"Linux (ARM64)","text":"<pre><code># Download latest release\ncurl -L -o huskycat https://gitlab.com/tinyland/ai/huskycat/-/releases/permalink/latest/downloads/huskycat-linux-arm64\n\n# Make executable\nchmod +x huskycat\n\n# Install to system path (optional)\nsudo mv huskycat /usr/local/bin/\n</code></pre>"},{"location":"binary-downloads/#macos-apple-silicon","title":"macOS (Apple Silicon)","text":"<pre><code># Download latest release (ad-hoc signed)\ncurl -L -o huskycat https://gitlab.com/tinyland/ai/huskycat/-/releases/permalink/latest/downloads/huskycat-darwin-arm64\n\n# Make executable\nchmod +x huskycat\n\n# Install to user path (recommended for unsigned binaries)\nmv huskycat ~/.local/bin/\n\n# Add to PATH if needed\necho 'export PATH=\"$HOME/.local/bin:$PATH\"' &gt;&gt; ~/.zshrc\nsource ~/.zshrc\n</code></pre> <p>Note: macOS binaries are ad-hoc signed. You may need to allow execution in System Settings &gt; Privacy &amp; Security on first run.</p>"},{"location":"binary-downloads/#available-binaries","title":"Available Binaries","text":"Platform Architecture Binary Name Status Linux x86_64 <code>huskycat-linux-amd64</code> \u2705 Rocky Linux 10 Linux ARM64/aarch64 <code>huskycat-linux-arm64</code> \u2705 Rocky Linux 10 macOS Apple Silicon (M1/M2/M3) <code>huskycat-darwin-arm64</code> \u2705 Ad-hoc signed macOS Intel (x86_64) \u274c Not available GitLab SaaS ARM64 only"},{"location":"binary-downloads/#download-options","title":"Download Options","text":""},{"location":"binary-downloads/#option-1-latest-release-recommended","title":"Option 1: Latest Release (Recommended)","text":"<p>Use GitLab's permalink to always get the latest version:</p> <pre><code># Linux AMD64\nhttps://gitlab.com/tinyland/ai/huskycat/-/releases/permalink/latest/downloads/huskycat-linux-amd64\n\n# Linux ARM64\nhttps://gitlab.com/tinyland/ai/huskycat/-/releases/permalink/latest/downloads/huskycat-linux-arm64\n\n# macOS ARM64\nhttps://gitlab.com/tinyland/ai/huskycat/-/releases/permalink/latest/downloads/huskycat-darwin-arm64\n</code></pre>"},{"location":"binary-downloads/#option-2-specific-version","title":"Option 2: Specific Version","text":"<p>Download a specific tagged release:</p> <pre><code># Replace $VERSION with desired tag (e.g., v2.0.0)\nhttps://gitlab.com/tinyland/ai/huskycat/-/jobs/artifacts/$VERSION/raw/dist/bin/huskycat-linux-amd64?job=binary:build:linux\n</code></pre>"},{"location":"binary-downloads/#option-3-browse-all-releases","title":"Option 3: Browse All Releases","text":"<p>Visit the releases page to see all available versions:</p> <p>https://gitlab.com/tinyland/ai/huskycat/-/releases</p>"},{"location":"binary-downloads/#verification","title":"Verification","text":""},{"location":"binary-downloads/#check-version","title":"Check Version","text":"<pre><code>./huskycat --version\n</code></pre>"},{"location":"binary-downloads/#verify-installation","title":"Verify Installation","text":"<pre><code># Show system status\n./huskycat status\n\n# Test validation\n./huskycat validate --help\n</code></pre>"},{"location":"binary-downloads/#container-requirements","title":"Container Requirements","text":"<p>HuskyCat requires a container runtime for validation:</p> <pre><code># Check for Podman\npodman --version\n\n# Or check for Docker\ndocker --version\n</code></pre> <p>If neither is installed, see Container Runtime Installation.</p>"},{"location":"binary-downloads/#installation-methods","title":"Installation Methods","text":""},{"location":"binary-downloads/#method-1-user-installation-recommended","title":"Method 1: User Installation (Recommended)","text":"<p>Install to <code>~/.local/bin</code> (no sudo required):</p> <pre><code># Create directory if it doesn't exist\nmkdir -p ~/.local/bin\n\n# Download and install\ncurl -L -o ~/.local/bin/huskycat https://gitlab.com/tinyland/ai/huskycat/-/releases/permalink/latest/downloads/huskycat-linux-amd64\nchmod +x ~/.local/bin/huskycat\n\n# Add to PATH (if not already)\necho 'export PATH=\"$HOME/.local/bin:$PATH\"' &gt;&gt; ~/.bashrc\nsource ~/.bashrc\n</code></pre>"},{"location":"binary-downloads/#method-2-system-wide-installation","title":"Method 2: System-Wide Installation","text":"<p>Install to <code>/usr/local/bin</code> (requires sudo):</p> <pre><code># Download\ncurl -L -o /tmp/huskycat https://gitlab.com/tinyland/ai/huskycat/-/releases/permalink/latest/downloads/huskycat-linux-amd64\n\n# Install\nsudo install -m 0755 /tmp/huskycat /usr/local/bin/huskycat\nrm /tmp/huskycat\n</code></pre>"},{"location":"binary-downloads/#method-3-project-local-installation","title":"Method 3: Project-Local Installation","text":"<p>Install in your project directory:</p> <pre><code># Download to project\ncurl -L -o huskycat https://gitlab.com/tinyland/ai/huskycat/-/releases/permalink/latest/downloads/huskycat-linux-amd64\nchmod +x huskycat\n\n# Use relative path\n./huskycat setup-hooks\n./huskycat validate\n</code></pre>"},{"location":"binary-downloads/#container-runtime-installation","title":"Container Runtime Installation","text":"<p>HuskyCat requires either Podman or Docker for validation.</p>"},{"location":"binary-downloads/#podman-recommended","title":"Podman (Recommended)","text":""},{"location":"binary-downloads/#macos","title":"macOS","text":"<pre><code># Using Homebrew\nbrew install podman\n\n# Start Podman machine\npodman machine init\npodman machine start\n</code></pre>"},{"location":"binary-downloads/#linux","title":"Linux","text":"<pre><code># Ubuntu/Debian\nsudo apt-get update\nsudo apt-get install -y podman\n\n# Fedora/Rocky/RHEL\nsudo dnf install -y podman\n\n# Arch\nsudo pacman -S podman\n</code></pre>"},{"location":"binary-downloads/#docker","title":"Docker","text":""},{"location":"binary-downloads/#macos_1","title":"macOS","text":"<p>Download Docker Desktop from https://www.docker.com/products/docker-desktop</p>"},{"location":"binary-downloads/#linux_1","title":"Linux","text":"<pre><code># Ubuntu/Debian\ncurl -fsSL https://get.docker.com -o get-docker.sh\nsudo sh get-docker.sh\n\n# Add user to docker group (optional)\nsudo usermod -aG docker $USER\nnewgrp docker\n</code></pre>"},{"location":"binary-downloads/#post-installation","title":"Post-Installation","text":""},{"location":"binary-downloads/#1-setup-git-hooks","title":"1. Setup Git Hooks","text":"<pre><code># Navigate to your project\ncd your-project\n\n# Install HuskyCat git hooks\nhuskycat setup-hooks\n</code></pre>"},{"location":"binary-downloads/#2-configure-mcp-optional","title":"2. Configure MCP (Optional)","text":"<p>For Claude Code integration:</p> <pre><code>huskycat bootstrap\n</code></pre> <p>See MCP Server Integration for details.</p>"},{"location":"binary-downloads/#3-build-container-first-run","title":"3. Build Container (First Run)","text":"<pre><code># Build validation container\ncd /path/to/huskycats-bates\nnpm run container:build\n</code></pre> <p>Note: This step is only needed if you're developing HuskyCat itself. For normal usage, the binary will use pre-built container images.</p>"},{"location":"binary-downloads/#troubleshooting","title":"Troubleshooting","text":""},{"location":"binary-downloads/#permission-denied-on-macos","title":"\"Permission denied\" on macOS","text":"<p>macOS Gatekeeper may block unsigned binaries:</p> <pre><code># Allow execution\nxattr -d com.apple.quarantine ~/.local/bin/huskycat\n\n# Or: System Settings &gt; Privacy &amp; Security &gt; Allow \"huskycat\"\n</code></pre>"},{"location":"binary-downloads/#no-container-runtime-available","title":"\"No container runtime available\"","text":"<p>Install Podman or Docker:</p> <pre><code># Check if installed\nwhich podman || which docker\n\n# Install Podman (recommended)\nbrew install podman  # macOS\nsudo dnf install podman  # Rocky Linux\n</code></pre>"},{"location":"binary-downloads/#binary-not-found-after-installation","title":"Binary not found after installation","text":"<p>Check PATH:</p> <pre><code># Verify binary location\nls -l ~/.local/bin/huskycat\n\n# Check if directory is in PATH\necho $PATH | grep -q \"$HOME/.local/bin\" &amp;&amp; echo \"\u2713 In PATH\" || echo \"\u2717 Not in PATH\"\n\n# Add to PATH\necho 'export PATH=\"$HOME/.local/bin:$PATH\"' &gt;&gt; ~/.bashrc\nsource ~/.bashrc\n</code></pre>"},{"location":"binary-downloads/#architecture-mismatch","title":"Architecture mismatch","text":"<p>Ensure you downloaded the correct binary for your platform:</p> <pre><code># Check your architecture\nuname -m\n# x86_64 \u2192 Use huskycat-linux-amd64\n# aarch64 or arm64 \u2192 Use huskycat-linux-arm64 or huskycat-darwin-arm64\n\n# Check binary architecture\nfile huskycat\n</code></pre>"},{"location":"binary-downloads/#updating","title":"Updating","text":""},{"location":"binary-downloads/#manual-update","title":"Manual Update","text":"<pre><code># Download new version\ncurl -L -o /tmp/huskycat https://gitlab.com/tinyland/ai/huskycat/-/releases/permalink/latest/downloads/huskycat-linux-amd64\n\n# Replace existing binary\nchmod +x /tmp/huskycat\nmv /tmp/huskycat ~/.local/bin/huskycat\n\n# Verify new version\nhuskycat --version\n</code></pre>"},{"location":"binary-downloads/#update-script","title":"Update Script","text":"<p>Create an update script:</p> <pre><code>#!/usr/bin/env bash\n# update-huskycat.sh\n\nset -euo pipefail\n\nPLATFORM=\"linux-amd64\"  # Change to your platform\nINSTALL_DIR=\"$HOME/.local/bin\"\nBINARY_URL=\"https://gitlab.com/tinyland/ai/huskycat/-/releases/permalink/latest/downloads/huskycat-${PLATFORM}\"\n\necho \"Downloading HuskyCat for ${PLATFORM}...\"\ncurl -L -o /tmp/huskycat \"$BINARY_URL\"\n\necho \"Installing to ${INSTALL_DIR}...\"\nchmod +x /tmp/huskycat\nmv /tmp/huskycat \"${INSTALL_DIR}/huskycat\"\n\necho \"\u2713 HuskyCat updated successfully!\"\nhuskycat --version\n</code></pre> <pre><code># Make executable and run\nchmod +x update-huskycat.sh\n./update-huskycat.sh\n</code></pre>"},{"location":"binary-downloads/#alternative-build-from-source","title":"Alternative: Build from Source","text":"<p>If binaries aren't available for your platform, build from source:</p> <pre><code>git clone https://gitlab.com/tinyland/ai/huskycat.git\ncd huskycat\nnpm install\nuv sync --dev\nnpm run build:binary\n\n# Binary will be at: dist/huskycat\n</code></pre> <p>See Installation Guide for detailed build instructions.</p> <p>For additional support, see Troubleshooting or visit our GitLab Issues.</p>"},{"location":"cli-reference/","title":"CLI Reference","text":"<p>Complete command-line interface reference for HuskyCat.</p>"},{"location":"cli-reference/#synopsis","title":"Synopsis","text":"<pre><code>huskycat [OPTIONS] COMMAND [ARGS]\n</code></pre>"},{"location":"cli-reference/#global-options","title":"Global Options","text":"Option Description <code>-h</code>, <code>--help</code> Show help message and exit <code>--version</code> Show version and exit <code>--verbose</code>, <code>-v</code> Enable verbose output (repeat for more verbosity) <code>--config-dir PATH</code> Override config directory (default: <code>.huskycat</code>) <code>--mode MODE</code> Override product mode detection (see Product Modes) <code>--json</code> Force JSON output (equivalent to <code>--mode pipeline</code>)"},{"location":"cli-reference/#product-modes","title":"Product Modes","text":"<p>HuskyCat automatically detects the execution context, but you can override:</p> Mode Description Output Format Use Case <code>git_hooks</code> Git hooks mode Minimal, errors only Pre-commit/pre-push validation <code>ci</code> CI/CD mode JUnit XML GitLab CI, GitHub Actions <code>cli</code> Interactive CLI Rich terminal output Developer usage <code>pipeline</code> Pipeline integration JSON Scripting, automation <code>mcp</code> MCP server JSON-RPC 2.0 Claude Code integration <p>Examples:</p> <pre><code># Force CI mode with JUnit XML output\nhuskycat --mode ci validate --all\n\n# Force JSON output for scripting\nhuskycat --json status\n\n# Verbose CLI output\nhuskycat -vv validate src/\n</code></pre>"},{"location":"cli-reference/#commands","title":"Commands","text":""},{"location":"cli-reference/#validate","title":"validate","text":"<p>Validate files or directories with all applicable validators.</p> <p>Usage: <pre><code>huskycat validate [OPTIONS] [FILES...]\n</code></pre></p> <p>Arguments: - <code>FILES</code> - Files or directories to validate (default: current directory)</p> <p>Options:</p> Option Description <code>--staged</code> Validate only staged git files <code>--all</code> Validate all files in repository <code>--fix</code> Auto-fix issues where possible <code>--interactive</code> Prompt for auto-fix decisions <code>--allow-warnings</code> Allow warnings to pass (don't fail) <p>Examples:</p> <pre><code># Validate current directory\nhuskycat validate\n\n# Validate specific files\nhuskycat validate src/main.py tests/test_api.py\n\n# Validate all Python files in src/\nhuskycat validate src/**/*.py\n\n# Validate staged files (pre-commit)\nhuskycat validate --staged\n\n# Validate and auto-fix\nhuskycat validate --fix\n\n# Interactive auto-fix with prompts\nhuskycat validate --fix --interactive\n\n# Validate all files in repository\nhuskycat validate --all\n</code></pre> <p>Exit Codes: - <code>0</code> - All validations passed - <code>1</code> - Validation failures found - <code>2</code> - Error during execution</p>"},{"location":"cli-reference/#auto-fix","title":"auto-fix","text":"<p>Auto-fix issues using all available validators.</p> <p>Usage: <pre><code>huskycat auto-fix [OPTIONS] [FILES...]\n</code></pre></p> <p>Arguments: - <code>FILES</code> - Files or directories to auto-fix (default: current directory)</p> <p>Options:</p> Option Description <code>--staged</code> Auto-fix only staged git files <code>--interactive</code> Prompt before applying fixes <p>Examples:</p> <pre><code># Auto-fix current directory\nhuskycat auto-fix\n\n# Auto-fix staged files\nhuskycat auto-fix --staged\n\n# Interactive auto-fix with confirmation\nhuskycat auto-fix --interactive src/\n</code></pre>"},{"location":"cli-reference/#setup-hooks","title":"setup-hooks","text":"<p>Install git hooks for automatic validation.</p> <p>Usage: <pre><code>huskycat setup-hooks [OPTIONS]\n</code></pre></p> <p>Options:</p> Option Description <code>--force</code> Overwrite existing hooks <p>Examples:</p> <pre><code># Install git hooks\nhuskycat setup-hooks\n\n# Force reinstall (overwrite existing)\nhuskycat setup-hooks --force\n</code></pre> <p>Installed Hooks: - <code>pre-commit</code> - Validates staged files before commit - <code>pre-push</code> - Validates CI configuration before push - <code>commit-msg</code> - Validates commit message format</p> <p>Configuration:</p> <p>Hooks respect <code>.huskycat/config.json</code> settings. To skip hooks temporarily:</p> <pre><code># Skip hooks for one commit\nSKIP_HOOKS=1 git commit -m \"message\"\n\n# Skip validation on push\ngit push --no-verify\n</code></pre>"},{"location":"cli-reference/#ci-validate","title":"ci-validate","text":"<p>Validate CI configuration files.</p> <p>Usage: <pre><code>huskycat ci-validate [FILES...]\n</code></pre></p> <p>Arguments: - <code>FILES</code> - CI configuration files (default: <code>.gitlab-ci.yml</code>)</p> <p>Examples:</p> <pre><code># Validate GitLab CI\nhuskycat ci-validate .gitlab-ci.yml\n\n# Validate multiple CI files\nhuskycat ci-validate .gitlab-ci.yml .github/workflows/*.yml\n</code></pre> <p>Supported CI Configs: - GitLab CI (<code>.gitlab-ci.yml</code>) - GitHub Actions (<code>.github/workflows/*.yml</code>)</p>"},{"location":"cli-reference/#auto-devops","title":"auto-devops","text":"<p>Validate Auto-DevOps Helm charts and Kubernetes manifests.</p> <p>Usage: <pre><code>huskycat auto-devops [PATH]\n</code></pre></p> <p>Arguments: - <code>PATH</code> - Path to Helm charts or K8s manifests (default: <code>.</code>)</p> <p>Examples:</p> <pre><code># Validate Auto-DevOps configuration\nhuskycat auto-devops\n\n# Validate specific Helm chart\nhuskycat auto-devops charts/myapp/\n</code></pre>"},{"location":"cli-reference/#mcp-server","title":"mcp-server","text":"<p>Start MCP server for Claude Code integration (stdio mode).</p> <p>Usage: <pre><code>huskycat mcp-server\n</code></pre></p> <p>Notes: - Uses stdin/stdout for JSON-RPC 2.0 communication - No HTTP server or port configuration - Designed for Claude Code MCP integration</p> <p>Examples:</p> <pre><code># Start MCP server (normally called by Claude Code)\nhuskycat mcp-server\n\n# Test MCP server manually\necho '{\"jsonrpc\":\"2.0\",\"method\":\"initialize\",\"params\":{},\"id\":1}' | huskycat mcp-server\n</code></pre> <p>See MCP Server Guide for integration details.</p>"},{"location":"cli-reference/#bootstrap","title":"bootstrap","text":"<p>Automatically configure Claude Code MCP integration.</p> <p>Usage: <pre><code>huskycat bootstrap [OPTIONS]\n</code></pre></p> <p>Options:</p> Option Description <code>--force</code> Overwrite existing MCP configuration <p>Examples:</p> <pre><code># Configure Claude Code MCP integration\nhuskycat bootstrap\n\n# Force reconfiguration\nhuskycat bootstrap --force\n</code></pre> <p>What it does: 1. Creates MCP configuration file 2. Configures HuskyCat binary path 3. Sets up stdio transport</p>"},{"location":"cli-reference/#update-schemas","title":"update-schemas","text":"<p>Update validation schemas from official sources.</p> <p>Usage: <pre><code>huskycat update-schemas\n</code></pre></p> <p>Examples:</p> <pre><code># Update all validation schemas\nhuskycat update-schemas\n</code></pre> <p>Updated Schemas: - GitLab CI schema - JSON schemas for configuration files - Validation rule definitions</p>"},{"location":"cli-reference/#clean","title":"clean","text":"<p>Clean cache and temporary files.</p> <p>Usage: <pre><code>huskycat clean [OPTIONS]\n</code></pre></p> <p>Options:</p> Option Description <code>--all</code> Clean all cached data including schemas <p>Examples:</p> <pre><code># Clean cache and temporary files\nhuskycat clean\n\n# Clean everything including schemas\nhuskycat clean --all\n</code></pre> <p>Cleaned Directories: - <code>.huskycat/cache/</code> - Validation cache - <code>.huskycat/temp/</code> - Temporary files - With <code>--all</code>: <code>.huskycat/schemas/</code> - Downloaded schemas</p>"},{"location":"cli-reference/#status","title":"status","text":"<p>Show HuskyCat configuration and system status.</p> <p>Usage: <pre><code>huskycat status\n</code></pre></p> <p>Examples:</p> <pre><code># Show status\nhuskycat status\n\n# JSON output for scripting\nhuskycat --json status\n</code></pre> <p>Status Information: - HuskyCat version - Product mode (detected) - Container runtime (podman/docker) - Installed validators - Git hooks status - Configuration directory - Cache size</p>"},{"location":"cli-reference/#install","title":"install","text":"<p>Install HuskyCat binary and dependencies (for development).</p> <p>Usage: <pre><code>huskycat install\n</code></pre></p> <p>Examples:</p> <pre><code># Install HuskyCat\nhuskycat install\n</code></pre> <p>Note: Most users should use pre-built binaries instead.</p>"},{"location":"cli-reference/#environment-variables","title":"Environment Variables","text":"<p>HuskyCat respects these environment variables:</p> Variable Description Default <code>HUSKYCAT_MODE</code> Override product mode detection Auto-detect <code>HUSKYCAT_LOG_LEVEL</code> Logging level (DEBUG, INFO, WARNING, ERROR) INFO <code>HUSKYCAT_CONFIG_DIR</code> Configuration directory <code>.huskycat</code> <code>SKIP_HOOKS</code> Skip git hooks (set to <code>1</code>) Not set <code>CI</code> Detected CI environment Not set <code>GITLAB_CI</code> GitLab CI detection Not set <code>GITHUB_ACTIONS</code> GitHub Actions detection Not set <p>Examples:</p> <pre><code># Enable debug logging\nHUSKYCAT_LOG_LEVEL=DEBUG huskycat validate\n\n# Override product mode\nHUSKYCAT_MODE=ci huskycat validate --all\n\n# Skip git hooks temporarily\nSKIP_HOOKS=1 git commit -m \"message\"\n</code></pre>"},{"location":"cli-reference/#exit-codes","title":"Exit Codes","text":"Code Meaning <code>0</code> Success - all validations passed <code>1</code> Validation failures found <code>2</code> Execution error (invalid arguments, missing dependencies, etc.)"},{"location":"cli-reference/#configuration-files","title":"Configuration Files","text":""},{"location":"cli-reference/#project-configuration","title":"Project Configuration","text":"<p>Location: <code>.huskycat/config.json</code></p> <pre><code>{\n  \"validators\": {\n    \"python-black\": {\"enabled\": true},\n    \"mypy\": {\"enabled\": true},\n    \"flake8\": {\"enabled\": true},\n    \"ruff\": {\"enabled\": true}\n  },\n  \"auto_fix\": {\n    \"enabled\": true,\n    \"interactive\": false\n  }\n}\n</code></pre>"},{"location":"cli-reference/#tool-specific-configuration","title":"Tool-Specific Configuration","text":"<p>HuskyCat respects standard configuration files:</p> <ul> <li>Black: <code>pyproject.toml</code> ([tool.black])</li> <li>Flake8: <code>.flake8</code>, <code>setup.cfg</code></li> <li>MyPy: <code>mypy.ini</code>, <code>pyproject.toml</code></li> <li>Ruff: <code>ruff.toml</code>, <code>pyproject.toml</code></li> <li>ESLint: <code>.eslintrc.json</code>, <code>.eslintrc.js</code></li> <li>Prettier: <code>.prettierrc</code>, <code>prettier.config.js</code></li> </ul>"},{"location":"cli-reference/#validators","title":"Validators","text":"<p>HuskyCat includes these validators:</p>"},{"location":"cli-reference/#python","title":"Python","text":"Validator Tool Purpose Auto-Fix <code>python-black</code> Black Code formatting \u2705 Yes <code>autoflake</code> Autoflake Remove unused imports \u2705 Yes <code>flake8</code> Flake8 Linting \u274c No <code>mypy</code> MyPy Type checking \u274c No <code>ruff</code> Ruff Fast linting \u2705 Partial <code>bandit</code> Bandit Security scanning \u274c No"},{"location":"cli-reference/#javascripttypescript","title":"JavaScript/TypeScript","text":"Validator Tool Purpose Auto-Fix <code>js-eslint</code> ESLint Linting \u2705 Partial <code>js-prettier</code> Prettier Code formatting \u2705 Yes"},{"location":"cli-reference/#configuration-files_1","title":"Configuration Files","text":"Validator Tool Purpose Auto-Fix <code>yamllint</code> yamllint YAML linting \u2705 Partial <code>gitlab-ci</code> GitLab CI Lint CI validation \u274c No"},{"location":"cli-reference/#containers-scripts","title":"Containers &amp; Scripts","text":"Validator Tool Purpose Auto-Fix <code>docker-hadolint</code> hadolint Dockerfile linting \u274c No <code>shellcheck</code> shellcheck Shell script linting \u274c No"},{"location":"cli-reference/#examples","title":"Examples","text":""},{"location":"cli-reference/#common-workflows","title":"Common Workflows","text":"<p>Pre-commit validation: <pre><code># Validate staged files before commit\nhuskycat validate --staged --fix\n</code></pre></p> <p>CI/CD integration: <pre><code># Validate in CI with JUnit XML output\nhuskycat --mode ci validate --all\n</code></pre></p> <p>Interactive development: <pre><code># Validate and interactively fix issues\nhuskycat validate --fix --interactive src/\n</code></pre></p> <p>Scripting/Automation: <pre><code># Get JSON output for parsing\nhuskycat --json validate src/ &gt; results.json\n</code></pre></p>"},{"location":"cli-reference/#troubleshooting","title":"Troubleshooting","text":""},{"location":"cli-reference/#common-issues","title":"Common Issues","text":"<p>\"No container runtime available\"</p> <p>Install Podman or Docker: <pre><code># macOS\nbrew install podman\n\n# Rocky Linux\nsudo dnf install podman\n</code></pre></p> <p>\"Permission denied\" on macOS</p> <p>Allow binary execution: <pre><code>xattr -d com.apple.quarantine ~/.local/bin/huskycat\n</code></pre></p> <p>Git hooks not running</p> <p>Check hooks installation: <pre><code>huskycat status\nls -la .git/hooks/\n</code></pre></p> <p>Reinstall if needed: <pre><code>huskycat setup-hooks --force\n</code></pre></p> <p>For detailed installation instructions, see Installation Guide.</p> <p>For binary downloads, see Binary Downloads.</p> <p>For troubleshooting, see Troubleshooting Guide.</p>"},{"location":"configuration/","title":"Configuration Reference","text":"<p>This document details all configuration options for HuskyCat's container-only validation platform.</p>"},{"location":"configuration/#linting-configuration-files","title":"Linting Configuration Files","text":""},{"location":"configuration/#ansible-lint","title":"<code>.ansible-lint</code>","text":"<p>Ansible-lint configuration with production-grade settings:</p> <pre><code># Profile settings\nprofile: production  # Enforces strict rules\n\n# Paths to exclude\nexclude_paths:\n  - .cache/\n  - node_modules/\n  - vendor/\n\n# Behavior\nprogressive: true   # Return non-zero on warnings\nstrict: true       # Enable strict mode\n\n# Rule configuration\nenable_list:       # Explicitly enabled rules\n  - args\n  - command-instead-of-module\n  - fqcn\n  - no-log-password\n  # ... more rules\n\nskip_list:         # Rules to skip\n  - experimental   # Skip experimental rules\n</code></pre>"},{"location":"configuration/#pyprojecttoml","title":"<code>pyproject.toml</code>","text":"<p>Python tooling configuration:</p> <pre><code>[tool.black]\nline-length = 88              # Line length limit\ntarget-version = ['py38']     # Python versions\nextend-exclude = '''          # Paths to exclude\n  /(\n    \\.git\n    | node_modules\n    | vendor\n  )/\n'''\n\n[tool.isort]\nprofile = \"black\"             # Compatible with Black\nline_length = 88\n\n[tool.mypy]\npython_version = \"3.8\"\nwarn_return_any = true\ndisallow_untyped_defs = true\n\n[tool.ruff]\nselect = [\"E\", \"F\", \"I\", ...]  # Rule sets to enable\nline-length = 88\ntarget-version = \"py38\"\n</code></pre>"},{"location":"configuration/#flake8","title":"<code>.flake8</code>","text":"<p>Flake8 configuration:</p> <pre><code>[flake8]\nmax-line-length = 88\nextend-ignore = E203, W503, E501  # Black compatibility\nexclude = \n    .git,\n    __pycache__,\n    node_modules,\n    vendor\nper-file-ignores = \n    __init__.py:F401              # Allow unused imports\n    test_*.py:F401,F811           # Test-specific ignores\n</code></pre>"},{"location":"configuration/#lintstagedrcjson","title":"<code>.lintstagedrc.json</code>","text":"<p>File-specific linting rules:</p> <pre><code>{\n  \"*.{ts,tsx,js,jsx}\": [\n    \"eslint --fix\",\n    \"prettier --write\"\n  ],\n  \"*.py\": [\n    \"black\",\n    \"flake8\"\n  ],\n  \"*.{yml,yaml}\": [\n    \"prettier --write\",\n    \"ansible-lint check (conditional)\"\n  ]\n}\n</code></pre>"},{"location":"configuration/#script-configuration","title":"Script Configuration","text":""},{"location":"configuration/#huskycat-container-configuration","title":"HuskyCat Container Configuration","text":"<p>Container-Only Execution: All validation runs in containers with complete toolchains.</p> <p>Environment variables: <pre><code># Container configuration\nHUSKYCAT_CONTAINER_RUNTIME=podman  # or docker\nHUSKYCAT_LOG_LEVEL=INFO            # DEBUG, INFO, WARNING, ERROR\nHUSKYCAT_CONFIG_DIR=~/.huskycat    # Config storage location\n\n# Validation behavior\nHUSKYCAT_AUTO_FIX=false            # Enable auto-fix by default\nHUSKYCAT_USE_CACHE=true            # Enable validation caching\n</code></pre></p> <p>Command-line options: <pre><code>--fix          # Enable auto-fix\n--all          # Validate all files\n--staged       # Validate only staged files (default)\n--verbose, -v  # Verbose output\n--mode MODE    # Override auto-detected product mode\n--json         # Force JSON output (sets pipeline mode)\n</code></pre></p>"},{"location":"configuration/#product-modes","title":"Product Modes","text":"<p>HuskyCat operates in 5 distinct product modes, each optimized for different use cases:</p>"},{"location":"configuration/#mode-overview","title":"Mode Overview","text":"Mode Output Format Interactive Auto-Fix Tools Use Case <code>git_hooks</code> Minimal No SAFE only Fast subset Pre-commit/pre-push <code>ci</code> JUnit XML No Never All Pipeline integration <code>cli</code> Human/Colored Yes SAFE+LIKELY Configured Interactive terminal <code>pipeline</code> JSON No Never All Machine-readable <code>mcp</code> JSON-RPC No Never All AI assistant integration"},{"location":"configuration/#mode-detection","title":"Mode Detection","text":"<p>HuskyCat automatically detects the appropriate mode:</p> <ol> <li>Explicit override: <code>--mode git_hooks</code> or <code>HUSKYCAT_MODE=ci</code></li> <li>MCP invocation: <code>mcp-server</code> command</li> <li>CI environment: <code>CI=true</code>, <code>GITLAB_CI</code>, <code>GITHUB_ACTIONS</code></li> <li>Git hooks: Multiple <code>GIT_*</code> environment variables</li> <li>Pipeline context: Non-interactive stdin</li> <li>Default: CLI mode (interactive terminal)</li> </ol>"},{"location":"configuration/#mode-specific-behavior","title":"Mode-Specific Behavior","text":""},{"location":"configuration/#git-hooks-mode-mode-git_hooks","title":"Git Hooks Mode (<code>--mode git_hooks</code>)","text":"<ul> <li>Output: Minimal (errors only)</li> <li>Fail-fast: Yes (stop on first error)</li> <li>Tools: Fast subset (<code>python-black</code>, <code>ruff</code>, <code>mypy</code>, <code>flake8</code>)</li> <li>Auto-fix: Only SAFE fixes (formatting)</li> </ul>"},{"location":"configuration/#ci-mode-mode-ci","title":"CI Mode (<code>--mode ci</code>)","text":"<ul> <li>Output: JUnit XML for CI artifacts</li> <li>Fail-fast: No (run all validators)</li> <li>Tools: All available</li> <li>Auto-fix: Never (read-only)</li> </ul>"},{"location":"configuration/#cli-mode-mode-cli","title":"CLI Mode (<code>--mode cli</code>)","text":"<ul> <li>Output: Human-readable with colors</li> <li>Interactive: Yes (prompts for uncertain fixes)</li> <li>Tools: Configured via <code>.huskycat.yaml</code></li> <li>Auto-fix: SAFE and LIKELY fixes</li> </ul>"},{"location":"configuration/#pipeline-mode-mode-pipeline-or-json","title":"Pipeline Mode (<code>--mode pipeline</code> or <code>--json</code>)","text":"<ul> <li>Output: JSON for toolchain integration</li> <li>Interactive: No</li> <li>Tools: All available</li> <li>Auto-fix: Never (read-only)</li> </ul>"},{"location":"configuration/#mcp-mode-mode-mcp","title":"MCP Mode (<code>--mode mcp</code>)","text":"<ul> <li>Output: JSON-RPC 2.0</li> <li>Transport: stdio (stdin/stdout)</li> <li>Tools: All available via MCP tools</li> <li>Auto-fix: Never (Claude decides)</li> </ul>"},{"location":"configuration/#auto-fix-confidence-tiers","title":"Auto-Fix Confidence Tiers","text":"<p>HuskyCat uses a three-tier confidence system for auto-fix decisions:</p> Tier Behavior Example Tools SAFE Always safe, formatting only <code>python-black</code>, <code>js-prettier</code>, <code>yamllint</code> LIKELY Usually safe, style fixes <code>autoflake</code>, <code>ruff</code>, <code>js-eslint</code> UNCERTAIN Needs human review Semantic changes <p>Mode-specific auto-fix behavior: - Git Hooks: Only apply SAFE fixes automatically - CLI: Apply SAFE and LIKELY; prompt for UNCERTAIN - CI/Pipeline/MCP: Never auto-fix (report only)</p> <p>File references: - Mode detection: <code>src/huskycat/core/mode_detector.py</code> - Adapters: <code>src/huskycat/core/adapters/*.py</code> - FixConfidence: <code>src/huskycat/core/adapters/base.py:27-51</code></p>"},{"location":"configuration/#git-hook-configuration","title":"Git Hook Configuration","text":""},{"location":"configuration/#pre-commit-hook","title":"Pre-commit Hook","text":"<p>Container-only validation runs: 1. Staged file validation 2. Auto-fix when requested 3. Complete toolchain in isolated container 4. Repository read-only mounting</p> <p>Generated by: <code>./dist/huskycat setup-hooks</code> (do not edit manually)</p> <p>Customization: <pre><code># Temporary bypass (development only)\ngit commit --no-verify -m \"message\"\n</code></pre></p>"},{"location":"configuration/#commit-msg-hook","title":"Commit-msg Hook","text":"<p>Validates commit format: <pre><code>&lt;type&gt;(&lt;scope&gt;): &lt;subject&gt;\n\nTypes: feat, fix, docs, style, refactor, perf, test, build, ci, chore, revert\n</code></pre></p> <p>Configuration: <pre><code># Skip issue check\nSKIP_ISSUE_CHECK=true git commit\n</code></pre></p>"},{"location":"configuration/#pre-push-hook","title":"Pre-push Hook","text":"<p>Runs before push: - Full linting (all files) - Affected tests - Large file detection - Security scanning</p>"},{"location":"configuration/#post-merge-hook","title":"Post-merge Hook","text":"<p>Automatic actions after merge: - Update dependencies - Run linting on changed files - Rebuild affected projects</p>"},{"location":"configuration/#gitlab-ci-configuration","title":"GitLab CI Configuration","text":""},{"location":"configuration/#basic-structure","title":"Basic Structure","text":"<pre><code>stages:\n  - validate\n  - lint\n  - test\n\nvariables:\n  PIP_CACHE_DIR: \"$CI_PROJECT_DIR/.cache/pip\"\n  npm_config_cache: \"$CI_PROJECT_DIR/.cache/npm\"\n\ncache:\n  paths:\n    - .cache/pip\n    - .cache/npm\n    - node_modules/\n    - .venv/\n</code></pre>"},{"location":"configuration/#job-templates","title":"Job Templates","text":"<p>Python linting job: <pre><code>lint:python:\n  stage: lint\n  image: python:3.11\n  before_script:\n    - pip install black flake8 mypy\n  script:\n    - black --check .\n    - flake8 .\n    - mypy .\n</code></pre></p>"},{"location":"configuration/#container-toolchain","title":"Container Toolchain","text":""},{"location":"configuration/#available-tools-in-container","title":"Available Tools in Container","text":"<p>Python Tools: - black, flake8, mypy, ruff - bandit, safety (security) - autoflake, isort (formatting)</p> <p>Shell Tools: - shellcheck, yamllint, hadolint - gitlab-ci-local (CI validation)</p> <p>JavaScript Tools: - eslint, prettier</p> <p>All tools are pre-installed in the container - no local installation needed.</p>"},{"location":"configuration/#adding-custom-validators","title":"Adding Custom Validators","text":"<p>Extend the ValidationEngine in <code>unified_validation.py</code>: <pre><code>class CustomValidator(Validator):\n    def can_handle(self, file_path: Path) -&gt; bool:\n        return file_path.suffix == '.custom'\n\n    def validate(self, file_path: Path) -&gt; ValidationResult:\n        # Container execution is automatic\n        return self._execute_command(['custom-tool', str(file_path)])\n</code></pre></p>"},{"location":"configuration/#disabling-specific-checks","title":"Disabling Specific Checks","text":"<p>Per-file basis: <pre><code># flake8: noqa\n# mypy: ignore-errors\n# pylint: disable=all\n</code></pre></p> <p>Project-wide: - Update respective config files - Modify <code>skip_list</code> or <code>ignore</code> sections</p>"},{"location":"configuration/#performance-caching","title":"Performance &amp; Caching","text":"<p>Container execution optimizations:</p> <ol> <li>Binary-first execution: Fast startup (~100ms)</li> <li>Container caching: Images cached locally</li> <li>Validation caching: Results cached in <code>~/.huskycat/cache</code></li> </ol> <pre><code># Clean caches\n./dist/huskycat clean --all\n\n# Rebuild container\nnpm run container:build\n\n# Status and performance info\n./dist/huskycat status\n</code></pre>"},{"location":"future-roadmap/","title":"HuskyCat Future Roadmap","text":""},{"location":"future-roadmap/#e2e-testing-goals-removed-from-v20","title":"E2E Testing Goals (Removed from v2.0)","text":"<p>The following E2E testing capabilities were removed from the current release as they were aspirational and not yet ready for implementation. They remain as future goals for the project.</p>"},{"location":"future-roadmap/#1-gitlab-pages-deployment-testing","title":"1. GitLab Pages Deployment Testing","text":"<p>Target: v3.0</p> <ul> <li>Goal: Automated testing of GitLab Pages deployment at https://huskycat.pages.io</li> <li>Components:</li> <li>Verify documentation site accessibility</li> <li>Test MkDocs navigation and content</li> <li>Validate download links and installation scripts</li> <li>Browser-based testing with Playwright</li> </ul>"},{"location":"future-roadmap/#2-mcp-server-integration-testing","title":"2. MCP Server Integration Testing","text":"<p>Target: v2.5</p> <ul> <li>Goal: Comprehensive E2E testing of MCP (Model Context Protocol) server</li> <li>Components:</li> <li>Stdio-based JSON-RPC protocol validation</li> <li>Multi-client connection testing</li> <li>Validation service integration tests</li> <li>Performance benchmarking under load</li> </ul>"},{"location":"future-roadmap/#3-cicd-pipeline-e2e-testing","title":"3. CI/CD Pipeline E2E Testing","text":"<p>Target: v2.5</p> <ul> <li>Goal: Full pipeline execution testing</li> <li>Components:</li> <li>GitLab CI YAML validation</li> <li>GitHub Actions workflow testing</li> <li>Cross-platform container builds</li> <li>Deployment pipeline verification</li> </ul>"},{"location":"future-roadmap/#implementation-requirements","title":"Implementation Requirements","text":"<p>Before implementing E2E tests, the following prerequisites must be met:</p> <ol> <li>Infrastructure:</li> <li>Stable GitLab Pages deployment</li> <li>Production MCP server endpoint</li> <li> <p>Test environment isolation</p> </li> <li> <p>Dependencies:</p> </li> <li>Playwright for browser automation</li> <li>pytest-playwright for test integration</li> <li>pytest-html for report generation</li> <li> <p>pytest-cov for coverage tracking</p> </li> <li> <p>Test Data:</p> </li> <li>Sample repositories for validation</li> <li>Mock MCP client implementations</li> <li>CI/CD pipeline fixtures</li> </ol>"},{"location":"future-roadmap/#removed-test-files","title":"Removed Test Files","text":"<p>The following test files were removed and should be recreated when implementing E2E tests:</p> <ul> <li><code>tests/e2e/test_pages_deployment.py</code></li> <li><code>tests/e2e/test_mcp_integration.py</code></li> <li><code>tests/e2e/test_ci_cd_pipeline.py</code></li> <li><code>tests/e2e/run_e2e_tests.py</code></li> <li><code>tests/e2e/fixtures.py</code></li> <li><code>tests/playwright.config.py</code></li> </ul>"},{"location":"future-roadmap/#gitlab-ci-jobs-removed","title":"GitLab CI Jobs Removed","text":"<p>The following CI jobs were removed from <code>.gitlab-ci.yml</code>:</p> <ul> <li><code>test:e2e:comprehensive</code></li> <li><code>test:e2e:playwright</code></li> </ul> <p>These jobs attempted to run Playwright-based browser tests but were failing due to the aspirational nature of the tests.</p>"},{"location":"future-roadmap/#notes","title":"Notes","text":"<p>E2E tests were removed in commit [pending] as they were testing functionality that doesn't yet exist (GitLab Pages at huskycat.pages.io, full MCP server deployment, etc.). They should be reintroduced once the actual services are deployed and stable.</p>"},{"location":"github-actions/","title":"GitHub Actions Integration","text":"<p>Integrate HuskyCat validation into your GitHub Actions workflows for automated code quality checks.</p>"},{"location":"github-actions/#quick-start","title":"Quick Start","text":"<p>Add this workflow to <code>.github/workflows/validate.yml</code>:</p> <pre><code>name: HuskyCat Validation\n\non:\n  push:\n    branches: [ main, develop ]\n  pull_request:\n    branches: [ main ]\n\njobs:\n  validate:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n\n      - name: Download HuskyCat\n        run: |\n          curl -L -o huskycat https://gitlab.com/tinyland/ai/huskycat/-/releases/permalink/latest/downloads/huskycat-linux-amd64\n          chmod +x huskycat\n          sudo mv huskycat /usr/local/bin/\n\n      - name: Install Podman\n        run: |\n          sudo apt-get update\n          sudo apt-get install -y podman\n\n      - name: Validate Code\n        run: huskycat validate --all\n</code></pre>"},{"location":"github-actions/#workflow-templates","title":"\ud83d\udccb Workflow Templates","text":""},{"location":"github-actions/#basic-validation","title":"Basic Validation","text":"<p>Validate all files on push and pull requests:</p> <pre><code>name: Code Validation\n\non: [push, pull_request]\n\njobs:\n  validate:\n    name: Validate Code Quality\n    runs-on: ubuntu-latest\n\n    steps:\n      - name: Checkout code\n        uses: actions/checkout@v4\n\n      - name: Setup HuskyCat\n        run: |\n          curl -L -o /usr/local/bin/huskycat \\\n            https://gitlab.com/tinyland/ai/huskycat/-/releases/permalink/latest/downloads/huskycat-linux-amd64\n          chmod +x /usr/local/bin/huskycat\n\n      - name: Install Podman\n        run: sudo apt-get update &amp;&amp; sudo apt-get install -y podman\n\n      - name: Run Validation\n        run: huskycat --mode ci validate --all\n</code></pre>"},{"location":"github-actions/#python-project-validation","title":"Python Project Validation","text":"<p>Focused validation for Python projects:</p> <pre><code>name: Python Validation\n\non:\n  push:\n    paths:\n      - '**.py'\n      - 'pyproject.toml'\n      - 'setup.py'\n      - 'requirements*.txt'\n\njobs:\n  python-validate:\n    runs-on: ubuntu-latest\n\n    steps:\n      - uses: actions/checkout@v4\n\n      - name: Setup HuskyCat\n        run: |\n          curl -L -o /usr/local/bin/huskycat \\\n            https://gitlab.com/tinyland/ai/huskycat/-/releases/permalink/latest/downloads/huskycat-linux-amd64\n          chmod +x /usr/local/bin/huskycat\n\n      - name: Install Podman\n        run: sudo apt-get install -y podman\n\n      - name: Validate Python Code\n        run: |\n          huskycat validate --all\n          # Validators used: black, flake8, mypy, ruff, bandit\n</code></pre>"},{"location":"github-actions/#multi-platform-validation","title":"Multi-Platform Validation","text":"<p>Test on multiple platforms:</p> <pre><code>name: Multi-Platform Validation\n\non: [push, pull_request]\n\njobs:\n  validate:\n    strategy:\n      matrix:\n        os: [ubuntu-latest, macos-latest]\n        include:\n          - os: ubuntu-latest\n            binary: huskycat-linux-amd64\n            container: podman\n          - os: macos-latest\n            binary: huskycat-darwin-arm64\n            container: podman\n\n    runs-on: ${{ matrix.os }}\n\n    steps:\n      - uses: actions/checkout@v4\n\n      - name: Download HuskyCat\n        run: |\n          curl -L -o huskycat \\\n            https://gitlab.com/tinyland/ai/huskycat/-/releases/permalink/latest/downloads/${{ matrix.binary }}\n          chmod +x huskycat\n          sudo mv huskycat /usr/local/bin/\n\n      - name: Install Container Runtime\n        run: |\n          if [ \"$RUNNER_OS\" == \"Linux\" ]; then\n            sudo apt-get update &amp;&amp; sudo apt-get install -y podman\n          elif [ \"$RUNNER_OS\" == \"macOS\" ]; then\n            brew install podman\n            podman machine init\n            podman machine start\n          fi\n\n      - name: Validate\n        run: huskycat validate --all\n</code></pre>"},{"location":"github-actions/#pull-request-validation-with-comments","title":"Pull Request Validation with Comments","text":"<p>Validate PR changes and comment on results:</p> <pre><code>name: PR Validation\n\non:\n  pull_request:\n    types: [opened, synchronize, reopened]\n\npermissions:\n  contents: read\n  pull-requests: write\n\njobs:\n  validate-pr:\n    runs-on: ubuntu-latest\n\n    steps:\n      - uses: actions/checkout@v4\n        with:\n          fetch-depth: 0  # Full history for better diff analysis\n\n      - name: Setup HuskyCat\n        run: |\n          curl -L -o /usr/local/bin/huskycat \\\n            https://gitlab.com/tinyland/ai/huskycat/-/releases/permalink/latest/downloads/huskycat-linux-amd64\n          chmod +x /usr/local/bin/huskycat\n\n      - name: Install Podman\n        run: sudo apt-get install -y podman\n\n      - name: Validate Changed Files\n        id: validate\n        run: |\n          huskycat --json validate --all &gt; validation-results.json\n          echo \"results&lt;&lt;EOF\" &gt;&gt; $GITHUB_OUTPUT\n          cat validation-results.json &gt;&gt; $GITHUB_OUTPUT\n          echo \"EOF\" &gt;&gt; $GITHUB_OUTPUT\n        continue-on-error: true\n\n      - name: Comment PR\n        uses: actions/github-script@v7\n        if: always()\n        with:\n          script: |\n            const results = ${{ steps.validate.outputs.results }};\n            const comment = `## HuskyCat Validation Results\n\n            ${results.success ? '\u2705 All validations passed!' : '\u274c Validation failures found'}\n\n            **Files validated:** ${results.summary.total_files}\n            **Errors:** ${results.summary.total_errors}\n            **Warnings:** ${results.summary.total_warnings}\n            `;\n\n            github.rest.issues.createComment({\n              issue_number: context.issue.number,\n              owner: context.repo.owner,\n              repo: context.repo.repo,\n              body: comment\n            });\n</code></pre>"},{"location":"github-actions/#scheduled-validation","title":"Scheduled Validation","text":"<p>Run periodic validation checks:</p> <pre><code>name: Scheduled Validation\n\non:\n  schedule:\n    - cron: '0 0 * * 0'  # Weekly on Sunday at midnight\n  workflow_dispatch:  # Manual trigger\n\njobs:\n  scheduled-validate:\n    runs-on: ubuntu-latest\n\n    steps:\n      - uses: actions/checkout@v4\n\n      - name: Setup HuskyCat\n        run: |\n          curl -L -o /usr/local/bin/huskycat \\\n            https://gitlab.com/tinyland/ai/huskycat/-/releases/permalink/latest/downloads/huskycat-linux-amd64\n          chmod +x /usr/local/bin/huskycat\n\n      - name: Install Podman\n        run: sudo apt-get install -y podman\n\n      - name: Full Repository Validation\n        run: huskycat validate --all --verbose\n\n      - name: Upload Results\n        uses: actions/upload-artifact@v4\n        if: always()\n        with:\n          name: validation-results\n          path: |\n            .huskycat/cache/\n            validation-results.json\n</code></pre>"},{"location":"github-actions/#configuration","title":"\ud83d\udd27 Configuration","text":""},{"location":"github-actions/#environment-variables","title":"Environment Variables","text":"<p>Set these in workflow or repository secrets:</p> <pre><code>env:\n  HUSKYCAT_MODE: ci\n  HUSKYCAT_LOG_LEVEL: INFO\n</code></pre>"},{"location":"github-actions/#secrets-configuration","title":"Secrets Configuration","text":"<p>For private registries or custom setups:</p> <pre><code>env:\n  CONTAINER_REGISTRY_TOKEN: ${{ secrets.CONTAINER_REGISTRY_TOKEN }}\n</code></pre>"},{"location":"github-actions/#status-checks","title":"\ud83d\udcca Status Checks","text":""},{"location":"github-actions/#required-status-checks","title":"Required Status Checks","text":"<p>Add HuskyCat as a required status check:</p> <ol> <li>Go to Settings \u2192 Branches \u2192 Branch protection rules</li> <li>Select your branch (e.g., <code>main</code>)</li> <li>Enable Require status checks to pass before merging</li> <li>Search for and select HuskyCat Validation</li> </ol>"},{"location":"github-actions/#status-badge","title":"Status Badge","text":"<p>Add a badge to your README:</p> <pre><code>[![HuskyCat Validation](https://github.com/your-org/your-repo/workflows/HuskyCat%20Validation/badge.svg)](https://github.com/your-org/your-repo/actions)\n</code></pre>"},{"location":"github-actions/#advanced-usage","title":"\ud83d\ude80 Advanced Usage","text":""},{"location":"github-actions/#matrix-strategy-for-multiple-validators","title":"Matrix Strategy for Multiple Validators","text":"<p>Run specific validators in parallel:</p> <pre><code>jobs:\n  validate:\n    strategy:\n      matrix:\n        validator: [python-black, mypy, flake8, ruff]\n\n    runs-on: ubuntu-latest\n\n    steps:\n      - uses: actions/checkout@v4\n      - name: Setup HuskyCat\n        run: # ... (setup steps)\n\n      - name: Run ${{ matrix.validator }}\n        run: huskycat validate --validator ${{ matrix.validator }} --all\n</code></pre>"},{"location":"github-actions/#caching","title":"Caching","text":"<p>Speed up workflows with caching:</p> <pre><code>- name: Cache HuskyCat Binary\n  uses: actions/cache@v4\n  with:\n    path: /usr/local/bin/huskycat\n    key: huskycat-${{ runner.os }}-${{ hashFiles('**/huskycat-version.txt') }}\n\n- name: Cache Validation Schemas\n  uses: actions/cache@v4\n  with:\n    path: .huskycat/schemas/\n    key: huskycat-schemas-${{ hashFiles('.huskycat/schemas/**') }}\n</code></pre>"},{"location":"github-actions/#auto-fix-and-commit","title":"Auto-Fix and Commit","text":"<p>Automatically fix issues and commit changes:</p> <pre><code>- name: Validate and Auto-Fix\n  run: huskycat validate --all --fix\n\n- name: Commit Fixes\n  uses: stefanzweifel/git-auto-commit-action@v5\n  with:\n    commit_message: \"fix: auto-fix validation issues [skip ci]\"\n    file_pattern: \"*.py *.js *.ts *.yaml\"\n</code></pre> <p>\u26a0\ufe0f Warning: Only use auto-commit on trusted branches or in draft PRs to avoid security risks.</p>"},{"location":"github-actions/#container-based-workflow","title":"\ud83d\udc33 Container-Based Workflow","text":"<p>Use HuskyCat's validation container directly:</p> <pre><code>jobs:\n  validate:\n    runs-on: ubuntu-latest\n    container:\n      image: registry.gitlab.com/tinyland/ai/huskycat/validator:latest\n\n    steps:\n      - uses: actions/checkout@v4\n\n      - name: Validate\n        run: huskycat validate --all\n</code></pre>"},{"location":"github-actions/#integration-with-other-actions","title":"\ud83d\udd17 Integration with Other Actions","text":""},{"location":"github-actions/#combine-with-code-coverage","title":"Combine with Code Coverage","text":"<pre><code>- name: Run Tests with Coverage\n  run: pytest --cov --cov-report=xml\n\n- name: Validate Code Quality\n  run: huskycat validate --all\n\n- name: Upload Coverage\n  uses: codecov/codecov-action@v4\n</code></pre>"},{"location":"github-actions/#combine-with-security-scanning","title":"Combine with Security Scanning","text":"<pre><code>- name: HuskyCat Validation\n  run: huskycat validate --all\n\n- name: Run Trivy Security Scan\n  uses: aquasecurity/trivy-action@master\n  with:\n    scan-type: 'fs'\n</code></pre>"},{"location":"github-actions/#performance-tips","title":"\ud83d\udcc8 Performance Tips","text":"<ol> <li>Cache Binaries - Use actions/cache to avoid re-downloading</li> <li>Parallel Jobs - Use matrix strategy for independent validations</li> <li>Conditional Execution - Use <code>paths</code> filter to run only when needed</li> <li>Container Runtime - Podman is faster than Docker in most cases</li> </ol>"},{"location":"github-actions/#troubleshooting","title":"\u274c Troubleshooting","text":""},{"location":"github-actions/#binary-download-fails","title":"Binary Download Fails","text":"<pre><code>- name: Download HuskyCat with Retry\n  uses: nick-fields/retry@v2\n  with:\n    timeout_minutes: 5\n    max_attempts: 3\n    command: |\n      curl -L -o /usr/local/bin/huskycat \\\n        https://gitlab.com/tinyland/ai/huskycat/-/releases/permalink/latest/downloads/huskycat-linux-amd64\n      chmod +x /usr/local/bin/huskycat\n</code></pre>"},{"location":"github-actions/#podman-installation-issues","title":"Podman Installation Issues","text":"<pre><code>- name: Install Podman (Fallback to Docker)\n  run: |\n    if ! command -v podman &amp;&gt; /dev/null; then\n      if ! command -v docker &amp;&gt; /dev/null; then\n        sudo apt-get update\n        sudo apt-get install -y podman\n      fi\n    fi\n</code></pre>"},{"location":"github-actions/#permission-issues-on-macos","title":"Permission Issues on macOS","text":"<pre><code>- name: Allow Binary Execution (macOS)\n  if: runner.os == 'macOS'\n  run: |\n    xattr -d com.apple.quarantine /usr/local/bin/huskycat || true\n</code></pre>"},{"location":"github-actions/#security-considerations","title":"\ud83d\udd10 Security Considerations","text":"<ol> <li>Pin Binary Versions - Use specific tags instead of <code>latest</code></li> <li>Verify Checksums - Download and verify SHA256 checksums</li> <li>Limit Permissions - Use minimal required workflow permissions</li> <li>Review Auto-Commits - Don't auto-commit on public PRs</li> </ol> <p>Example with version pinning:</p> <pre><code>- name: Download HuskyCat (Pinned Version)\n  run: |\n    VERSION=\"v2.0.0\"\n    curl -L -o /usr/local/bin/huskycat \\\n      \"https://gitlab.com/tinyland/ai/huskycat/-/jobs/artifacts/${VERSION}/raw/dist/bin/huskycat-linux-amd64?job=binary:build:linux\"\n    chmod +x /usr/local/bin/huskycat\n</code></pre>"},{"location":"github-actions/#examples","title":"\ud83d\udcda Examples","text":"<p>Complete workflow examples are available in the HuskyCat repository.</p> <p>For GitLab CI integration, see GitLab CI/CD Guide.</p> <p>For CLI usage, see CLI Reference.</p> <p>For binary downloads, see Binary Downloads.</p>"},{"location":"gitlab-auto-devops-complete/","title":"Complete GitLab Auto DevOps Integration Guide for HuskyCats","text":"<p>This comprehensive guide covers integrating HuskyCats Bates with GitLab Auto DevOps for complete CI/CD validation, linting, security scanning, and automated deployments.</p>"},{"location":"gitlab-auto-devops-complete/#quick-start","title":"\ud83d\ude80 Quick Start","text":""},{"location":"gitlab-auto-devops-complete/#option-1-use-huskycats-container-recommended","title":"Option 1: Use HuskyCats Container (Recommended)","text":"<pre><code># .gitlab-ci.yml\nimage: registry.gitlab.com/tinyland/ai/huskycat/validator:latest\n\nvariables:\n  # Auto DevOps configuration\n  CI_APPLICATION_REPOSITORY: $CI_REGISTRY_IMAGE\n  CI_APPLICATION_TAG: $CI_COMMIT_SHA\n\n  # Disable unnecessary Auto DevOps features\n  TEST_DISABLED: 1\n  CODE_QUALITY_DISABLED: 1  # We use HuskyCats instead\n  CONTAINER_SCANNING_DISABLED: 1  # We use HuskyCats security scanning\n\n  # HuskyCats settings\n  LINT_AUTO_FIX: \"false\"\n  VERBOSE: \"true\"\n\ninclude:\n  - template: Auto-DevOps.gitlab-ci.yml\n\nstages:\n  - validate\n  - build\n  - test\n  - review\n  - deploy\n\n# Override Auto DevOps test with HuskyCats validation\ntest:\n  stage: test\n  script:\n    - echo \"\ud83d\udc31 Running HuskyCats comprehensive validation...\"\n    - /workspace/scripts/comprehensive-lint.sh\n    - /workspace/scripts/auto-devops-validation.sh\n    - /workspace/scripts/validate-gitlab-ci-schema.py\n  artifacts:\n    paths:\n      - lint-results.txt\n      - validation-report.json\n    reports:\n      junit: test-results.xml\n    expire_in: 1 week\n  coverage: '/TOTAL.*\\s+(\\d+%)$/'\n</code></pre>"},{"location":"gitlab-auto-devops-complete/#option-2-include-huskycats-template","title":"Option 2: Include HuskyCats Template","text":"<pre><code># .gitlab-ci.yml\ninclude:\n  - template: Auto-DevOps.gitlab-ci.yml\n  - remote: 'https://gitlab.com/bates-ils/projects/trustees-portal/sid-controller/huskycats-bates/-/raw/main/.gitlab/ci/husky-validation.yml'\n\nvariables:\n  CI_APPLICATION_REPOSITORY: $CI_REGISTRY_IMAGE\n  CI_APPLICATION_TAG: $CI_COMMIT_SHA\n  TEST_DISABLED: 1  # Use HuskyCats instead\n\n# Add HuskyCats validation before Auto DevOps stages\nhusky:validate:\n  stage: .pre\n  extends: .husky-comprehensive\n</code></pre>"},{"location":"gitlab-auto-devops-complete/#auto-devops-integration-patterns","title":"\ud83c\udfd7\ufe0f Auto DevOps Integration Patterns","text":""},{"location":"gitlab-auto-devops-complete/#pattern-1-full-auto-devops-with-huskycats-validation","title":"Pattern 1: Full Auto DevOps with HuskyCats Validation","text":"<p>Complete Auto DevOps pipeline with comprehensive HuskyCats validation:</p> <pre><code># Auto DevOps with HuskyCats validation\nvariables:\n  # Auto DevOps core settings\n  CI_APPLICATION_REPOSITORY: $CI_REGISTRY_IMAGE\n  CI_APPLICATION_TAG: $CI_COMMIT_SHA\n  KUBE_NAMESPACE: $CI_PROJECT_NAME-production\n\n  # Helm deployment settings\n  HELM_UPGRADE_EXTRA_ARGS: \"--timeout=600s --wait\"\n  POSTGRES_ENABLED: false\n\n  # Disable Auto DevOps features replaced by HuskyCats\n  TEST_DISABLED: 1\n  CODE_QUALITY_DISABLED: 1\n  CONTAINER_SCANNING_DISABLED: 1\n  DEPENDENCY_SCANNING_DISABLED: 1\n\n  # HuskyCats configuration\n  AUTO_DEVOPS_VALIDATION: \"true\"\n  GITLAB_CI_VALIDATION: \"true\"\n  COMPREHENSIVE_LINT: \"true\"\n\ninclude:\n  - template: Auto-DevOps.gitlab-ci.yml\n\n# Override Auto DevOps test stage with HuskyCats\ntest:\n  stage: test\n  image: registry.gitlab.com/tinyland/ai/huskycat/validator:latest\n  script:\n    - echo \"\ud83d\udc31 HuskyCats Auto DevOps Validation Suite\"\n\n    # 1. Validate GitLab CI configuration\n    - echo \"\ud83d\udd0d Step 1: GitLab CI Schema Validation\"\n    - python3 /workspace/scripts/validate-gitlab-ci-schema.py\n\n    # 2. Validate Auto DevOps configuration\n    - echo \"\ud83d\udd0d Step 2: Auto DevOps Configuration Validation\"\n    - /workspace/scripts/auto-devops-validation.sh --verbose\n\n    # 3. Comprehensive code linting\n    - echo \"\ud83d\udd0d Step 3: Comprehensive Code Quality\"\n    - /workspace/scripts/comprehensive-lint.sh --all\n\n    # 4. Security scanning\n    - echo \"\ud83d\udd0d Step 4: Security Validation\"\n    - /workspace/scripts/security-scan.sh\n\n    # 5. Generate validation report\n    - echo \"\ud83d\udcca Generating validation report...\"\n    - |\n      cat &gt; validation-summary.json &lt;&lt; EOF\n      {\n        \"validation_timestamp\": \"$(date -Iseconds)\",\n        \"project\": \"$CI_PROJECT_NAME\",\n        \"commit\": \"$CI_COMMIT_SHA\",\n        \"branch\": \"$CI_COMMIT_REF_NAME\",\n        \"auto_devops_enabled\": true,\n        \"huskycats_version\": \"$(cat /workspace/VERSION 2&gt;/dev/null || echo 'latest')\",\n        \"validations_passed\": [\n          \"gitlab_ci_schema\",\n          \"auto_devops_config\",\n          \"code_quality\",\n          \"security_scan\"\n        ]\n      }\n      EOF\n\n  artifacts:\n    paths:\n      - lint-results.txt\n      - validation-summary.json\n      - auto-devops-validation.log\n    reports:\n      junit: test-results.xml\n      coverage_report:\n        coverage_format: cobertura\n        path: coverage.xml\n    expire_in: 1 week\n\n  # Run on all branches and MRs\n  rules:\n    - if: '$CI_MERGE_REQUEST_ID'\n    - if: '$CI_COMMIT_BRANCH'\n</code></pre>"},{"location":"gitlab-auto-devops-complete/#pattern-2-staged-validation-pipeline","title":"Pattern 2: Staged Validation Pipeline","text":"<p>Multi-stage validation with different levels:</p> <pre><code># Staged validation approach\nvariables:\n  CI_APPLICATION_REPOSITORY: $CI_REGISTRY_IMAGE\n  CI_APPLICATION_TAG: $CI_COMMIT_SHA\n\ninclude:\n  - template: Auto-DevOps.gitlab-ci.yml\n\nstages:\n  - quick-check\n  - comprehensive-validate\n  - build\n  - test\n  - review\n  - deploy\n\n# Quick validation for fast feedback\nquick-validate:\n  stage: quick-check\n  image: registry.gitlab.com/tinyland/ai/huskycat/validator:latest\n  script:\n    - echo \"\u26a1 Quick HuskyCats validation for fast feedback\"\n    - python3 /workspace/scripts/validate-gitlab-ci-schema.py\n    - /workspace/scripts/comprehensive-lint.sh --staged\n  rules:\n    - if: '$CI_MERGE_REQUEST_ID'\n      changes:\n        - \"**/*.py\"\n        - \"**/*.js\"\n        - \"**/*.ts\"\n        - \"**/*.yml\"\n        - \"**/*.yaml\"\n        - \".gitlab-ci.yml\"\n  allow_failure: false\n\n# Comprehensive validation for main branches\ncomprehensive-validate:\n  stage: comprehensive-validate\n  image: registry.gitlab.com/tinyland/ai/huskycat/validator:latest\n  script:\n    - echo \"\ud83d\udd0d Comprehensive HuskyCats validation suite\"\n    - /workspace/scripts/comprehensive-lint.sh --all\n    - /workspace/scripts/auto-devops-validation.sh --verbose\n  artifacts:\n    paths:\n      - lint-results.txt\n      - auto-devops-validation.log\n    expire_in: 1 week\n  rules:\n    - if: '$CI_COMMIT_BRANCH == \"main\" || $CI_COMMIT_BRANCH == \"develop\"'\n    - if: '$CI_MERGE_REQUEST_ID'\n      when: manual\n      allow_failure: true\n\n# Override Auto DevOps test to reference our validation\ntest:\n  stage: test\n  dependencies:\n    - comprehensive-validate\n  script:\n    - echo \"\u2705 HuskyCats validation completed successfully\"\n    - echo \"Proceeding with Auto DevOps deployment...\"\n</code></pre>"},{"location":"gitlab-auto-devops-complete/#pattern-3-environment-specific-validation","title":"Pattern 3: Environment-Specific Validation","text":"<p>Different validation levels for different environments:</p> <pre><code># Environment-specific validation\nvariables:\n  CI_APPLICATION_REPOSITORY: $CI_REGISTRY_IMAGE\n  CI_APPLICATION_TAG: $CI_COMMIT_SHA\n\ninclude:\n  - template: Auto-DevOps.gitlab-ci.yml\n\n# Development environment - basic validation\nvalidate:development:\n  stage: test\n  image: registry.gitlab.com/tinyland/ai/huskycat/validator:latest\n  script:\n    - /workspace/scripts/comprehensive-lint.sh --basic\n  environment:\n    name: development\n  rules:\n    - if: '$CI_COMMIT_BRANCH == \"develop\"'\n\n# Staging environment - comprehensive validation\nvalidate:staging:\n  stage: test\n  image: registry.gitlab.com/tinyland/ai/huskycat/validator:latest\n  script:\n    - /workspace/scripts/comprehensive-lint.sh --all\n    - /workspace/scripts/auto-devops-validation.sh\n  environment:\n    name: staging\n  rules:\n    - if: '$CI_COMMIT_BRANCH == \"release/*\"'\n\n# Production environment - full validation + security audit\nvalidate:production:\n  stage: test\n  image: registry.gitlab.com/tinyland/ai/huskycat/validator:latest\n  script:\n    - /workspace/scripts/comprehensive-lint.sh --all --strict\n    - /workspace/scripts/auto-devops-validation.sh --strict\n    - /workspace/scripts/security-audit.sh\n  environment:\n    name: production\n  rules:\n    - if: '$CI_COMMIT_BRANCH == \"main\"'\n  when: manual\n  allow_failure: false\n</code></pre>"},{"location":"gitlab-auto-devops-complete/#auto-devops-configuration-files","title":"\ud83d\udd27 Auto DevOps Configuration Files","text":""},{"location":"gitlab-auto-devops-complete/#helm-values-configuration","title":"Helm Values Configuration","text":"<p>Create environment-specific Helm values files:</p> <pre><code># values.yaml (base configuration)\nreplicaCount: 1\n\nimage:\n  repository: placeholder  # Will be overridden by Auto DevOps\n  tag: placeholder         # Will be overridden by Auto DevOps\n  pullPolicy: IfNotPresent\n\nservice:\n  enabled: true\n  type: ClusterIP\n  port: 8080\n\ningress:\n  enabled: true\n  annotations:\n    kubernetes.io/ingress.class: \"nginx\"\n    cert-manager.io/cluster-issuer: \"letsencrypt-prod\"\n  hosts:\n    - host: myapp.example.com\n      paths:\n        - path: /\n          pathType: Prefix\n\nresources:\n  limits:\n    cpu: 200m\n    memory: 256Mi\n  requests:\n    cpu: 100m\n    memory: 128Mi\n\n# Health checks\nlivenessProbe:\n  httpGet:\n    path: /health\n    port: 8080\n  initialDelaySeconds: 30\n  periodSeconds: 10\n\nreadinessProbe:\n  httpGet:\n    path: /ready\n    port: 8080\n  initialDelaySeconds: 5\n  periodSeconds: 5\n\n# PostgreSQL (if needed)\npostgresql:\n  enabled: false\n\n# Redis (if needed)\nredis:\n  enabled: false\n</code></pre> <pre><code># values-production.yaml (production overrides)\nreplicaCount: 3\n\ningress:\n  hosts:\n    - host: myapp.production.com\n      paths:\n        - path: /\n          pathType: Prefix\n\nresources:\n  limits:\n    cpu: 500m\n    memory: 512Mi\n  requests:\n    cpu: 250m\n    memory: 256Mi\n\npostgresql:\n  enabled: true\n  auth:\n    database: myapp_prod\n    username: myapp_user\n  primary:\n    persistence:\n      enabled: true\n      size: 10Gi\n</code></pre> <pre><code># values-staging.yaml (staging overrides)  \nreplicaCount: 2\n\ningress:\n  hosts:\n    - host: myapp.staging.com\n      paths:\n        - path: /\n          pathType: Prefix\n\nresources:\n  limits:\n    cpu: 300m\n    memory: 384Mi\n  requests:\n    cpu: 150m\n    memory: 192Mi\n</code></pre>"},{"location":"gitlab-auto-devops-complete/#kubernetes-manifests","title":"Kubernetes Manifests","text":"<p>Additional Kubernetes resources in <code>k8s/</code> directory:</p> <pre><code># k8s/configmap.yaml\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: myapp-config\n  labels:\n    app: myapp\ndata:\n  config.yaml: |\n    app:\n      name: myapp\n      environment: production\n      debug: false\n    database:\n      pool_size: 10\n      timeout: 30\n</code></pre> <pre><code># k8s/secret.yaml\napiVersion: v1\nkind: Secret\nmetadata:\n  name: myapp-secrets\n  labels:\n    app: myapp\ntype: Opaque\nstringData:\n  database-password: \"REPLACE_IN_PRODUCTION\"\n  api-key: \"REPLACE_IN_PRODUCTION\"\n</code></pre> <pre><code># k8s/networkpolicy.yaml\napiVersion: networking.k8s.io/v1\nkind: NetworkPolicy\nmetadata:\n  name: myapp-network-policy\nspec:\n  podSelector:\n    matchLabels:\n      app: myapp\n  policyTypes:\n  - Ingress\n  - Egress\n  ingress:\n  - from:\n    - podSelector:\n        matchLabels:\n          app: nginx-ingress\n    ports:\n    - protocol: TCP\n      port: 8080\n  egress:\n  - to:\n    - podSelector:\n        matchLabels:\n          app: postgresql\n    ports:\n    - protocol: TCP\n      port: 5432\n</code></pre>"},{"location":"gitlab-auto-devops-complete/#huskycats-validation-features","title":"\ud83d\udcca HuskyCats Validation Features","text":""},{"location":"gitlab-auto-devops-complete/#gitlab-ci-schema-validation","title":"GitLab CI Schema Validation","text":"<p>HuskyCats includes official GitLab CI schema validation:</p> <pre><code># Validate .gitlab-ci.yml against official GitLab schema\npython3 /workspace/scripts/validate-gitlab-ci-schema.py\n\n# Output example:\n# \u2705 .gitlab-ci.yml is valid according to GitLab CI schema\n# \u2139\ufe0f  Using cached GitLab CI schema\n# \u2139\ufe0f  Found 1 GitLab CI file(s)\n</code></pre>"},{"location":"gitlab-auto-devops-complete/#auto-devops-configuration-validation","title":"Auto DevOps Configuration Validation","text":"<p>Comprehensive validation of Auto DevOps setup:</p> <pre><code># Validate Auto DevOps configuration\n/workspace/scripts/auto-devops-validation.sh --verbose\n\n# Checks performed:\n# - GitLab CI Auto DevOps template inclusion\n# - Required environment variables\n# - Helm values file syntax\n# - Kubernetes manifest validation\n# - Auto Deploy Image chart simulation\n</code></pre>"},{"location":"gitlab-auto-devops-complete/#code-quality-validation","title":"Code Quality Validation","text":"<p>Multi-language linting and quality checks:</p> <pre><code># Run comprehensive linting\n/workspace/scripts/comprehensive-lint.sh --all\n\n# Includes:\n# - Python (Black, Flake8, MyPy, Pylint, Bandit)\n# - JavaScript/TypeScript (ESLint, Prettier)\n# - Shell scripts (ShellCheck)\n# - Docker files (Hadolint)\n# - YAML files (yamllint)\n# - Ansible playbooks (ansible-lint)\n</code></pre>"},{"location":"gitlab-auto-devops-complete/#security-scanning","title":"Security Scanning","text":"<p>Built-in security validation:</p> <pre><code># Security scanning\n/workspace/scripts/security-scan.sh\n\n# Includes:\n# - Python dependency security (Safety, Bandit)\n# - JavaScript dependency audit (npm audit)\n# - Secret detection\n# - Container security scanning\n</code></pre>"},{"location":"gitlab-auto-devops-complete/#troubleshooting-guide","title":"\ud83d\udea8 Troubleshooting Guide","text":""},{"location":"gitlab-auto-devops-complete/#common-auto-devops-issues","title":"Common Auto DevOps Issues","text":""},{"location":"gitlab-auto-devops-complete/#1-application-not-accessible-after-deployment","title":"1. \"Application not accessible after deployment\"","text":"<pre><code># Check service and ingress configuration\n# values.yaml\nservice:\n  enabled: true\n  type: ClusterIP\n  port: 8080        # Make sure this matches your app port\n\ningress:\n  enabled: true\n  annotations:\n    kubernetes.io/ingress.class: \"nginx\"  # Verify ingress class\n  hosts:\n    - host: myapp.example.com  # Ensure DNS is configured\n      paths:\n        - path: /\n          pathType: Prefix\n</code></pre>"},{"location":"gitlab-auto-devops-complete/#2-helm-deployment-failed","title":"2. \"Helm deployment failed\"","text":"<pre><code># Debug Helm template generation\nhelm template my-app ~/.cache/huskycats/auto-deploy-image/assets/auto-deploy-app \\\n  -f values.yaml \\\n  --set application.repository=$CI_APPLICATION_REPOSITORY \\\n  --set application.tag=$CI_APPLICATION_TAG \\\n  --debug\n</code></pre>"},{"location":"gitlab-auto-devops-complete/#3-container-fails-to-start","title":"3. \"Container fails to start\"","text":"<pre><code># Add proper health checks and resource limits\n# values.yaml\nlivenessProbe:\n  httpGet:\n    path: /health\n    port: 8080\n  initialDelaySeconds: 60  # Increase if app takes time to start\n  periodSeconds: 10\n\nreadinessProbe:\n  httpGet:\n    path: /ready\n    port: 8080\n  initialDelaySeconds: 10\n  periodSeconds: 5\n\nresources:\n  limits:\n    memory: 512Mi      # Ensure adequate memory\n    cpu: 500m\n  requests:\n    memory: 256Mi\n    cpu: 250m\n</code></pre>"},{"location":"gitlab-auto-devops-complete/#huskycats-validation-issues","title":"HuskyCats Validation Issues","text":""},{"location":"gitlab-auto-devops-complete/#1-gitlab-ci-schema-validation-failed","title":"1. \"GitLab CI schema validation failed\"","text":"<pre><code># Check for common YAML syntax errors\npython3 /workspace/scripts/validate-gitlab-ci-schema.py\n\n# Common fixes:\n# - Ensure proper YAML indentation\n# - Use arrays for scripts, not objects\n# - Check for typos in keywords\n</code></pre>"},{"location":"gitlab-auto-devops-complete/#2-auto-devops-validation-failed","title":"2. \"Auto DevOps validation failed\"","text":"<pre><code># Run validation with verbose output\n/workspace/scripts/auto-devops-validation.sh --verbose\n\n# Check:\n# - CI_APPLICATION_REPOSITORY is set\n# - CI_APPLICATION_TAG is set\n# - Helm values files have valid YAML syntax\n# - Required environment variables are configured\n</code></pre>"},{"location":"gitlab-auto-devops-complete/#3-permission-denied-in-ci","title":"3. \"Permission denied in CI\"","text":"<pre><code># Add proper permissions in before_script\nbefore_script:\n  - chmod +x /workspace/scripts/*.sh\n  - chown -R root:root /workspace\n</code></pre>"},{"location":"gitlab-auto-devops-complete/#performance-optimization","title":"\ud83d\udcc8 Performance Optimization","text":""},{"location":"gitlab-auto-devops-complete/#ci-pipeline-optimization","title":"CI Pipeline Optimization","text":"<pre><code># Optimize pipeline performance\nvariables:\n  # Use shallow clones for faster checkout\n  GIT_DEPTH: 10\n\n  # Enable parallel job execution\n  PARALLEL_JOBS: 4\n\n  # Use caching effectively\n  PIP_CACHE_DIR: \"$CI_PROJECT_DIR/.cache/pip\"\n  npm_config_cache: \"$CI_PROJECT_DIR/.cache/npm\"\n\ncache:\n  key:\n    files:\n      - requirements.txt\n      - package-lock.json\n  paths:\n    - .cache/pip\n    - .cache/npm\n    - node_modules/\n  policy: pull-push\n\n# Use specific stages for better parallelization\nstages:\n  - pre-validate    # Quick checks\n  - validate        # Comprehensive validation  \n  - build          # Auto DevOps build\n  - test           # Auto DevOps test\n  - review         # Auto DevOps review\n  - deploy         # Auto DevOps deploy\n</code></pre>"},{"location":"gitlab-auto-devops-complete/#container-optimization","title":"Container Optimization","text":"<pre><code># Optimized Dockerfile for Auto DevOps\nFROM node:18-alpine AS builder\nWORKDIR /app\nCOPY package*.json ./\nRUN npm ci --only=production &amp;&amp; npm cache clean --force\n\nFROM node:18-alpine AS runtime\nRUN addgroup -g 1001 -S nodejs &amp;&amp; adduser -S app -u 1001\nWORKDIR /app\nCOPY --from=builder --chown=app:nodejs /app/node_modules ./node_modules\nCOPY --chown=app:nodejs . .\nUSER app\nEXPOSE 8080\nHEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \\\n  CMD curl -f http://localhost:8080/health || exit 1\nCMD [\"npm\", \"start\"]\n</code></pre>"},{"location":"gitlab-auto-devops-complete/#advanced-use-cases","title":"\ud83d\udcda Advanced Use Cases","text":""},{"location":"gitlab-auto-devops-complete/#multi-service-application","title":"Multi-Service Application","text":"<pre><code># .gitlab-ci.yml for microservices\nvariables:\n  CI_APPLICATION_REPOSITORY: $CI_REGISTRY_IMAGE\n  CI_APPLICATION_TAG: $CI_COMMIT_SHA\n\ninclude:\n  - template: Auto-DevOps.gitlab-ci.yml\n\n# Validate each service\nvalidate:service-a:\n  stage: test\n  image: registry.gitlab.com/tinyland/ai/huskycat/validator:latest\n  script:\n    - cd services/service-a\n    - /workspace/scripts/comprehensive-lint.sh\n    - /workspace/scripts/auto-devops-validation.sh\n  rules:\n    - changes:\n        - \"services/service-a/**/*\"\n\nvalidate:service-b:\n  stage: test\n  image: registry.gitlab.com/tinyland/ai/huskycat/validator:latest\n  script:\n    - cd services/service-b\n    - /workspace/scripts/comprehensive-lint.sh\n    - /workspace/scripts/auto-devops-validation.sh\n  rules:\n    - changes:\n        - \"services/service-b/**/*\"\n\n# Deploy services independently\ndeploy:service-a:\n  extends: .auto-deploy\n  variables:\n    CI_APPLICATION_REPOSITORY: $CI_REGISTRY_IMAGE/service-a\n    KUBE_NAMESPACE: $CI_PROJECT_NAME-service-a\n  rules:\n    - changes:\n        - \"services/service-a/**/*\"\n\ndeploy:service-b:\n  extends: .auto-deploy\n  variables:\n    CI_APPLICATION_REPOSITORY: $CI_REGISTRY_IMAGE/service-b\n    KUBE_NAMESPACE: $CI_PROJECT_NAME-service-b\n  rules:\n    - changes:\n        - \"services/service-b/**/*\"\n</code></pre>"},{"location":"gitlab-auto-devops-complete/#blue-green-deployment","title":"Blue-Green Deployment","text":"<pre><code># Blue-green deployment with HuskyCats validation\nvariables:\n  CI_APPLICATION_REPOSITORY: $CI_REGISTRY_IMAGE\n  CI_APPLICATION_TAG: $CI_COMMIT_SHA\n  AUTO_DEVOPS_DEPLOY_DEBUG: 1\n\ninclude:\n  - template: Auto-DevOps.gitlab-ci.yml\n\n# Comprehensive validation before blue-green deploy\nvalidate:production:\n  stage: test\n  image: registry.gitlab.com/tinyland/ai/huskycat/validator:latest\n  script:\n    - echo \"\ud83d\udd0d Production validation suite\"\n    - /workspace/scripts/comprehensive-lint.sh --all --strict\n    - /workspace/scripts/auto-devops-validation.sh --strict\n    - /workspace/scripts/security-audit.sh --production\n  rules:\n    - if: '$CI_COMMIT_BRANCH == \"main\"'\n  allow_failure: false\n\n# Blue deployment (current production)\ndeploy:blue:\n  extends: .auto-deploy\n  stage: production\n  environment:\n    name: production-blue\n    url: http://blue.myapp.example.com\n  variables:\n    KUBE_NAMESPACE: $CI_PROJECT_NAME-blue\n  rules:\n    - if: '$CI_COMMIT_BRANCH == \"main\"'\n  when: manual\n\n# Green deployment (new version)  \ndeploy:green:\n  extends: .auto-deploy\n  stage: production  \n  environment:\n    name: production-green\n    url: http://green.myapp.example.com\n  variables:\n    KUBE_NAMESPACE: $CI_PROJECT_NAME-green\n  rules:\n    - if: '$CI_COMMIT_BRANCH == \"main\"'\n  when: manual\n\n# Switch traffic to green\nswitch:traffic:\n  stage: production\n  image: kubectl:latest\n  script:\n    - echo \"Switching traffic from blue to green\"\n    - kubectl patch service myapp-service -p '{\"spec\":{\"selector\":{\"version\":\"green\"}}}'\n  environment:\n    name: production\n    url: http://myapp.example.com\n  rules:\n    - if: '$CI_COMMIT_BRANCH == \"main\"'\n  when: manual\n  needs:\n    - deploy:green\n</code></pre>"},{"location":"gitlab-auto-devops-complete/#integration-templates","title":"\ud83d\udd17 Integration Templates","text":""},{"location":"gitlab-auto-devops-complete/#template-library","title":"Template Library","text":"<p>Create reusable templates in <code>.gitlab/ci/</code> directory:</p> <pre><code># .gitlab/ci/huskycats-validation.yml\n.husky-base:\n  image: registry.gitlab.com/tinyland/ai/huskycat/validator:latest\n  before_script:\n    - chmod +x /workspace/scripts/*.sh\n\n.husky-quick:\n  extends: .husky-base\n  script:\n    - /workspace/scripts/comprehensive-lint.sh --staged\n\n.husky-comprehensive:\n  extends: .husky-base\n  script:\n    - /workspace/scripts/comprehensive-lint.sh --all\n    - /workspace/scripts/auto-devops-validation.sh\n    - python3 /workspace/scripts/validate-gitlab-ci-schema.py\n  artifacts:\n    paths:\n      - lint-results.txt\n      - validation-report.json\n    expire_in: 1 week\n\n.husky-security:\n  extends: .husky-base\n  script:\n    - /workspace/scripts/security-scan.sh\n    - /workspace/scripts/comprehensive-lint.sh --security-only\n</code></pre>"},{"location":"gitlab-auto-devops-complete/#project-integration","title":"Project Integration","text":"<pre><code># Use templates in your project\ninclude:\n  - template: Auto-DevOps.gitlab-ci.yml\n  - local: '.gitlab/ci/huskycats-validation.yml'\n\n# Quick validation for merge requests\nhusky:quick:\n  extends: .husky-quick\n  stage: .pre\n  rules:\n    - if: '$CI_MERGE_REQUEST_ID'\n\n# Comprehensive validation for main branches\nhusky:comprehensive:\n  extends: .husky-comprehensive\n  stage: test\n  rules:\n    - if: '$CI_COMMIT_BRANCH == \"main\" || $CI_COMMIT_BRANCH == \"develop\"'\n\n# Security validation for production\nhusky:security:\n  extends: .husky-security\n  stage: test\n  rules:\n    - if: '$CI_COMMIT_BRANCH == \"main\"'\n  allow_failure: false\n</code></pre>"},{"location":"gitlab-auto-devops-complete/#migration-checklist","title":"\ud83d\udccb Migration Checklist","text":""},{"location":"gitlab-auto-devops-complete/#from-manual-ci-to-auto-devops-huskycats","title":"From Manual CI to Auto DevOps + HuskyCats","text":"<ul> <li> Configure Auto DevOps variables</li> <li> Set <code>CI_APPLICATION_REPOSITORY</code></li> <li> Set <code>CI_APPLICATION_TAG</code></li> <li> <p> Configure environment-specific variables</p> </li> <li> <p> Create Helm values files</p> </li> <li> <code>values.yaml</code> (base configuration)</li> <li> <code>values-staging.yaml</code> (staging overrides)</li> <li> <p> <code>values-production.yaml</code> (production overrides)</p> </li> <li> <p> Configure Kubernetes resources</p> </li> <li> Create <code>k8s/</code> directory for additional manifests</li> <li> Add ConfigMaps, Secrets, NetworkPolicies as needed</li> <li> <p> Configure proper resource limits and health checks</p> </li> <li> <p> Update .gitlab-ci.yml</p> </li> <li> Include Auto DevOps template</li> <li> Add HuskyCats validation jobs</li> <li> <p> Configure proper stages and rules</p> </li> <li> <p> Test the pipeline</p> </li> <li> Test on feature branch</li> <li> Test merge request pipeline</li> <li> Test deployment to staging</li> <li> <p> Test deployment to production</p> </li> <li> <p> Monitor and optimize</p> </li> <li> Review pipeline performance</li> <li> Optimize caching</li> <li> Fine-tune validation rules</li> </ul>"},{"location":"gitlab-auto-devops-complete/#benefits-summary","title":"\ud83c\udf89 Benefits Summary","text":""},{"location":"gitlab-auto-devops-complete/#huskycats-auto-devops-benefits","title":"HuskyCats + Auto DevOps Benefits","text":"<ol> <li>\ud83d\ude80 Faster Development</li> <li>Pre-built container with all tools</li> <li>No setup time for linting/validation</li> <li> <p>Automated deployments</p> </li> <li> <p>\ud83d\udd12 Better Security</p> </li> <li>Comprehensive security scanning</li> <li>Dependency vulnerability checks</li> <li> <p>Secret detection</p> </li> <li> <p>\ud83d\udccf Consistent Quality</p> </li> <li>Same validation locally and in CI</li> <li>Multi-language linting</li> <li> <p>Official GitLab CI schema validation</p> </li> <li> <p>\ud83d\udd04 Simplified Operations</p> </li> <li>Automated Kubernetes deployments</li> <li>Environment-specific configurations</li> <li> <p>Built-in monitoring and health checks</p> </li> <li> <p>\ud83d\udcca Better Visibility</p> </li> <li>Comprehensive validation reports</li> <li>Quality metrics and trends</li> <li>Clear failure reasons</li> </ol>"},{"location":"gitlab-auto-devops-complete/#additional-resources","title":"\ud83d\udcda Additional Resources","text":"<ul> <li>GitLab Auto DevOps Documentation</li> <li>Auto Deploy Image Repository</li> <li>HuskyCat Installation Guide</li> <li>HuskyCat Configuration</li> <li>Kubernetes Best Practices</li> <li>Helm Chart Development</li> </ul> <p>Need help? Check the troubleshooting section above or create an issue in the HuskyCats repository.</p>"},{"location":"gitlab-ci-cd/","title":"GitLab CI/CD Integration","text":"<p>HuskyCats Bates provides comprehensive CI/CD validation using the published container image. The container must be built and published manually using podman or docker on your local machine.</p>"},{"location":"gitlab-ci-cd/#quick-start","title":"\ud83d\ude80 Quick Start","text":""},{"location":"gitlab-ci-cd/#option-1-include-huskycats-template","title":"Option 1: Include HuskyCats Template","text":"<p>Add this to your <code>.gitlab-ci.yml</code>:</p> <pre><code>include:\n  - remote: 'https://gitlab.com/bates-ils/projects/trustees-portal/sid-controller/huskycats-bates/-/raw/main/.gitlab/ci/husky-validation.yml'\n\nstages:\n  - test\n\n# This will run comprehensive validation\nhusky:validate:\n  stage: test\n</code></pre>"},{"location":"gitlab-ci-cd/#option-2-custom-configuration","title":"Option 2: Custom Configuration","text":"<pre><code>image: registry.gitlab.com/tinyland/ai/huskycat/validator:latest\n\nstages:\n  - validate\n  - lint\n  - security\n  - test\n\n# Run all validations\nvalidate:all:\n  stage: validate\n  script:\n    - cd /workspace\n    - cp -r ${CI_PROJECT_DIR}/* /workspace/\n    - ./scripts/comprehensive-lint.sh\n</code></pre>"},{"location":"gitlab-ci-cd/#available-jobs","title":"\ud83d\udccb Available Jobs","text":""},{"location":"gitlab-ci-cd/#validation-jobs","title":"Validation Jobs","text":"Job Description Runs On <code>validate:gitlab-ci</code> Validates <code>.gitlab-ci.yml</code> syntax CI file changes <code>validate:auto-devops</code> Validates Auto DevOps configuration K8s/Helm changes <code>validate:comprehensive</code> Runs all linters and validators All changes"},{"location":"gitlab-ci-cd/#linting-jobs","title":"Linting Jobs","text":"Job Description Tools Used <code>lint:python</code> Python code quality Black, Flake8, MyPy, Ruff, Pylint <code>lint:javascript</code> JS/TS code quality ESLint, Prettier <code>lint:shell</code> Shell script analysis ShellCheck <code>lint:docker</code> Dockerfile best practices Hadolint <code>lint:yaml</code> YAML validation yamllint <code>lint:ansible</code> Ansible playbook linting ansible-lint"},{"location":"gitlab-ci-cd/#security-jobs","title":"Security Jobs","text":"Job Description Checks For <code>security:secrets</code> Secret scanning Passwords, API keys, tokens <code>security:python</code> Python security Bandit, Safety"},{"location":"gitlab-ci-cd/#test-jobs","title":"Test Jobs","text":"Job Description Output <code>test:unit</code> Run unit tests JUnit XML, Coverage <code>quality:report</code> Generate quality metrics Quality report artifact"},{"location":"gitlab-ci-cd/#configuration","title":"\ud83d\udd27 Configuration","text":""},{"location":"gitlab-ci-cd/#environment-variables","title":"Environment Variables","text":"<pre><code>variables:\n  # Disable shallow clone for full repo access\n  GIT_DEPTH: 0\n\n  # Python settings\n  PYTHONUNBUFFERED: \"1\"\n\n  # Node settings\n  NODE_ENV: \"ci\"\n\n  # Custom linting options\n  LINT_PYTHON_BLACK: \"true\"\n  LINT_PYTHON_FLAKE8: \"true\"\n  AUTO_FIX: \"false\"\n</code></pre>"},{"location":"gitlab-ci-cd/#caching","title":"Caching","text":"<p>Speed up CI runs with caching:</p> <pre><code>cache:\n  key: ${CI_COMMIT_REF_SLUG}\n  paths:\n    - node_modules/\n    - .npm/\n    - .cache/\n    - .venv/\n</code></pre>"},{"location":"gitlab-ci-cd/#use-cases","title":"\ud83c\udfaf Use Cases","text":""},{"location":"gitlab-ci-cd/#1-python-project","title":"1. Python Project","text":"<pre><code>include:\n  - remote: 'https://gitlab.com/bates-ils/projects/trustees-portal/sid-controller/huskycats-bates/-/raw/main/.gitlab/ci/husky-validation.yml'\n\nstages:\n  - lint\n  - test\n\n# Python-specific validation\npython:quality:\n  extends: husky:python\n  stage: lint\n\n# Run tests after linting\ntest:pytest:\n  extends: .husky\n  stage: test\n  script:\n    - python -m pytest\n</code></pre>"},{"location":"gitlab-ci-cd/#2-nodejs-project","title":"2. Node.js Project","text":"<pre><code>image: registry.gitlab.com/tinyland/ai/huskycat/validator:latest\n\nstages:\n  - install\n  - lint\n  - test\n\ninstall:deps:\n  stage: install\n  script:\n    - npm ci\n  cache:\n    key: ${CI_COMMIT_REF_SLUG}\n    paths:\n      - node_modules/\n\nlint:js:\n  stage: lint\n  script:\n    - npx eslint .\n    - npx prettier --check .\n  needs: [\"install:deps\"]\n</code></pre>"},{"location":"gitlab-ci-cd/#3-mixed-language-project","title":"3. Mixed Language Project","text":"<pre><code>image: registry.gitlab.com/tinyland/ai/huskycat/validator:latest\n\nstages:\n  - validate\n\n# Run all validations\nvalidate:all:\n  stage: validate\n  before_script:\n    - cd /workspace\n    - cp -r ${CI_PROJECT_DIR}/* /workspace/\n    - cp -r ${CI_PROJECT_DIR}/.* /workspace/ 2&gt;/dev/null || true\n  script:\n    - ./scripts/comprehensive-lint.sh\n  artifacts:\n    paths:\n      - lint-results.txt\n    expire_in: 1 week\n</code></pre>"},{"location":"gitlab-ci-cd/#4-security-focused-pipeline","title":"4. Security-Focused Pipeline","text":"<pre><code>include:\n  - remote: 'https://gitlab.com/bates-ils/projects/trustees-portal/sid-controller/huskycats-bates/-/raw/main/.gitlab/ci/husky-validation.yml'\n\nstages:\n  - security\n\n# Fail on security issues\nsecurity:scan:\n  extends: husky:security\n  stage: security\n  allow_failure: false\n</code></pre>"},{"location":"gitlab-ci-cd/#artifacts-and-reports","title":"\ud83d\udcca Artifacts and Reports","text":""},{"location":"gitlab-ci-cd/#junit-test-reports","title":"JUnit Test Reports","text":"<pre><code>test:results:\n  script:\n    - python -m pytest --junitxml=test-results.xml\n  artifacts:\n    reports:\n      junit: test-results.xml\n</code></pre>"},{"location":"gitlab-ci-cd/#coverage-reports","title":"Coverage Reports","text":"<pre><code>test:coverage:\n  script:\n    - python -m pytest --cov --cov-report=xml\n  coverage: '/TOTAL.*\\s+(\\d+%)$/'\n  artifacts:\n    reports:\n      coverage_report:\n        coverage_format: cobertura\n        path: coverage.xml\n</code></pre>"},{"location":"gitlab-ci-cd/#quality-reports","title":"Quality Reports","text":"<pre><code>quality:metrics:\n  extends: .husky\n  script:\n    - ./scripts/comprehensive-lint.sh &gt; quality-report.txt\n  artifacts:\n    paths:\n      - quality-report.txt\n    expire_in: 1 month\n</code></pre>"},{"location":"gitlab-ci-cd/#troubleshooting","title":"\ud83d\udea8 Troubleshooting","text":""},{"location":"gitlab-ci-cd/#common-issues","title":"Common Issues","text":"<ol> <li>\"Docker-in-Docker not available\"</li> <li> <p>Not needed! HuskyCats image includes all tools</p> </li> <li> <p>\"Permission denied\" errors</p> </li> <li> <p>Add execution permissions in before_script:    <pre><code>before_script:\n  - chmod +x scripts/*.sh\n</code></pre></p> </li> <li> <p>\"Module not found\" errors</p> </li> <li>Install dependencies in the job:    <pre><code>script:\n  - pip install -r requirements.txt\n  - npm install\n</code></pre></li> </ol>"},{"location":"gitlab-ci-cd/#debugging","title":"Debugging","text":"<p>Enable verbose output:</p> <pre><code>variables:\n  VERBOSE: \"true\"\n  DEBUG: \"1\"\n</code></pre>"},{"location":"gitlab-ci-cd/#migration-guide","title":"\ud83d\udd04 Migration Guide","text":""},{"location":"gitlab-ci-cd/#from-container-building-in-ci","title":"From Container Building in CI","text":"<p>Before: <pre><code>services:\n  - docker:dind\n\nbuild:\n  script:\n    - docker build -t myapp .\n</code></pre></p> <p>After: <pre><code># Build locally with podman/docker:\n# ./publish.sh v1.0.0\n\n# Then use in CI:\nimage: registry.gitlab.com/tinyland/ai/huskycat/validator:latest\n\nvalidate:\n  script:\n    - hadolint ContainerFile\n    - ./scripts/comprehensive-lint.sh\n</code></pre></p>"},{"location":"gitlab-ci-cd/#from-multiple-linter-jobs","title":"From Multiple Linter Jobs","text":"<p>Before: <pre><code>flake8:\n  image: python:3.9\n  script: flake8 .\n\neslint:\n  image: node:16\n  script: npx eslint .\n\nshellcheck:\n  image: koalaman/shellcheck\n  script: shellcheck *.sh\n</code></pre></p> <p>After: <pre><code>image: registry.gitlab.com/tinyland/ai/huskycat/validator:latest\n\nlint:all:\n  script:\n    - ./scripts/comprehensive-lint.sh\n</code></pre></p>"},{"location":"gitlab-ci-cd/#binary-builds","title":"\ud83c\udfd7\ufe0f Binary Builds","text":"<p>HuskyCat's CI pipeline builds native binaries for multiple platforms using GitLab SaaS runners.</p>"},{"location":"gitlab-ci-cd/#supported-platforms","title":"Supported Platforms","text":"Platform Architecture Base Image Runner Status Linux x86_64 (AMD64) Rocky Linux 10 GitLab SaaS AMD64 \u2705 Supported Linux ARM64 (aarch64) Rocky Linux 10 GitLab SaaS ARM64 \u2705 Supported macOS Apple Silicon (M1/M2/M3) macOS 14 GitLab SaaS macOS \u2705 Supported (ad-hoc signed) macOS Intel (x86_64) - - \u274c Not available"},{"location":"gitlab-ci-cd/#build-configuration","title":"Build Configuration","text":"<p>Linux AMD64: <pre><code>binary:build:linux:\n  stage: package\n  image: rockylinux/rockylinux:10\n  before_script:\n    - dnf install -y epel-release\n    - dnf install -y git curl gcc python3 python3-pip zlib-devel upx\n    - curl -LsSf https://astral.sh/uv/install.sh | sh\n  script:\n    - uv sync --extra build\n    - uv run pyinstaller --onefile --name huskycat-linux-amd64 huskycat_main.py\n    - upx --best --lzma dist/bin/huskycat-linux-amd64\n  artifacts:\n    paths:\n      - dist/bin/huskycat-linux-amd64\n</code></pre></p> <p>Linux ARM64: <pre><code>binary:build:linux-arm64:\n  stage: package\n  image: rockylinux/rockylinux:10\n  tags:\n    - saas-linux-medium-arm64\n  before_script:\n    - dnf install -y epel-release\n    - dnf install -y git curl gcc python3 python3-pip zlib-devel upx\n  script:\n    - uv sync --extra build\n    - uv run pyinstaller --onefile --name huskycat-linux-arm64 huskycat_main.py\n</code></pre></p> <p>macOS ARM64 with Signing: <pre><code>sign:darwin-arm64:\n  extends: .macos_saas_runners\n  stage: sign\n  script:\n    # Create temporary keychain\n    - security create-keychain -p \"$KEYCHAIN_PASSWORD\" \"$KEYCHAIN_NAME\"\n    - security import certificate.p12 -k \"$KEYCHAIN_NAME\"\n\n    # Check certificate type and sign or fallback\n    - |\n      APP_CERT_COUNT=$(security find-identity -v \"$KEYCHAIN_NAME\" | grep -c \"Developer ID Application\" || true)\n      if [ \"$APP_CERT_COUNT\" -eq 0 ]; then\n        codesign --force --sign - dist/bin/huskycat-darwin-arm64  # Ad-hoc signing\n      else\n        codesign --force --options runtime --sign \"$APPLE_DEVELOPER_ID_APPLICATION\" dist/bin/huskycat-darwin-arm64\n      fi\n    - codesign --verify --verbose dist/bin/huskycat-darwin-arm64\n</code></pre></p>"},{"location":"gitlab-ci-cd/#key-features","title":"Key Features","text":"<ol> <li>Rocky Linux 10 - Latest RHEL-compatible base (supported through May 2035)</li> <li>Native Compilation - No cross-compilation, native runners for each architecture</li> <li>UPX Compression - Reduces binary size by ~60%</li> <li>macOS Code Signing - Ad-hoc signing with fallback when Developer ID Application cert not available</li> <li>Automatic Releases - Binaries attached to GitLab releases on tags</li> </ol>"},{"location":"gitlab-ci-cd/#download-binaries","title":"Download Binaries","text":"<p>Pre-built binaries are available from GitLab releases:</p> <pre><code># Latest release (permalink)\ncurl -L -o huskycat https://gitlab.com/tinyland/ai/huskycat/-/releases/permalink/latest/downloads/huskycat-linux-amd64\nchmod +x huskycat\n</code></pre> <p>See Binary Downloads Guide for detailed instructions.</p>"},{"location":"gitlab-ci-cd/#benefits","title":"\ud83c\udf89 Benefits","text":"<ol> <li>No Container Building in CI - Uses pre-published images</li> <li>All Tools Pre-installed - No setup needed</li> <li>Consistent Environment - Same tools locally and in CI</li> <li>Fast Execution - No build step required</li> <li>Comprehensive Validation - All languages and configs covered</li> <li>Manual Publishing - Full control over image versions</li> </ol>"},{"location":"gitlab-ci-cd/#next-steps","title":"\ud83d\udcda Next Steps","text":"<ul> <li>Installation Guide - Setup and install HuskyCat</li> <li>Configuration - Configure validation rules</li> <li>Auto DevOps - Kubernetes validation</li> </ul>"},{"location":"installation/","title":"Installation Guide","text":"<p>This guide covers installing HuskyCat locally and in development projects.</p>"},{"location":"installation/#quick-start-pre-built-binaries-recommended","title":"\ud83d\ude80 Quick Start: Pre-Built Binaries (Recommended)","text":"<p>The fastest way to get started is using pre-built binaries from GitLab releases.</p>"},{"location":"installation/#download-and-install","title":"Download and Install","text":"<p>Linux (AMD64): <pre><code>curl -L -o ~/.local/bin/huskycat https://gitlab.com/tinyland/ai/huskycat/-/releases/permalink/latest/downloads/huskycat-linux-amd64\nchmod +x ~/.local/bin/huskycat\n</code></pre></p> <p>Linux (ARM64): <pre><code>curl -L -o ~/.local/bin/huskycat https://gitlab.com/tinyland/ai/huskycat/-/releases/permalink/latest/downloads/huskycat-linux-arm64\nchmod +x ~/.local/bin/huskycat\n</code></pre></p> <p>macOS (Apple Silicon): <pre><code>mkdir -p ~/.local/bin\ncurl -L -o ~/.local/bin/huskycat https://gitlab.com/tinyland/ai/huskycat/-/releases/permalink/latest/downloads/huskycat-darwin-arm64\nchmod +x ~/.local/bin/huskycat\n</code></pre></p>"},{"location":"installation/#verify-installation","title":"Verify Installation","text":"<pre><code>huskycat --version\nhuskycat status\n</code></pre> <p>For detailed download instructions, platform-specific notes, and troubleshooting, see Binary Downloads Guide.</p>"},{"location":"installation/#prerequisites","title":"Prerequisites","text":"<ul> <li>Container Runtime: Podman or Docker (required for all validation)</li> <li>Python 3.8+: For binary build and NPM mode</li> <li>UV Package Manager: <code>pip install uv</code></li> <li>Node.js and npm: Build system</li> <li>Git Repository: Required for hooks and staged file validation</li> </ul>"},{"location":"installation/#alternative-build-from-source","title":"Alternative: Build from Source","text":"<p>For development or platforms without pre-built binaries:</p>"},{"location":"installation/#build-from-source","title":"Build from Source","text":"<pre><code># Clone and build HuskyCat\ngit clone &lt;repository&gt;\ncd huskycats-bates\nnpm install\n\n# Install Python dependencies\nuv sync --dev\n\n# Build container (required for all validation)\nnpm run container:build\n\n# Build binary entry point\nnpm run build:binary\n\n# Verify installation\n./dist/huskycat --version\n./dist/huskycat status\n</code></pre>"},{"location":"installation/#development-mode","title":"Development Mode","text":"<pre><code># For active development on HuskyCat itself\nnpm run dev -- --help             # Show available commands\nnpm run validate                   # Validate current directory\nnpm run hooks:install              # Setup git hooks\nnpm run mcp:server                 # Start MCP server\n</code></pre>"},{"location":"installation/#using-huskycat-in-your-projects","title":"Using HuskyCat in Your Projects","text":""},{"location":"installation/#1-setup-git-hooks","title":"1. Setup Git Hooks","text":"<pre><code># Navigate to your project\ncd your-project\n\n# Setup HuskyCat git hooks\n./path/to/huskycat setup-hooks\n\n# Test the installation\ngit add .\ngit commit -m \"test: verify hooks\"  # Should run validation\n</code></pre>"},{"location":"installation/#2-validate-code","title":"2. Validate Code","text":"<pre><code># Validate current directory\n./path/to/huskycat validate\n\n# Validate specific files\n./path/to/huskycat validate src/main.py\n\n# Validate all files\n./path/to/huskycat validate --all\n\n# Validate only staged files\n./path/to/huskycat validate --staged\n</code></pre>"},{"location":"installation/#mcp-server-integration","title":"MCP Server Integration","text":""},{"location":"installation/#setup-mcp-for-claude-code","title":"Setup MCP for Claude Code","text":"<pre><code># Start MCP server for Claude Code integration (stdio mode)\n./path/to/huskycat mcp-server\n\n# Or use the bootstrap command for automatic setup\n./path/to/huskycat bootstrap\n</code></pre>"},{"location":"installation/#claude-code-configuration","title":"Claude Code Configuration","text":"<p>Add to your Claude Code MCP configuration file:</p> <pre><code>{\n  \"mcpServers\": {\n    \"huskycat\": {\n      \"command\": \"/path/to/huskycat\",\n      \"args\": [\"mcp-server\"]\n    }\n  }\n}\n</code></pre> <p>Note: HuskyCat MCP server uses stdio protocol only (stdin/stdout). No ports are needed.</p>"},{"location":"installation/#bootstrap-command","title":"Bootstrap Command","text":"<p>The <code>bootstrap</code> command automates MCP configuration setup:</p> <pre><code># Automatically configure Claude Code MCP integration\n./dist/huskycat bootstrap\n\n# Force overwrite existing configuration\n./dist/huskycat bootstrap --force\n</code></pre> <p>This command: 1. Creates MCP configuration file with HuskyCat server 2. Configures the correct binary path 3. Sets up stdio transport</p>"},{"location":"installation/#container-based-execution","title":"Container-Based Execution","text":"<p>HuskyCat uses containers for all validation to ensure consistency and isolation. The execution mode is automatically detected:</p>"},{"location":"installation/#automatic-container-detection","title":"Automatic Container Detection","text":"<p>On Host Machine: - Requires Podman or Docker installed - Commands automatically wrapped in container execution - Tools run in isolated environment</p> <p>Inside Container (CI/CD): - Detects container environment automatically - Runs tools directly (no nested containers) - Optimized for pipeline performance</p>"},{"location":"installation/#setup","title":"Setup","text":"<pre><code># Build validation container (required for host execution)\nnpm run container:build\n\n# Test container works\nnpm run container:test\n\n# All validation commands use appropriate execution mode\n./dist/huskycat validate --all    # Auto-detects: container or direct\nnpm run validate                  # Auto-detects: container or direct\n</code></pre>"},{"location":"installation/#container-detection","title":"Container Detection","text":"<p>HuskyCat automatically detects if it's running inside a container by checking: - <code>/.dockerenv</code> file (Docker) - <code>container</code> environment variable (Podman) - <code>/run/.containerenv</code> file (Podman)</p> <p>If no container runtime is detected on the host, HuskyCat will show an error and installation instructions for Podman or Docker.</p>"},{"location":"installation/#what-gets-configured","title":"What Gets Configured","text":"<p>HuskyCat setup creates:</p> <pre><code>your-project/\n\u251c\u2500\u2500 .git/hooks/               # Git hooks installed by setup-hooks\n\u2502   \u251c\u2500\u2500 pre-commit           # Validates staged files\n\u2502   \u251c\u2500\u2500 pre-push             # Validates CI configuration  \n\u2502   \u2514\u2500\u2500 commit-msg           # Validates commit message format\n\u251c\u2500\u2500 .huskycat/               # Configuration and cache\n\u2502   \u251c\u2500\u2500 config.json         # HuskyCat configuration\n\u2502   \u2514\u2500\u2500 schemas/            # Downloaded validation schemas\n\u2514\u2500\u2500 (existing project files remain unchanged)\n</code></pre>"},{"location":"installation/#post-installation","title":"Post-Installation","text":""},{"location":"installation/#verify-installation_1","title":"Verify Installation","text":"<pre><code># Check HuskyCat status\n./dist/huskycat status\n\n# Test validation\n./dist/huskycat validate --all\n\n# Verify git hooks are working\ngit add .\ngit commit -m \"test: verify hooks\"  # Should run validation\n\n# Update validation schemas\n./dist/huskycat update-schemas\n</code></pre>"},{"location":"installation/#using-huskycat-commands","title":"Using HuskyCat Commands","text":"<p>After installation, you can use these commands:</p> <pre><code># Validate code\n./dist/huskycat validate                    # Validate current directory\n./dist/huskycat validate --staged          # Validate staged files\n./dist/huskycat validate src/main.py       # Validate specific file\n\n# CI/CD validation  \n./dist/huskycat ci-validate .gitlab-ci.yml # Validate GitLab CI\n\n# MCP integration\n./dist/huskycat mcp-server                  # Start MCP server\n\n# Management\n./dist/huskycat clean                       # Clean cache\n./dist/huskycat update-schemas              # Update schemas\n./dist/huskycat status                      # Show status\n</code></pre>"},{"location":"installation/#development-configuration","title":"Development Configuration","text":""},{"location":"installation/#configure-your-ide","title":"Configure Your IDE","text":""},{"location":"installation/#vs-code","title":"VS Code","text":"<p>Add to <code>.vscode/settings.json</code>: <pre><code>{\n  \"editor.formatOnSave\": true,\n  \"python.formatting.provider\": \"black\",\n  \"python.linting.enabled\": true,\n  \"python.linting.flake8Enabled\": true,\n  \"[python]\": {\n    \"editor.codeActionsOnSave\": {\n      \"source.organizeImports\": true\n    }\n  }\n}\n</code></pre></p>"},{"location":"installation/#pycharm","title":"PyCharm","text":"<ol> <li>Go to Settings \u2192 Tools \u2192 File Watchers</li> <li>Add watchers for Black and flake8</li> <li>Enable \"Reformat on Save\"</li> </ol>"},{"location":"installation/#update-packagejson-scripts","title":"Update package.json Scripts","text":"<p>Add these helpful scripts: <pre><code>{\n  \"scripts\": {\n    \"lint\": \"./scripts/comprehensive-lint.sh --all\",\n    \"lint:fix\": \"./scripts/comprehensive-lint.sh --all --fix\",\n    \"lint:staged\": \"./scripts/comprehensive-lint.sh --staged\",\n    \"prepare\": \"husky install\"\n  }\n}\n</code></pre></p>"},{"location":"installation/#troubleshooting","title":"Troubleshooting","text":""},{"location":"installation/#architecture-issues","title":"Architecture Issues","text":"<ol> <li> <p>\"exec format error\" when running Docker <pre><code># This means architecture mismatch. Use the platform flag:\ndocker run --rm --platform linux/amd64 -v \"$(pwd):/workspace\" \\\n  registry.gitlab.com/tinyland/ai/huskycat/validator:latest\n\n# Or build the container locally:\nnpm run container:build\n</code></pre></p> </li> <li> <p>Check your system architecture <pre><code># See what architecture you're running\nuname -m\n# x86_64 = use linux/amd64\n# arm64 or aarch64 = use linux/arm64\n\n# Check Docker image architecture\ndocker inspect registry.gitlab.com/tinyland/ai/huskycat/validator:latest | grep Architecture\n</code></pre></p> </li> </ol>"},{"location":"installation/#common-issues","title":"Common Issues","text":"<ol> <li>\"command not found\" errors</li> <li>Ensure tools are installed and in PATH</li> <li> <p>Try using full paths in scripts</p> </li> <li> <p>Permission denied</p> </li> <li>Make scripts executable: <code>chmod +x &lt;script&gt;</code></li> <li> <p>Check file permissions</p> </li> <li> <p>Python tools not found</p> </li> <li>Activate virtual environment</li> <li> <p>Install missing tools with pip</p> </li> <li> <p>Husky hooks not running</p> </li> <li>Run <code>npx husky install</code></li> <li>Check Git version (needs 2.9+)</li> <li>Ensure core.hooksPath is not set</li> </ol> <p>For additional support, see our GitLab Issues page.</p>"},{"location":"macos-code-signing/","title":"macOS Code Signing for HuskyCat Binaries","text":"<p>This guide covers setting up code signing for macOS binaries in GitLab CI/CD pipelines using PyInstaller.</p>"},{"location":"macos-code-signing/#overview","title":"Overview","text":"<p>HuskyCat supports automatic code signing for macOS binaries using Apple Developer certificates. This ensures:</p> <ul> <li>Gatekeeper Compatibility: Binaries run without security warnings</li> <li>Hardened Runtime: Enhanced security with proper entitlements</li> <li>Universal Binaries: Support for both Intel and Apple Silicon Macs</li> <li>CI/CD Integration: Automated signing in GitLab pipelines</li> </ul>"},{"location":"macos-code-signing/#prerequisites","title":"Prerequisites","text":""},{"location":"macos-code-signing/#1-apple-developer-account","title":"1. Apple Developer Account","text":"<p>You need an Apple Developer account with: - Developer ID Application Certificate: For distributing outside the Mac App Store - Team ID: Your Apple Developer Team identifier</p>"},{"location":"macos-code-signing/#2-certificate-export","title":"2. Certificate Export","text":"<ol> <li>Open Keychain Access on a Mac with your signing certificate</li> <li>Find your certificate: \"Developer ID Application: Your Name (TEAM_ID)\"</li> <li>Export as P12: Right-click \u2192 Export \u2192 <code>.p12</code> format</li> <li>Set a password: Choose a secure password for the .p12 file</li> </ol>"},{"location":"macos-code-signing/#3-gitlab-runner-setup","title":"3. GitLab Runner Setup","text":"<p>You need a GitLab Runner on macOS with: - Xcode Command Line Tools: <code>xcode-select --install</code> - Python 3.11+: For UV and PyInstaller - Runner Tag: <code>macos</code> (configured in <code>.gitlab-ci.yml</code>)</p>"},{"location":"macos-code-signing/#gitlab-cicd-variables-setup","title":"GitLab CI/CD Variables Setup","text":"<p>Configure these variables in your GitLab project's CI/CD settings:</p>"},{"location":"macos-code-signing/#required-variables","title":"Required Variables","text":"Variable Type Description Example <code>APPLE_SIGNING_IDENTITY</code> Variable Full certificate name <code>\"Developer ID Application: Your Name (ABCD123456)\"</code> <code>APPLE_TEAM_ID</code> Variable Apple Developer Team ID <code>ABCD123456</code> <code>APPLE_CERTIFICATE_P12_BASE64</code> Variable (Masked) Base64-encoded .p12 certificate <code>MIIK...</code> <code>APPLE_CERTIFICATE_PASSWORD</code> Variable (Masked) Password for .p12 certificate <code>your-cert-password</code> <code>KEYCHAIN_PASSWORD</code> Variable (Masked) Temporary keychain password <code>ci-keychain-pass</code>"},{"location":"macos-code-signing/#encoding-your-certificate","title":"Encoding Your Certificate","text":"<pre><code># Convert .p12 to base64 for GitLab variable\nbase64 -i your-certificate.p12 | pbcopy\n</code></pre>"},{"location":"macos-code-signing/#local-development","title":"Local Development","text":""},{"location":"macos-code-signing/#building-signed-binaries-locally","title":"Building Signed Binaries Locally","text":"<pre><code># Set your signing identity\nexport APPLE_SIGNING_IDENTITY=\"Developer ID Application: Your Name (TEAM_ID)\"\n\n# Build signed binary with entitlements\nnpm run build:binary:signed\n\n# Or use the build script directly\nuv run python build_binary.py \\\n  --codesign-identity \"$APPLE_SIGNING_IDENTITY\" \\\n  --entitlements-file entitlements.plist \\\n  --target-arch universal2 \\\n  --skip-upx\n</code></pre>"},{"location":"macos-code-signing/#testing-unsigned-binaries","title":"Testing Unsigned Binaries","text":"<pre><code># Build without signing (for testing)\nnpm run build:binary -- --skip-upx --target-arch universal2\n\n# Test the binary\n./dist/huskycat --version\n</code></pre>"},{"location":"macos-code-signing/#entitlements-configuration","title":"Entitlements Configuration","text":"<p>The <code>entitlements.plist</code> file defines permissions for the signed binary:</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;!DOCTYPE plist PUBLIC \"-//Apple//DTD PLIST 1.0//EN\" \"http://www.apple.com/DTDs/PropertyList-1.0.dtd\"&gt;\n&lt;plist version=\"1.0\"&gt;\n&lt;dict&gt;\n    &lt;!-- Allow executing binaries and scripts --&gt;\n    &lt;key&gt;com.apple.security.cs.allow-unsigned-executable-memory&lt;/key&gt;\n    &lt;true/&gt;\n\n    &lt;!-- Allow loading of arbitrary libraries --&gt;\n    &lt;key&gt;com.apple.security.cs.disable-library-validation&lt;/key&gt;\n    &lt;true/&gt;\n\n    &lt;!-- Allow network access for downloading schemas --&gt;\n    &lt;key&gt;com.apple.security.network.client&lt;/key&gt;\n    &lt;true/&gt;\n\n    &lt;!-- Allow file system access for validation tools --&gt;\n    &lt;key&gt;com.apple.security.files.user-selected.read-write&lt;/key&gt;\n    &lt;true/&gt;\n\n    &lt;!-- Required for PyInstaller binaries --&gt;\n    &lt;key&gt;com.apple.security.cs.disable-executable-page-protection&lt;/key&gt;\n    &lt;true/&gt;\n\n    &lt;!-- Allow runtime code execution (Python bytecode) --&gt;\n    &lt;key&gt;com.apple.security.cs.allow-dyld-environment-variables&lt;/key&gt;\n    &lt;true/&gt;\n&lt;/dict&gt;\n&lt;/plist&gt;\n</code></pre>"},{"location":"macos-code-signing/#key-entitlements-explained","title":"Key Entitlements Explained","text":"<ul> <li><code>allow-unsigned-executable-memory</code>: Allows PyInstaller to execute Python bytecode</li> <li><code>disable-library-validation</code>: Permits loading of validation tool libraries  </li> <li><code>network.client</code>: Enables downloading of validation schemas</li> <li><code>files.user-selected.read-write</code>: Allows validation of user files</li> <li><code>disable-executable-page-protection</code>: Required for PyInstaller executables</li> </ul>"},{"location":"macos-code-signing/#gitlab-ci-pipeline","title":"GitLab CI Pipeline","text":"<p>The macOS build job in <code>.gitlab-ci.yml</code>:</p> <pre><code>binary:build:macos:\n  stage: package\n  tags: \n    - macos  # Requires macOS runner\n  variables:\n    APPLE_SIGNING_IDENTITY: $APPLE_SIGNING_IDENTITY\n    APPLE_TEAM_ID: $APPLE_TEAM_ID\n  before_script:\n    # Setup Python environment\n    - curl -LsSf https://astral.sh/uv/install.sh | sh\n    - export PATH=\"$HOME/.local/bin:$PATH\"\n    - uv sync --extra build\n\n    # Import signing certificate\n    - |\n      if [ -n \"$APPLE_CERTIFICATE_P12_BASE64\" ]; then\n        echo \"\ud83d\udd10 Importing signing certificate...\"\n        echo \"$APPLE_CERTIFICATE_P12_BASE64\" | base64 -D &gt; certificate.p12\n        security create-keychain -p \"$KEYCHAIN_PASSWORD\" ci.keychain\n        security import certificate.p12 -k ci.keychain -P \"$APPLE_CERTIFICATE_PASSWORD\" -A\n        rm certificate.p12\n      fi\n  script:\n    # Build signed binary\n    - |\n      uv run python build_binary.py \\\n        --codesign-identity \"$APPLE_SIGNING_IDENTITY\" \\\n        --entitlements-file entitlements.plist \\\n        --target-arch universal2 \\\n        --skip-upx\n</code></pre>"},{"location":"macos-code-signing/#verification-commands","title":"Verification Commands","text":""},{"location":"macos-code-signing/#check-code-signing-status","title":"Check Code Signing Status","text":"<pre><code># Verify signature\ncodesign -dv dist/huskycat\n\n# Check entitlements\ncodesign -d --entitlements - dist/huskycat\n\n# Test Gatekeeper compatibility\nspctl -a -t exec -vv dist/huskycat\n</code></pre>"},{"location":"macos-code-signing/#binary-architecture","title":"Binary Architecture","text":"<pre><code># Check universal binary\nfile dist/huskycat\n# Output: Mach-O universal binary with 2 architectures: [x86_64:Mach-O 64-bit executable x86_64] [arm64:Mach-O 64-bit executable arm64]\n\n# Test on different architectures\narch -x86_64 ./dist/huskycat --version  # Intel\narch -arm64 ./dist/huskycat --version   # Apple Silicon\n</code></pre>"},{"location":"macos-code-signing/#troubleshooting","title":"Troubleshooting","text":""},{"location":"macos-code-signing/#common-issues","title":"Common Issues","text":""},{"location":"macos-code-signing/#1-binary-killed-by-macos","title":"1. \"Binary Killed by macOS\"","text":"<p>Cause: Unsigned binary with hardened runtime Solution: Either sign the binary or build without UPX compression</p> <pre><code># Rebuild without UPX\nnpm run build:binary -- --skip-upx\n</code></pre>"},{"location":"macos-code-signing/#2-code-sign-error-identity-not-found","title":"2. \"Code Sign Error: Identity Not Found\"","text":"<p>Cause: Certificate not properly imported Solution: Verify certificate installation</p> <pre><code>security find-identity -v -p codesigning\n</code></pre>"},{"location":"macos-code-signing/#3-gatekeeper-blocks-binary","title":"3. \"Gatekeeper Blocks Binary\"","text":"<p>Cause: Invalid signature or entitlements Solution: Check signature and entitlements</p> <pre><code>codesign -dv dist/huskycat\ncodesign --verify --verbose dist/huskycat\n</code></pre>"},{"location":"macos-code-signing/#4-pyinstaller-import-errors","title":"4. \"PyInstaller Import Errors\"","text":"<p>Cause: Missing entitlements for dynamic loading Solution: Ensure entitlements include: - <code>com.apple.security.cs.disable-library-validation</code> - <code>com.apple.security.cs.allow-unsigned-executable-memory</code></p>"},{"location":"macos-code-signing/#debug-mode","title":"Debug Mode","text":"<p>Build with verbose signing output:</p> <pre><code>uv run python build_binary.py \\\n  --codesign-identity \"$APPLE_SIGNING_IDENTITY\" \\\n  --entitlements-file entitlements.plist \\\n  --target-arch universal2 \\\n  --skip-upx \\\n  --verbose\n</code></pre>"},{"location":"macos-code-signing/#security-considerations","title":"Security Considerations","text":""},{"location":"macos-code-signing/#certificate-security","title":"Certificate Security","text":"<ul> <li>Never commit certificates: Use GitLab CI/CD variables (masked)</li> <li>Rotate regularly: Update certificates before expiration</li> <li>Limit access: Restrict who can modify CI/CD variables</li> <li>Temporary keychains: Always clean up in CI <code>after_script</code></li> </ul>"},{"location":"macos-code-signing/#entitlements","title":"Entitlements","text":"<ul> <li>Minimal permissions: Only include required entitlements</li> <li>Regular review: Audit entitlements for security implications</li> <li>Testing: Verify binary works with minimal entitlements</li> </ul>"},{"location":"macos-code-signing/#distribution","title":"Distribution","text":"<ul> <li>Notarization: Consider Apple notarization for additional trust</li> <li>Checksums: Provide SHA256 checksums for distributed binaries</li> <li>HTTPS only: Distribute binaries over secure channels</li> </ul>"},{"location":"macos-code-signing/#resources","title":"Resources","text":"<ul> <li>Apple Code Signing Guide</li> <li>PyInstaller macOS Guide</li> <li>GitLab CI macOS Runners</li> <li>Hardened Runtime Entitlements</li> </ul>"},{"location":"mcp-tool-api/","title":"HuskyCats MCP Server - Tool API Documentation","text":""},{"location":"mcp-tool-api/#overview","title":"Overview","text":"<p>The HuskyCats MCP Server provides a comprehensive set of validation and code quality tools accessible via the Model Context Protocol (MCP). This document details all available tools, their parameters, and usage examples for IDE and agent integration.</p>"},{"location":"mcp-tool-api/#connection-configuration","title":"Connection Configuration","text":""},{"location":"mcp-tool-api/#stdio-mode-local","title":"Stdio Mode (Local)","text":"<pre><code>{\n  \"mcpServers\": {\n    \"huskycats-validator\": {\n      \"command\": \"node\",\n      \"args\": [\"mcp-server/dist/index.js\"],\n      \"type\": \"stdio\",\n      \"env\": {\n        \"NODE_ENV\": \"production\",\n        \"MCP_PORT\": \"8080\"\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"mcp-tool-api/#http-mode-remote","title":"HTTP Mode (Remote)","text":"<pre><code>{\n  \"mcpServers\": {\n    \"huskycats-http\": {\n      \"url\": \"http://localhost:8080/rpc\",\n      \"type\": \"http\",\n      \"authentication\": {\n        \"type\": \"bearer\",\n        \"token\": \"YOUR_AUTH_TOKEN\"\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"mcp-tool-api/#mcp-protocol-methods","title":"MCP Protocol Methods","text":""},{"location":"mcp-tool-api/#1-initialize-session","title":"1. Initialize Session","text":"<pre><code>{\n  \"jsonrpc\": \"2.0\",\n  \"id\": 1,\n  \"method\": \"initialize\",\n  \"params\": {\n    \"protocolVersion\": \"2024-11-05\",\n    \"capabilities\": {},\n    \"clientInfo\": {\n      \"name\": \"your-client\",\n      \"version\": \"1.0.0\"\n    }\n  }\n}\n</code></pre>"},{"location":"mcp-tool-api/#2-list-available-tools","title":"2. List Available Tools","text":"<pre><code>{\n  \"jsonrpc\": \"2.0\",\n  \"id\": 2,\n  \"method\": \"tools/list\"\n}\n</code></pre>"},{"location":"mcp-tool-api/#3-call-a-tool","title":"3. Call a Tool","text":"<pre><code>{\n  \"jsonrpc\": \"2.0\",\n  \"id\": 3,\n  \"method\": \"tools/call\",\n  \"params\": {\n    \"name\": \"tool-name\",\n    \"arguments\": {\n      // Tool-specific arguments\n    }\n  }\n}\n</code></pre>"},{"location":"mcp-tool-api/#available-tools","title":"Available Tools","text":""},{"location":"mcp-tool-api/#python-validation-tools","title":"Python Validation Tools","text":""},{"location":"mcp-tool-api/#python-black","title":"python-black","text":"<p>Format Python code using Black formatter.</p> <p>Parameters: - <code>files</code> (array, required): Python files to format - <code>fix</code> (boolean, optional): Apply fixes automatically (default: false)</p> <p>Example: <pre><code>{\n  \"name\": \"python-black\",\n  \"arguments\": {\n    \"files\": [\"src/main.py\", \"src/utils.py\"],\n    \"fix\": true\n  }\n}\n</code></pre></p>"},{"location":"mcp-tool-api/#python-flake8","title":"python-flake8","text":"<p>Lint Python code for style and errors.</p> <p>Parameters: - <code>files</code> (array, required): Python files to lint</p> <p>Example: <pre><code>{\n  \"name\": \"python-flake8\",\n  \"arguments\": {\n    \"files\": [\"src/**/*.py\"]\n  }\n}\n</code></pre></p>"},{"location":"mcp-tool-api/#python-mypy","title":"python-mypy","text":"<p>Type check Python code.</p> <p>Parameters: - <code>files</code> (array, required): Python files to type check</p> <p>Example: <pre><code>{\n  \"name\": \"python-mypy\",\n  \"arguments\": {\n    \"files\": [\"src/models.py\"]\n  }\n}\n</code></pre></p>"},{"location":"mcp-tool-api/#python-bandit","title":"python-bandit","text":"<p>Security linter for Python.</p> <p>Parameters: - <code>files</code> (array, required): Python files to scan for security issues</p> <p>Example: <pre><code>{\n  \"name\": \"python-bandit\",\n  \"arguments\": {\n    \"files\": [\"src/**/*.py\"]\n  }\n}\n</code></pre></p>"},{"location":"mcp-tool-api/#javascripttypescript-tools","title":"JavaScript/TypeScript Tools","text":""},{"location":"mcp-tool-api/#js-eslint","title":"js-eslint","text":"<p>Lint JavaScript/TypeScript code.</p> <p>Parameters: - <code>files</code> (array, required): JS/TS files to lint - <code>fix</code> (boolean, optional): Apply fixes automatically (default: false)</p> <p>Example: <pre><code>{\n  \"name\": \"js-eslint\",\n  \"arguments\": {\n    \"files\": [\"src/**/*.ts\", \"src/**/*.tsx\"],\n    \"fix\": true\n  }\n}\n</code></pre></p>"},{"location":"mcp-tool-api/#js-prettier","title":"js-prettier","text":"<p>Format JavaScript/TypeScript code.</p> <p>Parameters: - <code>files</code> (array, required): JS/TS files to format - <code>fix</code> (boolean, optional): Apply formatting automatically (default: false)</p> <p>Example: <pre><code>{\n  \"name\": \"js-prettier\",\n  \"arguments\": {\n    \"files\": [\"src/**/*.js\"],\n    \"fix\": true\n  }\n}\n</code></pre></p>"},{"location":"mcp-tool-api/#shell-script-tools","title":"Shell Script Tools","text":""},{"location":"mcp-tool-api/#shell-shellcheck","title":"shell-shellcheck","text":"<p>Lint shell scripts.</p> <p>Parameters: - <code>files</code> (array, required): Shell scripts to lint</p> <p>Example: <pre><code>{\n  \"name\": \"shell-shellcheck\",\n  \"arguments\": {\n    \"files\": [\"scripts/*.sh\"]\n  }\n}\n</code></pre></p>"},{"location":"mcp-tool-api/#docker-tools","title":"Docker Tools","text":""},{"location":"mcp-tool-api/#docker-hadolint","title":"docker-hadolint","text":"<p>Lint Dockerfiles.</p> <p>Parameters: - <code>files</code> (array, required): Dockerfiles to lint</p> <p>Example: <pre><code>{\n  \"name\": \"docker-hadolint\",\n  \"arguments\": {\n    \"files\": [\"Dockerfile\", \"ContainerFile\"]\n  }\n}\n</code></pre></p>"},{"location":"mcp-tool-api/#yaml-tools","title":"YAML Tools","text":""},{"location":"mcp-tool-api/#yaml-yamllint","title":"yaml-yamllint","text":"<p>Lint YAML files.</p> <p>Parameters: - <code>files</code> (array, required): YAML files to lint</p> <p>Example: <pre><code>{\n  \"name\": \"yaml-yamllint\",\n  \"arguments\": {\n    \"files\": [\"**/*.yml\", \"**/*.yaml\"]\n  }\n}\n</code></pre></p>"},{"location":"mcp-tool-api/#gitlab-ci-tools","title":"GitLab CI Tools","text":""},{"location":"mcp-tool-api/#gitlab-ci-validate","title":"gitlab-ci-validate","text":"<p>Validate GitLab CI configuration.</p> <p>Parameters: - <code>files</code> (array, required): GitLab CI files to validate</p> <p>Example: <pre><code>{\n  \"name\": \"gitlab-ci-validate\",\n  \"arguments\": {\n    \"files\": [\".gitlab-ci.yml\"]\n  }\n}\n</code></pre></p>"},{"location":"mcp-tool-api/#project-wide-tools","title":"Project-Wide Tools","text":""},{"location":"mcp-tool-api/#validate_project","title":"validate_project","text":"<p>Validate entire project with all applicable tools.</p> <p>Parameters: - <code>directory</code> (string, optional): Project directory to validate (default: \".\") - <code>exclude</code> (array, optional): Patterns to exclude (default: [\"node_modules/\", \".git/\", \"dist/**\"]) - <code>parallel</code> (boolean, optional): Run validations in parallel (default: true) - <code>fixIssues</code> (boolean, optional): Automatically fix issues where possible (default: false)</p> <p>Example: <pre><code>{\n  \"name\": \"validate_project\",\n  \"arguments\": {\n    \"directory\": \".\",\n    \"exclude\": [\"node_modules/**\", \"build/**\"],\n    \"parallel\": true,\n    \"fixIssues\": false\n  }\n}\n</code></pre></p>"},{"location":"mcp-tool-api/#batch_validate","title":"batch_validate","text":"<p>Validate multiple files with specified tools.</p> <p>Parameters: - <code>files</code> (array, required): Files to validate - <code>tools</code> (array, required): Tools to use for validation - <code>parallel</code> (boolean, optional): Run in parallel (default: true)</p> <p>Example: <pre><code>{\n  \"name\": \"batch_validate\",\n  \"arguments\": {\n    \"files\": [\"src/**/*.py\", \"src/**/*.js\"],\n    \"tools\": [\"python-black\", \"js-prettier\"],\n    \"parallel\": true\n  }\n}\n</code></pre></p>"},{"location":"mcp-tool-api/#security-tools","title":"Security Tools","text":""},{"location":"mcp-tool-api/#security_secrets_scan","title":"security_secrets_scan","text":"<p>Scan for exposed secrets and credentials.</p> <p>Parameters: - <code>directory</code> (string, optional): Directory to scan (default: \".\") - <code>exclude</code> (array, optional): Patterns to exclude</p> <p>Example: <pre><code>{\n  \"name\": \"security_secrets_scan\",\n  \"arguments\": {\n    \"directory\": \".\",\n    \"exclude\": [\".git/**\", \"node_modules/**\"]\n  }\n}\n</code></pre></p>"},{"location":"mcp-tool-api/#security_dependency_audit","title":"security_dependency_audit","text":"<p>Audit dependencies for vulnerabilities.</p> <p>Parameters: - <code>packageFile</code> (string, required): Package file to audit (package.json, requirements.txt, etc.)</p> <p>Example: <pre><code>{\n  \"name\": \"security_dependency_audit\",\n  \"arguments\": {\n    \"packageFile\": \"package.json\"\n  }\n}\n</code></pre></p>"},{"location":"mcp-tool-api/#validation-queue-tools","title":"Validation Queue Tools","text":""},{"location":"mcp-tool-api/#queue_validation","title":"queue_validation","text":"<p>Queue repository for validation.</p> <p>Parameters: - <code>repository</code> (string, required): Repository URL - <code>branch</code> (string, optional): Branch to validate (default: \"main\") - <code>tools</code> (array, optional): Tools to use</p> <p>Example: <pre><code>{\n  \"name\": \"queue_validation\",\n  \"arguments\": {\n    \"repository\": \"https://github.com/user/repo\",\n    \"branch\": \"develop\",\n    \"tools\": [\"python-black\", \"python-flake8\"]\n  }\n}\n</code></pre></p>"},{"location":"mcp-tool-api/#queue_status","title":"queue_status","text":"<p>Get validation queue status.</p> <p>Parameters: - <code>jobId</code> (string, optional): Specific job ID to check</p> <p>Example: <pre><code>{\n  \"name\": \"queue_status\",\n  \"arguments\": {\n    \"jobId\": \"job-123456\"\n  }\n}\n</code></pre></p>"},{"location":"mcp-tool-api/#syncthing-integration-tools","title":"Syncthing Integration Tools","text":""},{"location":"mcp-tool-api/#syncthing_list_repos","title":"syncthing_list_repos","text":"<p>List synchronized repositories.</p> <p>Parameters: None</p> <p>Example: <pre><code>{\n  \"name\": \"syncthing_list_repos\",\n  \"arguments\": {}\n}\n</code></pre></p>"},{"location":"mcp-tool-api/#syncthing_add_repo","title":"syncthing_add_repo","text":"<p>Add repository for synchronization.</p> <p>Parameters: - <code>repository</code> (string, required): Repository name - <code>path</code> (string, required): Local path for repository</p> <p>Example: <pre><code>{\n  \"name\": \"syncthing_add_repo\",\n  \"arguments\": {\n    \"repository\": \"my-project\",\n    \"path\": \"/workspace/my-project\"\n  }\n}\n</code></pre></p>"},{"location":"mcp-tool-api/#syncthing_sync_status","title":"syncthing_sync_status","text":"<p>Get synchronization status.</p> <p>Parameters: - <code>repository</code> (string, optional): Repository to check</p> <p>Example: <pre><code>{\n  \"name\": \"syncthing_sync_status\",\n  \"arguments\": {\n    \"repository\": \"my-project\"\n  }\n}\n</code></pre></p>"},{"location":"mcp-tool-api/#container-management-tools","title":"Container Management Tools","text":""},{"location":"mcp-tool-api/#container_list","title":"container_list","text":"<p>List all containers managed by Podman.</p> <p>Parameters: - <code>all</code> (boolean, optional): Include stopped containers (default: false)</p> <p>Example: <pre><code>{\n  \"name\": \"container_list\",\n  \"arguments\": {\n    \"all\": true\n  }\n}\n</code></pre></p>"},{"location":"mcp-tool-api/#container_inspect","title":"container_inspect","text":"<p>Get detailed information about a specific container.</p> <p>Parameters: - <code>container</code> (string, required): Container ID or name</p> <p>Example: <pre><code>{\n  \"name\": \"container_inspect\",\n  \"arguments\": {\n    \"container\": \"huskycats-mcp-server\"\n  }\n}\n</code></pre></p>"},{"location":"mcp-tool-api/#container_logs","title":"container_logs","text":"<p>Get container logs.</p> <p>Parameters: - <code>container</code> (string, required): Container ID or name - <code>tail</code> (number, optional): Number of lines to show (default: 100)</p> <p>Example: <pre><code>{\n  \"name\": \"container_logs\",\n  \"arguments\": {\n    \"container\": \"huskycats-mcp-server\",\n    \"tail\": 50\n  }\n}\n</code></pre></p>"},{"location":"mcp-tool-api/#resources","title":"Resources","text":"<p>The MCP server provides access to various resources:</p>"},{"location":"mcp-tool-api/#list-resources","title":"List Resources","text":"<pre><code>{\n  \"jsonrpc\": \"2.0\",\n  \"id\": 4,\n  \"method\": \"resources/list\"\n}\n</code></pre>"},{"location":"mcp-tool-api/#read-resource","title":"Read Resource","text":"<pre><code>{\n  \"jsonrpc\": \"2.0\",\n  \"id\": 5,\n  \"method\": \"resources/read\",\n  \"params\": {\n    \"uri\": \"validation://report/latest\"\n  }\n}\n</code></pre>"},{"location":"mcp-tool-api/#available-resources","title":"Available Resources","text":"<ol> <li>validation://report/latest - Latest validation report</li> <li>validation://queue/status - Current validation queue status</li> <li>validation://tools/available - List of all available validation tools</li> <li>container://logs/mcp-server - MCP server container logs</li> <li>syncthing://status - Syncthing synchronization status</li> </ol>"},{"location":"mcp-tool-api/#prompts","title":"Prompts","text":"<p>Pre-configured prompts for common tasks:</p>"},{"location":"mcp-tool-api/#list-prompts","title":"List Prompts","text":"<pre><code>{\n  \"jsonrpc\": \"2.0\",\n  \"id\": 6,\n  \"method\": \"prompts/list\"\n}\n</code></pre>"},{"location":"mcp-tool-api/#get-prompt","title":"Get Prompt","text":"<pre><code>{\n  \"jsonrpc\": \"2.0\",\n  \"id\": 7,\n  \"method\": \"prompts/get\",\n  \"params\": {\n    \"name\": \"validate_codebase\",\n    \"arguments\": {\n      \"directory\": \"/path/to/project\"\n    }\n  }\n}\n</code></pre>"},{"location":"mcp-tool-api/#available-prompts","title":"Available Prompts","text":"<ol> <li>validate_codebase - Validate an entire codebase</li> <li>fix_python_issues - Fix Python code issues automatically</li> <li>security_audit - Perform security audit</li> </ol>"},{"location":"mcp-tool-api/#batch-operations","title":"Batch Operations","text":"<p>The server supports batch requests for improved performance:</p> <pre><code>[\n  {\n    \"jsonrpc\": \"2.0\",\n    \"id\": 1,\n    \"method\": \"tools/list\"\n  },\n  {\n    \"jsonrpc\": \"2.0\",\n    \"id\": 2,\n    \"method\": \"resources/list\"\n  },\n  {\n    \"jsonrpc\": \"2.0\",\n    \"id\": 3,\n    \"method\": \"tools/call\",\n    \"params\": {\n      \"name\": \"python-black\",\n      \"arguments\": {\n        \"files\": [\"test.py\"]\n      }\n    }\n  }\n]\n</code></pre>"},{"location":"mcp-tool-api/#error-handling","title":"Error Handling","text":"<p>All errors follow the JSON-RPC 2.0 error format:</p> <pre><code>{\n  \"jsonrpc\": \"2.0\",\n  \"id\": 1,\n  \"error\": {\n    \"code\": -32601,\n    \"message\": \"Method not found\",\n    \"data\": {\n      \"method\": \"unknown/method\"\n    }\n  }\n}\n</code></pre>"},{"location":"mcp-tool-api/#error-codes","title":"Error Codes","text":"<ul> <li><code>-32700</code>: Parse error</li> <li><code>-32600</code>: Invalid request</li> <li><code>-32601</code>: Method not found</li> <li><code>-32602</code>: Invalid params</li> <li><code>-32603</code>: Internal error</li> </ul>"},{"location":"mcp-tool-api/#authentication","title":"Authentication","text":"<p>For HTTP mode, include the Bearer token in the Authorization header:</p> <pre><code>POST /rpc HTTP/1.1\nHost: localhost:8080\nContent-Type: application/json\nAuthorization: Bearer YOUR_AUTH_TOKEN\n\n{\n  \"jsonrpc\": \"2.0\",\n  \"id\": 1,\n  \"method\": \"tools/list\"\n}\n</code></pre>"},{"location":"mcp-tool-api/#ide-integration-examples","title":"IDE Integration Examples","text":""},{"location":"mcp-tool-api/#visual-studio-code-extension","title":"Visual Studio Code Extension","text":"<pre><code>import { MCPClient } from '@modelcontextprotocol/sdk';\n\nconst client = new MCPClient({\n  url: 'http://localhost:8080/rpc',\n  headers: {\n    'Authorization': 'Bearer YOUR_TOKEN'\n  }\n});\n\n// Initialize\nawait client.initialize({\n  protocolVersion: '2024-11-05',\n  capabilities: {},\n  clientInfo: {\n    name: 'vscode-huskycat',\n    version: '1.0.0'\n  }\n});\n\n// List tools\nconst tools = await client.listTools();\n\n// Call a tool\nconst result = await client.callTool({\n  name: 'python-black',\n  arguments: {\n    files: ['main.py'],\n    fix: true\n  }\n});\n</code></pre>"},{"location":"mcp-tool-api/#intellij-idea-plugin","title":"IntelliJ IDEA Plugin","text":"<pre><code>import com.modelcontextprotocol.MCPClient;\n\nMCPClient client = new MCPClient(\"http://localhost:8080/rpc\");\nclient.setAuthToken(\"YOUR_TOKEN\");\n\n// Initialize\nInitializeResponse response = client.initialize(\n    \"2024-11-05\",\n    new ClientInfo(\"intellij-huskycat\", \"1.0.0\")\n);\n\n// List tools\nToolsResponse tools = client.listTools();\n\n// Call a tool\nToolResult result = client.callTool(\n    \"python-black\",\n    Map.of(\"files\", List.of(\"main.py\"), \"fix\", true)\n);\n</code></pre>"},{"location":"mcp-tool-api/#python-client","title":"Python Client","text":"<pre><code>import requests\n\nclass MCPClient:\n    def __init__(self, url, token):\n        self.url = url\n        self.token = token\n        self.headers = {\n            'Content-Type': 'application/json',\n            'Authorization': f'Bearer {token}'\n        }\n        self.request_id = 0\n\n    def call(self, method, params=None):\n        self.request_id += 1\n        payload = {\n            'jsonrpc': '2.0',\n            'id': self.request_id,\n            'method': method,\n            'params': params or {}\n        }\n        response = requests.post(self.url, json=payload, headers=self.headers)\n        return response.json()\n\n# Usage\nclient = MCPClient('http://localhost:8080/rpc', 'YOUR_TOKEN')\n\n# Initialize\nclient.call('initialize', {\n    'protocolVersion': '2024-11-05',\n    'capabilities': {},\n    'clientInfo': {\n        'name': 'python-client',\n        'version': '1.0.0'\n    }\n})\n\n# List tools\ntools = client.call('tools/list')\n\n# Call a tool\nresult = client.call('tools/call', {\n    'name': 'python-black',\n    'arguments': {\n        'files': ['main.py'],\n        'fix': True\n    }\n})\n</code></pre>"},{"location":"mcp-tool-api/#performance-considerations","title":"Performance Considerations","text":"<ol> <li>Batch Operations: Use batch requests when calling multiple tools</li> <li>Parallel Execution: Enable <code>parallel: true</code> for project-wide validations</li> <li>Resource Caching: Resources are cached for 5 minutes by default</li> <li>Connection Pooling: Reuse HTTP connections for multiple requests</li> <li>Timeout Configuration: Default timeout is 30 seconds per tool</li> </ol>"},{"location":"mcp-tool-api/#troubleshooting","title":"Troubleshooting","text":""},{"location":"mcp-tool-api/#common-issues","title":"Common Issues","text":"<ol> <li>Authentication Failed</li> <li>Verify Bearer token is correct</li> <li> <p>Check token is properly configured in environment</p> </li> <li> <p>Tool Not Found</p> </li> <li>Ensure tool name is spelled correctly</li> <li> <p>Check tool is installed in container</p> </li> <li> <p>File Not Found</p> </li> <li>Use absolute paths or paths relative to workspace</li> <li> <p>Verify file exists before calling tool</p> </li> <li> <p>Timeout Errors</p> </li> <li>Increase timeout for large files</li> <li>Use batch operations for better performance</li> </ol>"},{"location":"mcp-tool-api/#debug-mode","title":"Debug Mode","text":"<p>Enable debug logging: <pre><code>export LOG_LEVEL=debug\nexport MCP_DEBUG=true\n</code></pre></p>"},{"location":"mcp-tool-api/#health-check","title":"Health Check","text":"<p>Check server health: <pre><code>curl http://localhost:8080/health\n</code></pre></p>"},{"location":"mcp-tool-api/#support","title":"Support","text":"<ul> <li>GitHub Issues: https://github.com/huskycats/huskycats-bates/issues</li> <li>Documentation: https://github.com/huskycats/huskycats-bates/docs</li> <li>MCP Specification: https://modelcontextprotocol.org</li> </ul>"},{"location":"troubleshooting/","title":"Troubleshooting Guide","text":"<p>Common issues and solutions for HuskyCat.</p>"},{"location":"troubleshooting/#installation-issues","title":"Installation Issues","text":""},{"location":"troubleshooting/#binary-download-fails","title":"Binary Download Fails","text":"<p>Problem: <code>curl</code> command fails or times out</p> <p>Solutions:</p> <pre><code># Use wget instead of curl\nwget -O huskycat https://gitlab.com/tinyland/ai/huskycat/-/releases/permalink/latest/downloads/huskycat-linux-amd64\n\n# Use verbose mode to see what's failing\ncurl -v -L -o huskycat https://gitlab.com/tinyland/ai/huskycat/-/releases/permalink/latest/downloads/huskycat-linux-amd64\n\n# Check network connectivity\nping gitlab.com\n</code></pre>"},{"location":"troubleshooting/#permission-denied-when-running-binary","title":"\"Permission denied\" When Running Binary","text":"<p>Problem: Binary downloads but won't execute</p> <p>Solutions:</p> <pre><code># Make binary executable\nchmod +x huskycat\n\n# Check file permissions\nls -l huskycat\n\n# Move to a directory with execute permissions\nmkdir -p ~/.local/bin\nmv huskycat ~/.local/bin/\n</code></pre>"},{"location":"troubleshooting/#macos-cannot-verify-developer-warning","title":"macOS \"Cannot verify developer\" Warning","text":"<p>Problem: macOS blocks unsigned binary</p> <p>Solutions:</p> <pre><code># Method 1: Remove quarantine attribute\nxattr -d com.apple.quarantine huskycat\n\n# Method 2: Allow in System Settings\n# 1. Try to run binary: ./huskycat\n# 2. Go to System Settings &gt; Privacy &amp; Security\n# 3. Click \"Allow Anyway\" next to the huskycat warning\n# 4. Run binary again and click \"Open\"\n\n# Method 3: Disable Gatekeeper temporarily (not recommended)\nsudo spctl --master-disable\n./huskycat --version\nsudo spctl --master-enable\n</code></pre>"},{"location":"troubleshooting/#binary-not-found-after-installation","title":"Binary Not Found After Installation","text":"<p>Problem: <code>huskycat: command not found</code></p> <p>Solutions:</p> <pre><code># Check if binary exists\nls -l ~/.local/bin/huskycat\n\n# Check if directory is in PATH\necho $PATH | grep -q \"$HOME/.local/bin\" &amp;&amp; echo \"\u2713 In PATH\" || echo \"\u2717 Not in PATH\"\n\n# Add to PATH (bash)\necho 'export PATH=\"$HOME/.local/bin:$PATH\"' &gt;&gt; ~/.bashrc\nsource ~/.bashrc\n\n# Add to PATH (zsh)\necho 'export PATH=\"$HOME/.local/bin:$PATH\"' &gt;&gt; ~/.zshrc\nsource ~/.zshrc\n\n# Use full path temporarily\n~/.local/bin/huskycat --version\n</code></pre>"},{"location":"troubleshooting/#container-runtime-issues","title":"Container Runtime Issues","text":""},{"location":"troubleshooting/#no-container-runtime-available","title":"\"No container runtime available\"","text":"<p>Problem: HuskyCat can't find Podman or Docker</p> <p>Solutions:</p> <pre><code># Check if container runtime is installed\nwhich podman || which docker\n\n# Install Podman (recommended)\n# macOS:\nbrew install podman\n\n# Ubuntu/Debian:\nsudo apt-get update &amp;&amp; sudo apt-get install -y podman\n\n# Rocky Linux/RHEL:\nsudo dnf install -y podman\n\n# Verify installation\npodman --version\n# or\ndocker --version\n</code></pre>"},{"location":"troubleshooting/#podman-machine-not-started-macos","title":"Podman Machine Not Started (macOS)","text":"<p>Problem: <code>Error: unable to connect to Podman socket</code></p> <p>Solutions:</p> <pre><code># Initialize Podman machine\npodman machine init\n\n# Start Podman machine\npodman machine start\n\n# Check status\npodman machine list\n\n# Restart if needed\npodman machine stop\npodman machine start\n</code></pre>"},{"location":"troubleshooting/#docker-permission-denied-linux","title":"Docker Permission Denied (Linux)","text":"<p>Problem: <code>permission denied while trying to connect to the Docker daemon socket</code></p> <p>Solutions:</p> <pre><code># Method 1: Add user to docker group (recommended)\nsudo usermod -aG docker $USER\nnewgrp docker\n\n# Method 2: Use sudo (not recommended for regular use)\nsudo huskycat validate\n\n# Method 3: Use Podman instead (rootless)\nbrew install podman  # or apt/dnf install\n</code></pre>"},{"location":"troubleshooting/#container-build-fails","title":"Container Build Fails","text":"<p>Problem: <code>npm run container:build</code> fails</p> <p>Solutions:</p> <pre><code># Check Podman/Docker is working\npodman run --rm hello-world\n# or\ndocker run --rm hello-world\n\n# Clean build cache\npodman system prune -a\n# or\ndocker system prune -a\n\n# Rebuild with verbose output\npodman build -t huskycat-validator:latest -f ContainerFile . --no-cache\n</code></pre>"},{"location":"troubleshooting/#validation-issues","title":"Validation Issues","text":""},{"location":"troubleshooting/#tool-not-found-errors","title":"\"Tool not found\" Errors","text":"<p>Problem: Validator reports missing tool</p> <p>Solutions:</p> <pre><code># HuskyCat should run tools in containers - this usually means container runtime issues\n# Check container is working\nhuskycat status\n\n# Rebuild validation container\ncd /path/to/huskycats-bates\nnpm run container:build\n\n# Verify container has tools\npodman run --rm huskycat-validator:latest black --version\n</code></pre>"},{"location":"troubleshooting/#validation-hangs-or-times-out","title":"Validation Hangs or Times Out","text":"<p>Problem: Validation never completes</p> <p>Solutions:</p> <pre><code># Run with verbose logging\nHUSKYCAT_LOG_LEVEL=DEBUG huskycat validate\n\n# Check which file is causing the hang\nhuskycat validate --verbose src/\n\n# Skip slow validators temporarily\nhuskycat validate --skip-validator mypy\n\n# Increase timeout (if configurable)\nexport HUSKYCAT_TIMEOUT=300\n</code></pre>"},{"location":"troubleshooting/#false-positive-errors","title":"False Positive Errors","text":"<p>Problem: Validator reports errors that aren't real issues</p> <p>Solutions:</p> <pre><code># Check tool-specific configuration\ncat pyproject.toml  # Black, MyPy, Ruff config\ncat .flake8         # Flake8 config\ncat .eslintrc.json  # ESLint config\n\n# Disable specific rules\n# In pyproject.toml:\n# [tool.flake8]\n# ignore = E501,W503\n\n# Update validation schemas\nhuskycat update-schemas\n\n# Report false positives\n# File issue: https://gitlab.com/tinyland/ai/huskycat/-/issues\n</code></pre>"},{"location":"troubleshooting/#git-hooks-issues","title":"Git Hooks Issues","text":""},{"location":"troubleshooting/#hooks-not-running","title":"Hooks Not Running","text":"<p>Problem: Git commits don't trigger validation</p> <p>Solutions:</p> <pre><code># Check hooks are installed\nls -la .git/hooks/\n\n# Reinstall hooks\nhuskycat setup-hooks --force\n\n# Check hook permissions\nchmod +x .git/hooks/pre-commit\nchmod +x .git/hooks/pre-push\n\n# Verify hooks point to correct binary\ncat .git/hooks/pre-commit\nhead -1 .git/hooks/pre-commit  # Should show correct shebang\n\n# Check Git hooks path\ngit config core.hooksPath  # Should be empty or .git/hooks\n</code></pre>"},{"location":"troubleshooting/#hooks-too-slow","title":"Hooks Too Slow","text":"<p>Problem: Pre-commit hook takes too long</p> <p>Solutions:</p> <pre><code># Validate only staged files (should be default)\n# Check pre-commit hook uses --staged flag\ncat .git/hooks/pre-commit | grep -- --staged\n\n# Skip hooks temporarily\nSKIP_HOOKS=1 git commit -m \"message\"\n\n# Or use git commit flag\ngit commit --no-verify -m \"message\"\n\n# Reduce validators in git hooks mode\n# Edit .huskycat/config.json to disable slow validators for hooks\n</code></pre>"},{"location":"troubleshooting/#hook-fails-on-valid-code","title":"Hook Fails on Valid Code","text":"<p>Problem: Commit blocked but code looks correct</p> <p>Solutions:</p> <pre><code># Run validation manually to see full output\nhuskycat validate --staged\n\n# Check for tool version mismatches\nhuskycat status\n\n# Update schemas\nhuskycat update-schemas\n\n# Skip hooks if urgent (fix later)\ngit commit --no-verify -m \"urgent: [will fix validation]\"\n</code></pre>"},{"location":"troubleshooting/#mcp-server-issues","title":"MCP Server Issues","text":""},{"location":"troubleshooting/#claude-code-cant-connect","title":"Claude Code Can't Connect","text":"<p>Problem: HuskyCat MCP tools not available in Claude Code</p> <p>Solutions:</p> <pre><code># Check MCP configuration\ncat ~/Library/Application\\ Support/Claude/claude_desktop_config.json\n\n# Verify binary path is correct\nwhich huskycat\n\n# Test MCP server manually\necho '{\"jsonrpc\":\"2.0\",\"method\":\"initialize\",\"params\":{},\"id\":1}' | huskycat mcp-server\n\n# Reconfigure with bootstrap\nhuskycat bootstrap --force\n\n# Check Claude Code logs\n# macOS: ~/Library/Logs/Claude/\n# Linux: ~/.config/Claude/logs/\n</code></pre>"},{"location":"troubleshooting/#mcp-tools-timeout","title":"MCP Tools Timeout","text":"<p>Problem: MCP validation requests time out</p> <p>Solutions:</p> <pre><code># Check container runtime is working\npodman ps\n\n# Reduce scope of validation\n# Instead of validating whole directory, validate specific files\n\n# Increase Claude Code timeout (if configurable)\n# Edit claude_desktop_config.json to add timeout setting\n</code></pre>"},{"location":"troubleshooting/#mcp-server-crashes","title":"MCP Server Crashes","text":"<p>Problem: MCP server stops responding</p> <p>Solutions:</p> <pre><code># Check for errors in Claude Code logs\ntail -f ~/Library/Logs/Claude/mcp-server.log\n\n# Run server with debug logging\nHUSKYCAT_LOG_LEVEL=DEBUG huskycat mcp-server\n\n# Restart Claude Code completely\n# macOS: Cmd+Q then reopen\n# Linux: killall claude; claude &amp;\n</code></pre>"},{"location":"troubleshooting/#cicd-issues","title":"CI/CD Issues","text":""},{"location":"troubleshooting/#gitlab-ci-job-fails","title":"GitLab CI Job Fails","text":"<p>Problem: Validation job fails in GitLab CI</p> <p>Solutions:</p> <pre><code># Add debug output\nvalidate:all:\n  script:\n    - huskycat --version\n    - huskycat status\n    - huskycat --verbose validate --all\n\n# Check container runtime in CI\nvalidate:all:\n  before_script:\n    - which podman || which docker\n    - podman --version || docker --version\n\n# Use correct image\nvalidate:all:\n  image: registry.gitlab.com/tinyland/ai/huskycat/validator:latest\n</code></pre>"},{"location":"troubleshooting/#github-actions-job-fails","title":"GitHub Actions Job Fails","text":"<p>Problem: Workflow fails to download or run HuskyCat</p> <p>Solutions:</p> <pre><code># Add retry logic\n- name: Download HuskyCat\n  uses: nick-fields/retry@v2\n  with:\n    timeout_minutes: 5\n    max_attempts: 3\n    command: |\n      curl -L -o /usr/local/bin/huskycat https://gitlab.com/tinyland/ai/huskycat/-/releases/permalink/latest/downloads/huskycat-linux-amd64\n      chmod +x /usr/local/bin/huskycat\n\n# Verify download\n- name: Verify HuskyCat\n  run: |\n    huskycat --version\n    huskycat status\n</code></pre>"},{"location":"troubleshooting/#ci-validation-different-from-local","title":"CI Validation Different from Local","text":"<p>Problem: CI reports errors that don't appear locally</p> <p>Solutions:</p> <pre><code># Force CI mode locally\nhuskycat --mode ci validate --all\n\n# Check tool versions\nhuskycat status  # Local\n# Compare with CI job output\n\n# Use same container as CI\npodman run --rm -v $(pwd):/workspace registry.gitlab.com/tinyland/ai/huskycat/validator:latest validate --all\n</code></pre>"},{"location":"troubleshooting/#performance-issues","title":"Performance Issues","text":""},{"location":"troubleshooting/#slow-validation","title":"Slow Validation","text":"<p>Problem: Validation takes too long</p> <p>Solutions:</p> <pre><code># Identify slow validators\nhuskycat --verbose validate --all\n\n# Skip slow validators for quick checks\nhuskycat validate --skip-validator mypy --all\n\n# Use specific validators only\nhuskycat validate --validator black,ruff --all\n\n# Clean cache\nhuskycat clean\n\n# Validate changed files only\ngit diff --name-only | xargs huskycat validate\n</code></pre>"},{"location":"troubleshooting/#high-memory-usage","title":"High Memory Usage","text":"<p>Problem: HuskyCat uses too much memory</p> <p>Solutions:</p> <pre><code># Validate in batches\nfind src/ -name \"*.py\" | xargs -n 10 huskycat validate\n\n# Limit container memory (Podman)\npodman run --memory=2g huskycat-validator:latest\n\n# Clean up old containers\npodman system prune -a\n</code></pre>"},{"location":"troubleshooting/#architecture-issues","title":"Architecture Issues","text":""},{"location":"troubleshooting/#exec-format-error","title":"\"exec format error\"","text":"<p>Problem: Binary won't run due to architecture mismatch</p> <p>Solutions:</p> <pre><code># Check your architecture\nuname -m\n# x86_64 \u2192 Use huskycat-linux-amd64\n# aarch64/arm64 \u2192 Use huskycat-linux-arm64 or huskycat-darwin-arm64\n\n# Download correct binary\n# For ARM64 Linux:\ncurl -L -o huskycat https://gitlab.com/tinyland/ai/huskycat/-/releases/permalink/latest/downloads/huskycat-linux-arm64\n\n# For Apple Silicon:\ncurl -L -o huskycat https://gitlab.com/tinyland/ai/huskycat/-/releases/permalink/latest/downloads/huskycat-darwin-arm64\n\n# Verify binary architecture\nfile huskycat\n</code></pre>"},{"location":"troubleshooting/#rosetta-2-issues-macos-intel-binary-on-apple-silicon","title":"Rosetta 2 Issues (macOS Intel Binary on Apple Silicon)","text":"<p>Problem: Trying to use Intel binary on Apple Silicon</p> <p>Solution:</p> <pre><code># Use native Apple Silicon binary\ncurl -L -o huskycat https://gitlab.com/tinyland/ai/huskycat/-/releases/permalink/latest/downloads/huskycat-darwin-arm64\nchmod +x huskycat\n</code></pre>"},{"location":"troubleshooting/#configuration-issues","title":"Configuration Issues","text":""},{"location":"troubleshooting/#config-file-not-found","title":"Config File Not Found","text":"<p>Problem: HuskyCat ignores configuration</p> <p>Solutions:</p> <pre><code># Check config location\nhuskycat status | grep -i config\n\n# Create config directory\nmkdir -p .huskycat\n\n# Create default config\ncat &gt; .huskycat/config.json &lt;&lt;EOF\n{\n  \"validators\": {\n    \"python-black\": {\"enabled\": true},\n    \"mypy\": {\"enabled\": true},\n    \"flake8\": {\"enabled\": true},\n    \"ruff\": {\"enabled\": true}\n  }\n}\nEOF\n</code></pre>"},{"location":"troubleshooting/#tool-specific-config-ignored","title":"Tool-Specific Config Ignored","text":"<p>Problem: Black/MyPy/Flake8 config not respected</p> <p>Solutions:</p> <pre><code># HuskyCat respects standard config files\n# Ensure they're in the right location\n\n# Black: pyproject.toml\n[tool.black]\nline-length = 100\n\n# MyPy: myproject.toml or mypy.ini\n[tool.mypy]\nstrict = true\n\n# Flake8: .flake8 or setup.cfg\n[flake8]\nmax-line-length = 100\n\n# ESLint: .eslintrc.json\n{\n  \"extends\": \"eslint:recommended\"\n}\n</code></pre>"},{"location":"troubleshooting/#getting-help","title":"Getting Help","text":""},{"location":"troubleshooting/#debug-logging","title":"Debug Logging","text":"<p>Enable verbose logging to diagnose issues:</p> <pre><code># Level 1: Basic debug info\nhuskycat -v validate\n\n# Level 2: More detail\nhuskycat -vv validate\n\n# Level 3: Maximum verbosity\nhuskycat -vvv validate\n\n# Or use environment variable\nHUSKYCAT_LOG_LEVEL=DEBUG huskycat validate\n</code></pre>"},{"location":"troubleshooting/#collect-system-information","title":"Collect System Information","text":"<p>When reporting issues, include this information:</p> <pre><code># HuskyCat version and status\nhuskycat --version\nhuskycat status\n\n# System information\nuname -a\npython --version || python3 --version\n\n# Container runtime\npodman --version || docker --version\n\n# Git version (if hooks issue)\ngit --version\n\n# Tool versions\nblack --version\nmypy --version\nflake8 --version\n</code></pre>"},{"location":"troubleshooting/#report-issues","title":"Report Issues","text":"<p>File issues on GitLab:</p> <p>https://gitlab.com/tinyland/ai/huskycat/-/issues</p> <p>Include: 1. System information (from above) 2. Full error message 3. Steps to reproduce 4. Expected vs actual behavior 5. Relevant configuration files</p>"},{"location":"troubleshooting/#quick-reference","title":"Quick Reference","text":""},{"location":"troubleshooting/#common-commands","title":"Common Commands","text":"<pre><code># Reset everything\nhuskycat clean --all\nhuskycat update-schemas\nhuskycat setup-hooks --force\n\n# Debug validation\nHUSKYCAT_LOG_LEVEL=DEBUG huskycat validate\n\n# Skip hooks\nSKIP_HOOKS=1 git commit -m \"message\"\ngit push --no-verify\n\n# Force mode\nhuskycat --mode ci validate --all\nhuskycat --json validate &gt; results.json\n\n# Check status\nhuskycat status\npodman ps || docker ps\n</code></pre>"},{"location":"troubleshooting/#environment-variables","title":"Environment Variables","text":"<pre><code># Debug logging\nexport HUSKYCAT_LOG_LEVEL=DEBUG\n\n# Skip hooks\nexport SKIP_HOOKS=1\n\n# Force mode\nexport HUSKYCAT_MODE=cli\n\n# Custom config directory\nexport HUSKYCAT_CONFIG_DIR=/path/to/config\n</code></pre> <p>For installation help, see Installation Guide.</p> <p>For binary issues, see Binary Downloads.</p> <p>For CLI usage, see CLI Reference.</p>"},{"location":"api/mcp-tools/","title":"MCP Tools API Reference","text":"<p>This document provides detailed API specifications for all MCP tools exposed by HuskyCat's MCP server.</p>"},{"location":"api/mcp-tools/#tool-discovery","title":"Tool Discovery","text":"<p>The MCP server exposes tools through the standard <code>tools/list</code> method.</p>"},{"location":"api/mcp-tools/#request","title":"Request","text":"<pre><code>{\n  \"jsonrpc\": \"2.0\",\n  \"method\": \"tools/list\",\n  \"id\": 1\n}\n</code></pre>"},{"location":"api/mcp-tools/#response","title":"Response","text":"<pre><code>{\n  \"jsonrpc\": \"2.0\",\n  \"id\": 1,\n  \"result\": {\n    \"tools\": [\n      {\n        \"name\": \"validate\",\n        \"description\": \"Validate code files with appropriate linters\",\n        \"inputSchema\": {\n          \"type\": \"object\",\n          \"properties\": {\n            \"path\": {\n              \"type\": \"string\",\n              \"description\": \"File or directory path to validate\"\n            },\n            \"fix\": {\n              \"type\": \"boolean\",\n              \"description\": \"Auto-fix issues where possible\",\n              \"default\": false\n            }\n          },\n          \"required\": [\"path\"]\n        }\n      }\n      // ... other tools\n    ]\n  }\n}\n</code></pre>"},{"location":"api/mcp-tools/#core-tools","title":"Core Tools","text":""},{"location":"api/mcp-tools/#validate","title":"<code>validate</code>","text":"<p>Universal validation tool that runs all applicable validators on the specified path.</p>"},{"location":"api/mcp-tools/#input-schema","title":"Input Schema","text":"<pre><code>{\n  \"type\": \"object\",\n  \"properties\": {\n    \"path\": {\n      \"type\": \"string\",\n      \"description\": \"File or directory path to validate\"\n    },\n    \"fix\": {\n      \"type\": \"boolean\",\n      \"description\": \"Auto-fix issues where possible\",\n      \"default\": false\n    }\n  },\n  \"required\": [\"path\"]\n}\n</code></pre>"},{"location":"api/mcp-tools/#example-request","title":"Example Request","text":"<pre><code>{\n  \"jsonrpc\": \"2.0\",\n  \"method\": \"tools/call\",\n  \"params\": {\n    \"name\": \"validate\",\n    \"arguments\": {\n      \"path\": \"src/\",\n      \"fix\": true\n    }\n  },\n  \"id\": 2\n}\n</code></pre>"},{"location":"api/mcp-tools/#example-response","title":"Example Response","text":"<pre><code>{\n  \"jsonrpc\": \"2.0\",\n  \"id\": 2,\n  \"result\": {\n    \"content\": [\n      {\n        \"type\": \"text\",\n        \"text\": \"{\\n  \\\"summary\\\": {\\n    \\\"total_files\\\": 5,\\n    \\\"passed_files\\\": 4,\\n    \\\"failed_files\\\": 1,\\n    \\\"total_errors\\\": 2,\\n    \\\"total_warnings\\\": 1,\\n    \\\"failed_file_list\\\": [\\\"src/main.py\\\"],\\n    \\\"success\\\": false\\n  },\\n  \\\"results\\\": {\\n    \\\"src/main.py\\\": [\\n      {\\n        \\\"tool\\\": \\\"black\\\",\\n        \\\"filepath\\\": \\\"src/main.py\\\",\\n        \\\"success\\\": false,\\n        \\\"messages\\\": [\\\"reformatted src/main.py\\\"],\\n        \\\"errors\\\": [],\\n        \\\"warnings\\\": [],\\n        \\\"fixed\\\": true,\\n        \\\"duration_ms\\\": 45\\n      }\\n    ]\\n  }\\n}\"\n      }\n    ]\n  }\n}\n</code></pre>"},{"location":"api/mcp-tools/#validate_staged","title":"<code>validate_staged</code>","text":"<p>Validates files that are staged for Git commit.</p>"},{"location":"api/mcp-tools/#input-schema_1","title":"Input Schema","text":"<pre><code>{\n  \"type\": \"object\",\n  \"properties\": {\n    \"fix\": {\n      \"type\": \"boolean\",\n      \"description\": \"Auto-fix issues where possible\",\n      \"default\": false\n    }\n  }\n}\n</code></pre>"},{"location":"api/mcp-tools/#example-request_1","title":"Example Request","text":"<pre><code>{\n  \"jsonrpc\": \"2.0\",\n  \"method\": \"tools/call\",\n  \"params\": {\n    \"name\": \"validate_staged\",\n    \"arguments\": {\n      \"fix\": false\n    }\n  },\n  \"id\": 3\n}\n</code></pre>"},{"location":"api/mcp-tools/#individual-validator-tools","title":"Individual Validator Tools","text":"<p>Each validator is exposed as a separate tool for targeted validation. The tool name follows the pattern <code>validate_{validator_name}</code>.</p>"},{"location":"api/mcp-tools/#validate_python-black","title":"<code>validate_python-black</code>","text":"<p>Python code formatter using Black.</p>"},{"location":"api/mcp-tools/#input-schema_2","title":"Input Schema","text":"<pre><code>{\n  \"type\": \"object\",\n  \"properties\": {\n    \"path\": {\n      \"type\": \"string\",\n      \"description\": \"Python file path to format\"\n    },\n    \"fix\": {\n      \"type\": \"boolean\",\n      \"description\": \"Apply Black formatting\",\n      \"default\": false\n    }\n  },\n  \"required\": [\"path\"]\n}\n</code></pre>"},{"location":"api/mcp-tools/#validate_flake8","title":"<code>validate_flake8</code>","text":"<p>Python linter using Flake8.</p>"},{"location":"api/mcp-tools/#input-schema_3","title":"Input Schema","text":"<pre><code>{\n  \"type\": \"object\",\n  \"properties\": {\n    \"path\": {\n      \"type\": \"string\",\n      \"description\": \"Python file path to lint\"\n    },\n    \"fix\": {\n      \"type\": \"boolean\",\n      \"description\": \"Auto-fix issues where possible\",\n      \"default\": false\n    }\n  },\n  \"required\": [\"path\"]\n}\n</code></pre>"},{"location":"api/mcp-tools/#validate_mypy","title":"<code>validate_mypy</code>","text":"<p>Python type checker using MyPy.</p>"},{"location":"api/mcp-tools/#input-schema_4","title":"Input Schema","text":"<pre><code>{\n  \"type\": \"object\",\n  \"properties\": {\n    \"path\": {\n      \"type\": \"string\",\n      \"description\": \"Python file path to type check\"\n    },\n    \"fix\": {\n      \"type\": \"boolean\",\n      \"description\": \"Auto-fix issues where possible\",\n      \"default\": false\n    }\n  },\n  \"required\": [\"path\"]\n}\n</code></pre>"},{"location":"api/mcp-tools/#validate_js-eslint","title":"<code>validate_js-eslint</code>","text":"<p>JavaScript/TypeScript linter using ESLint.</p>"},{"location":"api/mcp-tools/#input-schema_5","title":"Input Schema","text":"<pre><code>{\n  \"type\": \"object\",\n  \"properties\": {\n    \"path\": {\n      \"type\": \"string\",\n      \"description\": \"JavaScript/TypeScript file path to lint\"\n    },\n    \"fix\": {\n      \"type\": \"boolean\",\n      \"description\": \"Apply ESLint fixes\",\n      \"default\": false\n    }\n  },\n  \"required\": [\"path\"]\n}\n</code></pre>"},{"location":"api/mcp-tools/#validate_yamllint","title":"<code>validate_yamllint</code>","text":"<p>YAML validator using yamllint.</p>"},{"location":"api/mcp-tools/#input-schema_6","title":"Input Schema","text":"<pre><code>{\n  \"type\": \"object\",\n  \"properties\": {\n    \"path\": {\n      \"type\": \"string\",\n      \"description\": \"YAML file path to validate\"\n    },\n    \"fix\": {\n      \"type\": \"boolean\",\n      \"description\": \"Auto-fix issues where possible\",\n      \"default\": false\n    }\n  },\n  \"required\": [\"path\"]\n}\n</code></pre>"},{"location":"api/mcp-tools/#validate_docker-hadolint","title":"<code>validate_docker-hadolint</code>","text":"<p>Dockerfile/ContainerFile linter using hadolint.</p>"},{"location":"api/mcp-tools/#input-schema_7","title":"Input Schema","text":"<pre><code>{\n  \"type\": \"object\",\n  \"properties\": {\n    \"path\": {\n      \"type\": \"string\",\n      \"description\": \"Dockerfile path to validate\"\n    },\n    \"fix\": {\n      \"type\": \"boolean\",\n      \"description\": \"Auto-fix issues where possible\",\n      \"default\": false\n    }\n  },\n  \"required\": [\"path\"]\n}\n</code></pre>"},{"location":"api/mcp-tools/#validate_shellcheck","title":"<code>validate_shellcheck</code>","text":"<p>Shell script validator using shellcheck.</p>"},{"location":"api/mcp-tools/#input-schema_8","title":"Input Schema","text":"<pre><code>{\n  \"type\": \"object\",\n  \"properties\": {\n    \"path\": {\n      \"type\": \"string\",\n      \"description\": \"Shell script path to validate\"\n    },\n    \"fix\": {\n      \"type\": \"boolean\",\n      \"description\": \"Auto-fix issues where possible\",\n      \"default\": false\n    }\n  },\n  \"required\": [\"path\"]\n}\n</code></pre>"},{"location":"api/mcp-tools/#response-format","title":"Response Format","text":"<p>All tools return responses in the same format:</p>"},{"location":"api/mcp-tools/#success-response","title":"Success Response","text":"<pre><code>{\n  \"jsonrpc\": \"2.0\",\n  \"id\": \"&lt;request_id&gt;\",\n  \"result\": {\n    \"content\": [\n      {\n        \"type\": \"text\",\n        \"text\": \"&lt;JSON_formatted_results&gt;\"\n      }\n    ]\n  }\n}\n</code></pre>"},{"location":"api/mcp-tools/#error-response","title":"Error Response","text":"<pre><code>{\n  \"jsonrpc\": \"2.0\",\n  \"id\": \"&lt;request_id&gt;\",\n  \"error\": {\n    \"code\": -32603,\n    \"message\": \"Internal error: &lt;error_description&gt;\"\n  }\n}\n</code></pre>"},{"location":"api/mcp-tools/#result-objects","title":"Result Objects","text":""},{"location":"api/mcp-tools/#validationresult","title":"ValidationResult","text":"<p>Individual validation results are returned as <code>ValidationResult</code> objects:</p> <pre><code>{\n  \"tool\": \"black\",\n  \"filepath\": \"src/main.py\",\n  \"success\": true,\n  \"messages\": [\"File is properly formatted\"],\n  \"errors\": [],\n  \"warnings\": [],\n  \"fixed\": false,\n  \"duration_ms\": 42\n}\n</code></pre>"},{"location":"api/mcp-tools/#fields","title":"Fields","text":"<ul> <li><code>tool</code>: Name of the validator that produced this result</li> <li><code>filepath</code>: Path to the validated file</li> <li><code>success</code>: Whether validation passed (no errors)</li> <li><code>messages</code>: General messages from the validator</li> <li><code>errors</code>: List of error messages (validation failures)</li> <li><code>warnings</code>: List of warning messages (non-blocking issues)</li> <li><code>fixed</code>: Whether auto-fixes were applied</li> <li><code>duration_ms</code>: Time taken for validation in milliseconds</li> </ul>"},{"location":"api/mcp-tools/#summary-object","title":"Summary Object","text":"<p>Aggregate summary of all validation results:</p> <pre><code>{\n  \"total_files\": 5,\n  \"passed_files\": 4,\n  \"failed_files\": 1,\n  \"total_errors\": 2,\n  \"total_warnings\": 1,\n  \"failed_file_list\": [\"src/main.py\"],\n  \"success\": false\n}\n</code></pre>"},{"location":"api/mcp-tools/#fields_1","title":"Fields","text":"<ul> <li><code>total_files</code>: Total number of files validated</li> <li><code>passed_files</code>: Number of files that passed all validators</li> <li><code>failed_files</code>: Number of files with at least one validation error</li> <li><code>total_errors</code>: Total count of all errors across all files</li> <li><code>total_warnings</code>: Total count of all warnings across all files</li> <li><code>failed_file_list</code>: List of file paths that have validation errors</li> <li><code>success</code>: Overall validation status (true if no files failed)</li> </ul>"},{"location":"api/mcp-tools/#error-codes","title":"Error Codes","text":"<p>The MCP server uses standard JSON-RPC error codes:</p> Code Meaning Description -32700 Parse error Invalid JSON was received -32600 Invalid Request The JSON sent is not a valid Request object -32601 Method not found The method does not exist / is not available -32602 Invalid params Invalid method parameter(s) -32603 Internal error Internal JSON-RPC error"},{"location":"api/mcp-tools/#rate-limiting","title":"Rate Limiting","text":"<p>The MCP server does not implement rate limiting, but individual validators may have their own performance characteristics:</p> <ul> <li>Fast validators (&lt; 100ms): Black, yamllint, shellcheck</li> <li>Medium validators (100-500ms): Flake8, ESLint</li> <li>Slow validators (&gt; 500ms): MyPy (especially on large codebases)</li> </ul>"},{"location":"api/mcp-tools/#debugging","title":"Debugging","text":""},{"location":"api/mcp-tools/#enable-debug-logging","title":"Enable Debug Logging","text":"<p>Set the environment variable before starting the MCP server:</p> <pre><code>HUSKYCAT_LOG_LEVEL=DEBUG huskycat mcp-server\n</code></pre>"},{"location":"api/mcp-tools/#manual-testing","title":"Manual Testing","text":"<p>You can test the MCP server manually using stdin/stdout:</p> <pre><code># Start the server\nhuskycat mcp-server\n\n# Send initialization request\necho '{\"jsonrpc\":\"2.0\",\"method\":\"initialize\",\"params\":{},\"id\":1}'\n\n# List tools\necho '{\"jsonrpc\":\"2.0\",\"method\":\"tools/list\",\"params\":{},\"id\":2}'\n\n# Call a tool\necho '{\"jsonrpc\":\"2.0\",\"method\":\"tools/call\",\"params\":{\"name\":\"validate\",\"arguments\":{\"path\":\".\"}},\"id\":3}'\n</code></pre> <p>For more information about MCP integration, see the MCP Server Guide.</p>"},{"location":"architecture/simplified-architecture/","title":"HuskyCat Simplified Architecture","text":""},{"location":"architecture/simplified-architecture/#overview","title":"Overview","text":"<p>HuskyCat is a streamlined code validation platform that provides comprehensive validation tools through a simple, unified interface. This document outlines the simplified architecture after removing redundancy and consolidating implementations.</p>"},{"location":"architecture/simplified-architecture/#core-principles","title":"Core Principles","text":"<ol> <li>Single Source of Truth: One validation engine with multiple interfaces</li> <li>Minimal Configuration: Works out-of-the-box with sensible defaults</li> <li>Container-First: All tools pre-installed in optimized containers</li> <li>Easy Installation: One-line installer for any repository</li> </ol>"},{"location":"architecture/simplified-architecture/#architecture-components","title":"Architecture Components","text":""},{"location":"architecture/simplified-architecture/#1-unified-validation-engine","title":"1. Unified Validation Engine","text":"<pre><code>src/\n\u251c\u2500\u2500 core/\n\u2502   \u251c\u2500\u2500 validation-engine.py    # Core validation logic\n\u2502   \u251c\u2500\u2500 tool-registry.py        # Tool discovery and registration\n\u2502   \u2514\u2500\u2500 result-formatter.py     # Unified result formatting\n\u251c\u2500\u2500 interfaces/\n\u2502   \u251c\u2500\u2500 cli.py                  # Command-line interface\n\u2502   \u251c\u2500\u2500 mcp-stdio.py            # MCP stdio server\n\u2502   \u2514\u2500\u2500 git-hooks.py            # Git hook integration\n\u2514\u2500\u2500 tools/\n    \u251c\u2500\u2500 python/                 # Python validators\n    \u251c\u2500\u2500 javascript/             # JS/TS validators\n    \u251c\u2500\u2500 yaml/                   # YAML validators\n    \u2514\u2500\u2500 security/               # Security scanners\n</code></pre>"},{"location":"architecture/simplified-architecture/#2-container-architecture","title":"2. Container Architecture","text":"<p>Production Container (Alpine-based): - Size: ~200MB - All validation tools pre-installed - Read-only filesystem except /tmp and /workspace - Non-root user (UID 1001) - Optimized for speed</p> <p>Development Container (Alpine-based with extras): - Size: ~400MB - Includes debugging tools - Write access for development - Additional language servers</p>"},{"location":"architecture/simplified-architecture/#3-mcp-server-simplified","title":"3. MCP Server (Simplified)","text":"<p>The MCP server is now a simple stdio-based server that: - Reads JSON-RPC requests from stdin - Executes validation tools - Writes responses to stdout - No HTTP layer, no complexity</p> <pre><code># Simple stdio MCP server\nimport sys\nimport json\nfrom validation_engine import ValidationEngine\n\nengine = ValidationEngine()\n\nwhile True:\n    request = json.loads(sys.stdin.readline())\n    result = engine.validate(request)\n    sys.stdout.write(json.dumps(result) + '\\n')\n    sys.stdout.flush()\n</code></pre>"},{"location":"architecture/simplified-architecture/#4-installation","title":"4. Installation","text":"<p>One-Line Installer: <pre><code>curl -fsSL https://huskycat.io/install | bash\n</code></pre></p> <p>This installer: 1. Detects platform (Linux/macOS/Windows) 2. Downloads appropriate container 3. Installs huskycat CLI 4. Sets up git hooks (optional) 5. Configures MCP server (if Claude Code detected)</p>"},{"location":"architecture/simplified-architecture/#5-configuration","title":"5. Configuration","text":"<p>Single configuration file: <code>.huskycat.yaml</code></p> <pre><code># .huskycat.yaml - All configuration in one place\nversion: 2.0\n\n# Tool configuration (all enabled by default)\ntools:\n  python:\n    black: true\n    flake8: true\n    mypy: true\n    bandit: true\n  javascript:\n    eslint: true\n    prettier: true\n  yaml:\n    yamllint: true\n  docker:\n    hadolint: true\n\n# Git hooks (opt-in)\nhooks:\n  pre-commit: true\n  commit-msg: true\n\n# MCP server (auto-detected)\nmcp:\n  enabled: auto\n  transport: stdio\n</code></pre>"},{"location":"architecture/simplified-architecture/#removed-components","title":"Removed Components","text":"<p>The following have been removed to simplify the architecture:</p> <ol> <li>Syncthing Integration (2,307 lines removed)</li> <li>All syncthing-related code</li> <li>Distributed sync features</li> <li> <p>P2P functionality</p> </li> <li> <p>HTTP MCP Server (1,000+ lines removed)</p> </li> <li>Complex HTTP layer</li> <li>Authentication middleware</li> <li> <p>Session management</p> </li> <li> <p>Duplicate Implementations (15,000+ lines removed)</p> </li> <li>Three separate validation implementations consolidated</li> <li>Redundant container scripts</li> <li> <p>Duplicate configuration systems</p> </li> <li> <p>Kubernetes Manifests (5,000+ lines removed)</p> </li> <li>Complex K8s deployments</li> <li>Duplicate manifests</li> <li>Hardcoded secrets</li> </ol>"},{"location":"architecture/simplified-architecture/#tool-support","title":"Tool Support","text":"<p>All tools run by default - no configuration needed:</p> Language Tools Python Black, Flake8, MyPy, Pylint, Bandit, Ruff JavaScript/TypeScript ESLint, Prettier, TSC Shell ShellCheck YAML YAMLLint Docker Hadolint Terraform TFLint, Checkov Go golangci-lint Security GitLeaks, TruffleHog"},{"location":"architecture/simplified-architecture/#usage-examples","title":"Usage Examples","text":""},{"location":"architecture/simplified-architecture/#cli-usage","title":"CLI Usage","text":"<pre><code># Validate all files\nhuskycat validate\n\n# Auto-fix issues\nhuskycat fix\n\n# Validate specific files\nhuskycat validate src/*.py\n\n# Use with git\ngit commit  # Automatically validates staged files\n</code></pre>"},{"location":"architecture/simplified-architecture/#mcp-integration","title":"MCP Integration","text":"<pre><code>// .claude/mcp.json\n{\n  \"servers\": {\n    \"huskycat\": {\n      \"command\": \"huskycat\",\n      \"args\": [\"mcp\", \"--stdio\"]\n    }\n  }\n}\n</code></pre>"},{"location":"architecture/simplified-architecture/#container-usage","title":"Container Usage","text":"<pre><code># Run validation in container\npodman run --rm -v .:/workspace huskycat/validator\n\n# Development container\npodman run -it --rm -v .:/workspace huskycat/validator:dev bash\n</code></pre>"},{"location":"architecture/simplified-architecture/#benefits","title":"Benefits","text":"<p>After simplification: - Consistent execution: Container ensures same toolchain everywhere - No network overhead: stdio-based MCP communication - Reduced complexity: Fewer components to maintain - Portable: Single container or binary works across platforms</p>"},{"location":"architecture/simplified-architecture/#migration-guide","title":"Migration Guide","text":"<p>For existing users:</p> <ol> <li> <p>Remove old configuration files:    <pre><code>rm -rf .roo/ .mcp.json claude-flow.config.json\n</code></pre></p> </li> <li> <p>Install new version:    <pre><code>curl -fsSL https://huskycat.io/install | bash\n</code></pre></p> </li> <li> <p>Setup git hooks (optional):    <pre><code>huskycat setup-hooks\n</code></pre></p> </li> </ol>"},{"location":"architecture/simplified-architecture/#benefits-of-simplification","title":"Benefits of Simplification","text":"<ol> <li>Ease of Use: Works immediately after installation</li> <li>Performance: Direct execution without network overhead</li> <li>Reliability: Fewer moving parts = fewer failures</li> <li>Maintainability: 40% less code to maintain</li> <li>Security: No network exposure, no hardcoded secrets</li> <li>Portability: Single binary or container works everywhere</li> </ol>"},{"location":"architecture/simplified-architecture/#next-steps","title":"Next Steps","text":"<ol> <li>Implement unified validation engine</li> <li>Create simplified stdio MCP server</li> <li>Build optimized containers</li> <li>Develop one-line installer</li> <li>Write comprehensive tests</li> <li>Deploy and monitor</li> </ol> <p>This simplified architecture maintains all the power of the original system while removing unnecessary complexity. The result is a fast, reliable, and easy-to-use validation platform that \"just works.\"</p>"},{"location":"features/mcp-server/","title":"MCP Server Integration","text":"<p>HuskyCat includes a built-in stdio-based MCP Server with container-backed validation tools, enabling AI-powered code quality feedback through Claude Code integration.</p>"},{"location":"features/mcp-server/#what-is-mcp","title":"What is MCP?","text":"<p>The Model Context Protocol (MCP) is an open standard that allows AI assistants like Claude to connect with external tools and data sources. HuskyCat's MCP server exposes its validation capabilities as tools that Claude Code can use.</p>"},{"location":"features/mcp-server/#quick-setup","title":"Quick Setup","text":""},{"location":"features/mcp-server/#1-build-huskycat","title":"1. Build HuskyCat","text":"<pre><code>git clone &lt;repository&gt;\ncd huskycats-bates\nnpm install\nuv sync --dev\n\n# Build container (required for validation)\nnpm run container:build\n\n# Build binary entry point  \nnpm run build:binary\n</code></pre>"},{"location":"features/mcp-server/#2-configure-claude-code-mcp","title":"2. Configure Claude Code MCP","text":"<p>Add to Claude Code MCP configuration: <pre><code>{\n  \"mcpServers\": {\n    \"huskycat\": {\n      \"command\": \"/path/to/huskycat\",\n      \"args\": [\"mcp-server\"]\n    }\n  }\n}\n</code></pre></p> <p>Note: HuskyCat uses stdio protocol by default - no port needed.</p>"},{"location":"features/mcp-server/#3-verify-installation","title":"3. Verify Installation","text":"<p>In Claude Code, you should now see HuskyCat tools available:</p> <ul> <li><code>validate</code> - Validate files or directories</li> <li><code>validate_staged</code> - Validate staged Git files</li> <li>Individual validator tools (e.g., <code>validate_python-black</code>, <code>validate_flake8</code>, <code>validate_mypy</code>)</li> </ul>"},{"location":"features/mcp-server/#available-tools","title":"Available Tools","text":""},{"location":"features/mcp-server/#core-tools","title":"Core Tools","text":""},{"location":"features/mcp-server/#validate","title":"<code>validate</code>","text":"<p>Validates files or directories with all applicable validators.</p> <p>Parameters: - <code>path</code> (required): File or directory path to validate - <code>fix</code> (optional): Auto-fix issues where possible (default: false)</p> <p>Example usage in Claude Code: <pre><code>Please validate the Python files in my src/ directory and fix any issues.\n</code></pre></p>"},{"location":"features/mcp-server/#validate_staged","title":"<code>validate_staged</code>","text":"<p>Validates files staged for Git commit.</p> <p>Parameters: - <code>fix</code> (optional): Auto-fix issues where possible (default: false)</p> <p>Example usage in Claude Code: <pre><code>Check my staged files before I commit them.\n</code></pre></p>"},{"location":"features/mcp-server/#individual-validator-tools","title":"Individual Validator Tools","text":"<p>Each validator has its own tool for targeted validation:</p> <ul> <li><code>validate_python-black</code> - Python code formatting</li> <li><code>validate_autoflake</code> - Python unused import removal</li> <li><code>validate_flake8</code> - Python linting</li> <li><code>validate_mypy</code> - Python type checking</li> <li><code>validate_ruff</code> - Python fast linting</li> <li><code>validate_bandit</code> - Python security scanning</li> <li><code>validate_js-eslint</code> - JavaScript/TypeScript linting</li> <li><code>validate_js-prettier</code> - JavaScript/TypeScript formatting</li> <li><code>validate_yamllint</code> - YAML validation</li> <li><code>validate_docker-hadolint</code> - Dockerfile validation</li> <li><code>validate_shellcheck</code> - Shell script validation</li> <li><code>validate_gitlab-ci</code> - GitLab CI validation</li> </ul> <p>Parameters: - <code>path</code> (required): File path to validate - <code>fix</code> (optional): Auto-fix issues where possible (default: false)</p>"},{"location":"features/mcp-server/#architecture","title":"Architecture","text":"<pre><code>sequenceDiagram\n    participant CC as Claude Code\n    participant MCP as MCP Server\n    participant VE as Validation Engine\n    participant V as Validators\n\n    CC-&gt;&gt;MCP: tool call (validate)\n    MCP-&gt;&gt;VE: validate_file/directory\n    VE-&gt;&gt;V: run validators\n    V-&gt;&gt;VE: results\n    VE-&gt;&gt;MCP: aggregated results\n    MCP-&gt;&gt;CC: formatted response</code></pre>"},{"location":"features/mcp-server/#example-workflows","title":"Example Workflows","text":""},{"location":"features/mcp-server/#1-pre-commit-validation","title":"1. Pre-Commit Validation","text":"<p>In Claude Code: <pre><code>I'm about to commit my changes. Can you validate my staged files and fix any issues?\n</code></pre></p> <p>This will: 1. Run <code>validate_staged</code> with <code>fix: true</code> 2. Show you exactly what was validated 3. Apply auto-fixes where possible 4. Report any remaining issues</p>"},{"location":"features/mcp-server/#2-directory-validation","title":"2. Directory Validation","text":"<p>In Claude Code: <pre><code>Please check all Python files in my project for type errors and style issues.\n</code></pre></p> <p>This will: 1. Run <code>validate</code> on your project directory 2. Focus on Python files 3. Run MyPy, Black, Flake8, and Ruff 4. Provide a detailed report</p>"},{"location":"features/mcp-server/#3-specific-tool-validation","title":"3. Specific Tool Validation","text":"<p>In Claude Code: <pre><code>Run ESLint on my main.js file and fix any issues.\n</code></pre></p> <p>This will: 1. Run <code>validate_eslint</code> with <code>fix: true</code> 2. Apply ESLint auto-fixes 3. Report the results</p>"},{"location":"features/mcp-server/#configuration","title":"Configuration","text":""},{"location":"features/mcp-server/#mcp-server-settings","title":"MCP Server Settings","text":"<p>The MCP server reads the same configuration as the CLI tool. You can customize validation behavior through:</p> <ol> <li>Project configuration (pyproject.toml, .flake8, etc.)</li> <li>Environment variables (HUSKYCAT_LOG_LEVEL, etc.)</li> <li>Tool parameters (passed through MCP calls)</li> </ol>"},{"location":"features/mcp-server/#logging","title":"Logging","text":"<p>MCP server logs are written to stderr to avoid interfering with the stdio protocol. Set the log level:</p> <pre><code>HUSKYCAT_LOG_LEVEL=DEBUG claude mcp add huskycat \"huskycat mcp-server\"\n</code></pre>"},{"location":"features/mcp-server/#advanced-usage","title":"Advanced Usage","text":""},{"location":"features/mcp-server/#custom-validation-workflows","title":"Custom Validation Workflows","text":"<p>You can combine multiple MCP tools in Claude Code workflows:</p> <pre><code>1. First, validate my Python code with Black and fix formatting\n2. Then run MyPy for type checking\n3. Finally, validate my YAML configuration files\n</code></pre>"},{"location":"features/mcp-server/#integration-with-git-hooks","title":"Integration with Git Hooks","text":"<p>The MCP server works seamlessly with Git hooks. You can:</p> <ol> <li>Validate staged files before committing</li> <li>Set up pre-push validation</li> <li>Integrate with CI/CD workflows</li> </ol>"},{"location":"features/mcp-server/#container-only-validation","title":"Container-Only Validation","text":"<p>The MCP server uses container-only execution for all validation:</p> <pre><code># All validation automatically runs in containers\n./dist/huskycat mcp-server  # Uses container internally\n\n# Verify container is working\nnpm run container:test\n</code></pre> <p>Benefits: - Consistent toolchain across environments - Repository isolation and safety - No missing tool dependencies</p>"},{"location":"features/mcp-server/#troubleshooting","title":"Troubleshooting","text":""},{"location":"features/mcp-server/#common-issues","title":"Common Issues","text":"<ol> <li>Tool not found: Ensure HuskyCat is properly installed and in your PATH</li> <li>Permission errors: Check file permissions and directory access</li> <li>Python not found: Some validators require Python to be installed</li> </ol>"},{"location":"features/mcp-server/#debug-mode","title":"Debug Mode","text":"<p>Enable verbose logging for troubleshooting:</p> <pre><code>HUSKYCAT_LOG_LEVEL=DEBUG huskycat mcp-server\n</code></pre>"},{"location":"features/mcp-server/#manual-testing","title":"Manual Testing","text":"<p>Test the MCP server manually:</p> <pre><code># Start the server\nhuskycat mcp-server\n\n# Send a test request (JSON-RPC format)\necho '{\"jsonrpc\":\"2.0\",\"method\":\"initialize\",\"params\":{},\"id\":1}' | huskycat mcp-server\n</code></pre>"},{"location":"features/mcp-server/#technical-details","title":"Technical Details","text":""},{"location":"features/mcp-server/#protocol-compliance","title":"Protocol Compliance","text":"<p>HuskyCat's MCP server implements MCP version 2024-11-05 and supports:</p> <ul> <li>Tool discovery and invocation</li> <li>JSON-RPC 2.0 communication</li> <li>Error handling and reporting</li> <li>Structured result formatting</li> </ul>"},{"location":"features/mcp-server/#performance","title":"Performance","text":"<ul> <li>Fast startup: &lt; 100ms initialization time</li> <li>Efficient validation: Parallel execution of validators</li> <li>Smart caching: Avoid re-running unchanged validators</li> <li>Resource management: Automatic cleanup and memory management</li> </ul>"},{"location":"features/mcp-server/#security","title":"Security","text":"<ul> <li>Sandboxed execution: Validators run in controlled environments</li> <li>Path validation: Prevent directory traversal attacks</li> <li>Input sanitization: Clean and validate all inputs</li> <li>Error isolation: Failures don't crash the server</li> </ul>"},{"location":"features/mcp-server/#api-reference","title":"API Reference","text":"<p>For complete API documentation, see our MCP Tools API Reference.</p> <p>The MCP server integration makes HuskyCat incredibly powerful when combined with Claude Code's AI capabilities, enabling intelligent code validation workflows that adapt to your specific needs.</p>"},{"location":"proposals/documentation-overhaul-2025/","title":"Documentation Overhaul Proposal (December 2025)","text":"<p>Status: Draft Author: Claude + John Sullivan Date: 2025-12-05 Related: Pipeline success with Rocky Linux 10, macOS signing, binary builds</p>"},{"location":"proposals/documentation-overhaul-2025/#executive-summary","title":"Executive Summary","text":"<p>Following successful CI/CD pipeline implementation with Rocky Linux 10 builds and macOS code signing, comprehensive documentation research revealed critical gaps and inaccuracies. This proposal outlines a systematic documentation update to:</p> <ol> <li>Fix critical inaccuracies (outdated MCP architecture, wrong CLI flags)</li> <li>Add missing binary download/installation guides</li> <li>Create comprehensive CLI reference</li> <li>Update CI/CD documentation with Rocky Linux 10 details</li> <li>Reorganize MkDocs navigation for better UX</li> </ol> <p>Impact: Without these updates, users will encounter incorrect setup instructions, broken download links, and confusion about actual vs. documented capabilities.</p>"},{"location":"proposals/documentation-overhaul-2025/#research-findings-summary","title":"Research Findings Summary","text":""},{"location":"proposals/documentation-overhaul-2025/#documentation-audit-results","title":"Documentation Audit Results","text":"<ul> <li>Total Documentation: 15 markdown files, 6,222 lines</li> <li>Quality Score: 63% (needs significant improvement)</li> <li>Critical Issues: 5 major gaps identified</li> <li>Missing Sections: 6 new documents needed</li> </ul>"},{"location":"proposals/documentation-overhaul-2025/#critical-issues-identified","title":"Critical Issues Identified","text":"Issue Severity Files Affected Impact MCP Architecture completely outdated CRITICAL <code>docs/mcp-architecture.md</code> Misleads users about actual implementation Binary downloads not documented HIGH <code>docs/installation.md</code> Users can't easily download pre-built binaries CLI flags documented don't exist HIGH <code>docs/features/mcp-server.md</code>, <code>docs/installation.md</code> Setup instructions fail Container registry paths outdated MEDIUM <code>docs/gitlab-ci-cd.md</code>, <code>docs/gitlab-auto-devops-complete.md</code> CI examples broken Git hooks not in MkDocs nav MEDIUM <code>.githooks/README.md</code> Good docs hidden"},{"location":"proposals/documentation-overhaul-2025/#proposed-documentation-structure","title":"Proposed Documentation Structure","text":""},{"location":"proposals/documentation-overhaul-2025/#new-mkdocs-navigation","title":"New MkDocs Navigation","text":"<pre><code>nav:\n  - Home: index.md\n  - Getting Started:\n      - Quick Start: quickstart.md (NEW)\n      - Installation: installation.md (UPDATED)\n      - Configuration: configuration.md\n  - User Guides:\n      - CLI Reference: cli-reference.md (NEW)\n      - Git Hooks: git-hooks.md (NEW - from .githooks/README.md)\n      - Binary Downloads: binary-downloads.md (NEW)\n  - Features:\n      - MCP Server: features/mcp-server.md (UPDATED)\n      - Auto-Fix: features/auto-fix.md (NEW)\n  - API Reference:\n      - MCP Tools: api/mcp-tools.md (UPDATED)\n      - CLI API: api/cli-api.md (NEW)\n  - CI/CD:\n      - GitLab CI/CD: gitlab-ci-cd.md (UPDATED)\n      - GitHub Actions: github-actions.md (NEW)\n      - Auto-DevOps: gitlab-auto-devops-complete.md\n      - Code Signing: macos-code-signing.md (UPDATED)\n  - Architecture:\n      - Overview: architecture/overview.md (NEW)\n      - Product Modes: architecture/product-modes.md (NEW)\n      - MCP Protocol: architecture/mcp-protocol.md (REWRITE of mcp-architecture.md)\n  - Troubleshooting: troubleshooting.md (NEW)\n</code></pre>"},{"location":"proposals/documentation-overhaul-2025/#priority-1-critical-fixes-immediate","title":"Priority 1: Critical Fixes (Immediate)","text":""},{"location":"proposals/documentation-overhaul-2025/#11-deleterewrite-docsmcp-architecturemd","title":"1.1 Delete/Rewrite <code>docs/mcp-architecture.md</code>","text":"<p>Current State: - Document claims HTTP server, Kubernetes pods, TypeScript execution - Actual: Simple stdio Python JSON-RPC server</p> <p>Action: <pre><code># Option A: Delete (recommended for now)\nrm docs/mcp-architecture.md\n# Update mkdocs.yml to remove reference\n\n# Option B: Rewrite as architecture/mcp-protocol.md\n# Document actual stdio-based implementation\n</code></pre></p> <p>New Content (<code>architecture/mcp-protocol.md</code>): <pre><code># MCP Protocol Implementation\n\nHuskyCat implements the Model Context Protocol (MCP) using stdio-based JSON-RPC 2.0.\n\n## Architecture\n</code></pre> \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 Claude Code  \u2502 \u25c4\u2500\u2500\u2500\u2500 stdio \u2500\u2500\u2500\u2500\u2500\u25ba \u2502 HuskyCat MCP    \u2502 \u2502              \u2502   JSON-RPC 2.0     \u2502 Server          \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                                              \u2502                                              \u25bc                                     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                                     \u2502 Validation      \u2502                                     \u2502 Engine          \u2502                                     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 <pre><code>## Implementation Details\n\n- **Protocol**: JSON-RPC 2.0 over stdin/stdout\n- **Transport**: stdio (no HTTP, no ports)\n- **File**: `src/huskycat/mcp_server.py`\n- **Tools**: Dynamically generated from validator registry\n</code></pre></p> <p>Effort: 2-3 hours Files: Delete 1, create 1, update mkdocs.yml</p>"},{"location":"proposals/documentation-overhaul-2025/#12-fix-mcp-port-flag-references","title":"1.2 Fix MCP <code>--port</code> Flag References","text":"<p>Problem: Documentation claims <code>mcp-server --port 8080</code> but flag doesn't exist</p> <p>Affected Files: -  <code>docs/installation.md:90-95</code> - <code>docs/features/mcp-server.md:35-38</code></p> <p>Changes: <pre><code>- ./dist/huskycat mcp-server --port 8080\n+ ./dist/huskycat mcp-server  # stdio only, no ports needed\n</code></pre></p> <p>Verification: <pre><code># Confirm no --port flag exists\nuv run python -m src.huskycat mcp-server --help | grep -i port\n# Should return nothing\n</code></pre></p> <p>Effort: 30 minutes Files: 2 updates</p>"},{"location":"proposals/documentation-overhaul-2025/#13-document-container-fallback-behavior","title":"1.3 Document Container Fallback Behavior","text":"<p>Problem: Docs claim \"container-only\" but code has fallback to local execution</p> <p>Affected Files: - <code>docs/index.md:6-7</code> - <code>docs/installation.md:127-141</code> - <code>docs/features/mcp-server.md:193-209</code></p> <p>Changes: <pre><code>- HuskyCat is a **container-only** validation platform\n+ HuskyCat uses **containerized validation** when available, with automatic fallback to local execution\n</code></pre></p> <p>Add Section (<code>docs/index.md</code>): <pre><code>## Execution Modes\n\n### Container Mode (Recommended)\n- Complete toolchain isolation\n- Consistent environment\n- Requires Docker/Podman\n\n### Local Fallback Mode\n- Automatically activates when containers unavailable\n- Uses locally installed tools\n- Best-effort validation\n</code></pre></p> <p>Effort: 1 hour Files: 3 updates</p>"},{"location":"proposals/documentation-overhaul-2025/#priority-2-binary-distribution-documentation","title":"Priority 2: Binary Distribution Documentation","text":""},{"location":"proposals/documentation-overhaul-2025/#21-create-docsbinary-downloadsmd","title":"2.1 Create <code>docs/binary-downloads.md</code>","text":"<p>Purpose: Document how to download and install pre-built binaries</p> <p>Content Structure: <pre><code># Binary Downloads\n\nHuskyCat provides pre-built binaries for all major platforms.\n\n## Supported Platforms\n\n| Platform | Architecture | Binary | Status |\n|----------|-------------|--------|--------|\n| macOS | Apple Silicon (ARM64) | `huskycat-darwin-arm64` | \u2705 Ad-hoc signed |\n| Linux | AMD64 (x86_64) | `huskycat-linux-amd64` | \u2705 Rocky Linux 10 |\n| Linux | ARM64 (aarch64) | `huskycat-linux-arm64` | \u2705 Rocky Linux 10 |\n\n## Quick Install\n\n### macOS (Apple Silicon)\n```bash\ncurl -L https://gitlab.com/tinyland/ai/huskycat/-/releases/permalink/latest/downloads/huskycat-darwin-arm64 -o huskycat\nchmod +x huskycat\nsudo mv huskycat /usr/local/bin/\n</code></pre></p>"},{"location":"proposals/documentation-overhaul-2025/#linux-amd64","title":"Linux (AMD64)","text":"<pre><code>curl -L https://gitlab.com/tinyland/ai/huskycat/-/releases/permalink/latest/downloads/huskycat-linux-amd64 -o huskycat\nchmod +x huskycat\nsudo mv huskycat /usr/local/bin/\n</code></pre>"},{"location":"proposals/documentation-overhaul-2025/#linux-arm64","title":"Linux (ARM64)","text":"<pre><code>curl -L https://gitlab.com/tinyland/ai/huskycat/-/releases/permalink/latest/downloads/huskycat-linux-arm64 -o huskycat\nchmod +x huskycat\nsudo mv huskycat /usr/local/bin/\n</code></pre>"},{"location":"proposals/documentation-overhaul-2025/#verify-installation","title":"Verify Installation","text":"<pre><code>huskycat --version\nhuskycat status\n</code></pre>"},{"location":"proposals/documentation-overhaul-2025/#binary-details","title":"Binary Details","text":""},{"location":"proposals/documentation-overhaul-2025/#build-information","title":"Build Information","text":"<ul> <li>Linux Binaries: Built on Rocky Linux 10 (RHEL-compatible)</li> <li>macOS Binary: Built on macOS 14 (Sonoma), Apple Silicon native</li> <li>Compression: UPX compressed (Linux only)</li> <li>Signing: macOS ad-hoc signed (development use)</li> </ul>"},{"location":"proposals/documentation-overhaul-2025/#architecture-requirements","title":"Architecture Requirements","text":"<p>Linux: - Rocky Linux 10 requires x86-64-v3 (modern CPUs only) - Older CPUs (x86-64-v2) not supported - glibc-based (compatible with RHEL, Fedora, CentOS, Rocky, Alma)</p> <p>macOS: - Requires macOS 14+ (Sonoma or newer) - Apple Silicon only (M1/M2/M3 chips) - Intel Macs not supported (no Intel runners available)</p>"},{"location":"proposals/documentation-overhaul-2025/#sha256-checksums","title":"SHA256 Checksums","text":"<p>Download checksums from release artifacts: <pre><code>curl -L https://gitlab.com/tinyland/ai/huskycat/-/releases/permalink/latest/downloads/huskycat-darwin-arm64-signed.sha256\ncurl -L https://gitlab.com/tinyland/ai/huskycat/-/releases/permalink/latest/downloads/huskycat-linux-amd64.sha256\ncurl -L https://gitlab.com/tinyland/ai/huskycat/-/releases/permalink/latest/downloads/huskycat-linux-arm64.sha256\n</code></pre></p> <p>Verify: <pre><code>shasum -a 256 huskycat  # Should match downloaded .sha256 file\n</code></pre></p>"},{"location":"proposals/documentation-overhaul-2025/#cicd-usage","title":"CI/CD Usage","text":""},{"location":"proposals/documentation-overhaul-2025/#gitlab-ci","title":"GitLab CI","text":"<pre><code>validate:\n  stage: test\n  image: rockylinux/rockylinux:10\n  before_script:\n    - curl -L https://gitlab.com/tinyland/ai/huskycat/-/releases/permalink/latest/downloads/huskycat-linux-amd64 -o /usr/local/bin/huskycat\n    - chmod +x /usr/local/bin/huskycat\n  script:\n    - huskycat validate --all\n</code></pre>"},{"location":"proposals/documentation-overhaul-2025/#github-actions","title":"GitHub Actions","text":"<pre><code>- name: Install HuskyCat\n  run: |\n    curl -L https://gitlab.com/tinyland/ai/huskycat/-/releases/permalink/latest/downloads/huskycat-linux-amd64 -o huskycat\n    chmod +x huskycat\n    sudo mv huskycat /usr/local/bin/\n\n- name: Validate\n  run: huskycat validate --all\n</code></pre>"},{"location":"proposals/documentation-overhaul-2025/#troubleshooting","title":"Troubleshooting","text":""},{"location":"proposals/documentation-overhaul-2025/#exec-format-error","title":"\"exec format error\"","text":"<p>Problem: Downloaded wrong architecture binary</p> <p>Solution: <pre><code># Check your architecture\nuname -m\n\n# x86_64 = AMD64 (use huskycat-linux-amd64)\n# aarch64 or arm64 = ARM64 (use huskycat-linux-arm64 or huskycat-darwin-arm64)\n</code></pre></p>"},{"location":"proposals/documentation-overhaul-2025/#command-not-found","title":"\"command not found\"","text":"<p>Problem: Binary not in PATH</p> <p>Solution: <pre><code># Option 1: Install to /usr/local/bin (requires sudo)\nsudo mv huskycat /usr/local/bin/\n\n# Option 2: Add current directory to PATH\nexport PATH=\"$PATH:$(pwd)\"\n\n# Option 3: Use full path\n./huskycat validate\n</code></pre></p>"},{"location":"proposals/documentation-overhaul-2025/#macos-cannot-be-opened-because-the-developer-cannot-be-verified","title":"macOS \"cannot be opened because the developer cannot be verified\"","text":"<p>Problem: macOS Gatekeeper blocking unsigned binary</p> <p>Solution: <pre><code># Remove quarantine attribute\nxattr -d com.apple.quarantine huskycat\n\n# Or allow in System Preferences &gt; Security &amp; Privacy\n</code></pre></p> <p>Effort: 3-4 hours Files: 1 new file, update mkdocs.yml</p>"},{"location":"proposals/documentation-overhaul-2025/#22-update-docsinstallationmd","title":"2.2 Update <code>docs/installation.md</code>","text":"<p>Add Section: \"Quick Install (Binary)\"</p> <pre><code>## Quick Install (Recommended)\n\nThe fastest way to get started is downloading a pre-built binary:\n\n\ud83d\udc49 **See [Binary Downloads](binary-downloads.md) for platform-specific instructions**\n\n### Verify Installation\n```bash\nhuskycat --version\nhuskycat status\n</code></pre>"},{"location":"proposals/documentation-overhaul-2025/#alternative-build-from-source","title":"Alternative: Build from Source","text":"<p>(existing content...) <pre><code>**Effort**: 30 minutes\n**Files**: 1 update\n\n---\n\n## Priority 3: CLI Reference Documentation\n\n### 3.1 Create `docs/cli-reference.md`\n\n**Purpose**: Comprehensive CLI command reference\n\n**Content Outline**:\n\n```markdown\n# CLI Reference\n\nComplete reference for HuskyCat command-line interface.\n\n## Global Options\n\n```bash\nhuskycat [OPTIONS] COMMAND [ARGS]\n</code></pre></p> Option Description Default <code>--version</code> Show version and exit - <code>--verbose, -v</code> Enable verbose output Off <code>--config-dir DIR</code> Configuration directory <code>~/.huskycat</code> <code>--mode MODE</code> Override product mode Auto-detect <code>--json</code> Force JSON output Off"},{"location":"proposals/documentation-overhaul-2025/#product-modes","title":"Product Modes","text":"<p>HuskyCat auto-detects execution mode based on environment:</p> Mode When Used Output Format Interactive <code>git_hooks</code> Git hooks running Minimal Yes (TTY) <code>ci</code> CI/CD pipeline JUnit XML No <code>cli</code> Manual execution Rich terminal Yes <code>pipeline</code> Pipe composition JSON No <code>mcp</code> MCP server JSON-RPC No <p>Override with <code>--mode</code>: <pre><code>huskycat --mode ci validate --all  # Force CI mode\n</code></pre></p>"},{"location":"proposals/documentation-overhaul-2025/#commands","title":"Commands","text":""},{"location":"proposals/documentation-overhaul-2025/#validate","title":"<code>validate</code>","text":"<p>Run validation on Python files.</p> <pre><code>huskycat validate [OPTIONS] [FILES...]\n</code></pre> <p>Options: | Option | Description | |--------|-------------| | <code>--staged</code> | Validate only staged git files | | <code>--all</code> | Validate all files in repository | | <code>--fix</code> | Auto-fix issues where possible | | <code>--interactive</code> | Prompt for auto-fix decisions | | <code>--allow-warnings</code> | Allow warnings to pass |</p> <p>Examples: <pre><code># Validate staged files (default)\nhuskycat validate --staged\n\n# Validate specific files\nhuskycat validate src/main.py tests/test_foo.py\n\n# Validate and auto-fix\nhuskycat validate --fix\n\n# Validate everything\nhuskycat validate --all\n</code></pre></p> <p>Exit Codes: - <code>0</code>: All validations passed - <code>1</code>: Validation failures found - <code>2</code>: Command error or exception</p>"},{"location":"proposals/documentation-overhaul-2025/#setup-hooks","title":"<code>setup-hooks</code>","text":"<p>Install git hooks for automatic validation.</p> <pre><code>huskycat setup-hooks [OPTIONS]\n</code></pre> <p>Options: | Option | Description | |--------|-------------| | <code>--force</code> | Overwrite existing hooks |</p> <p>What Gets Installed: - <code>pre-commit</code>: Validates staged files - <code>pre-push</code>: Validates CI configuration - <code>commit-msg</code>: Validates commit message format</p> <p>Examples: <pre><code># Install hooks\nhuskycat setup-hooks\n\n# Force reinstall\nhuskycat setup-hooks --force\n</code></pre></p>"},{"location":"proposals/documentation-overhaul-2025/#ci-validate","title":"<code>ci-validate</code>","text":"<p>Validate CI configuration files.</p> <pre><code>huskycat ci-validate [FILES...]\n</code></pre> <p>Examples: <pre><code># Validate GitLab CI\nhuskycat ci-validate .gitlab-ci.yml\n\n# Validate multiple files\nhuskycat ci-validate .gitlab-ci.yml .github/workflows/*.yml\n</code></pre></p>"},{"location":"proposals/documentation-overhaul-2025/#mcp-server","title":"<code>mcp-server</code>","text":"<p>Start MCP server for Claude Code integration (stdio mode).</p> <pre><code>huskycat mcp-server\n</code></pre> <p>No options - stdio only, no ports or configuration.</p> <p>Usage: <pre><code>// Claude Code MCP config\n{\n  \"huskycat\": {\n    \"command\": \"huskycat\",\n    \"args\": [\"mcp-server\"]\n  }\n}\n</code></pre></p>"},{"location":"proposals/documentation-overhaul-2025/#status","title":"<code>status</code>","text":"<p>Show HuskyCat configuration and environment status.</p> <pre><code>huskycat status\n</code></pre> <p>Output Example: <pre><code>HuskyCat Status\n===============\n\nVersion: 1.0.0\nConfig Directory: /Users/username/.huskycat\nProduct Mode: cli\n\nEnvironment:\n  Container Runtime: docker (available)\n  Git Repository: /Users/username/my-project\n  Python Version: 3.11.5\n  UV Version: 0.5.8\n\nTools Available:\n  \u2713 black\n  \u2713 ruff\n  \u2713 mypy\n  \u2713 flake8\n</code></pre></p>"},{"location":"proposals/documentation-overhaul-2025/#clean","title":"<code>clean</code>","text":"<p>Clean cache and temporary files.</p> <pre><code>huskycat clean [OPTIONS]\n</code></pre> <p>Options: | Option | Description | |--------|-------------| | <code>--all</code> | Remove all cache including schemas |</p> <p>Examples: <pre><code># Clean temporary files\nhuskycat clean\n\n# Clean everything including schemas\nhuskycat clean --all\n</code></pre></p>"},{"location":"proposals/documentation-overhaul-2025/#update-schemas","title":"<code>update-schemas</code>","text":"<p>Update validation schemas from official sources.</p> <pre><code>huskycat update-schemas [OPTIONS]\n</code></pre> <p>Options: | Option | Description | |--------|-------------| | <code>--force</code> | Force re-download even if cached |</p> <p>Examples: <pre><code># Update schemas\nhuskycat update-schemas\n\n# Force update\nhuskycat update-schemas --force\n</code></pre></p>"},{"location":"proposals/documentation-overhaul-2025/#environment-variables","title":"Environment Variables","text":"Variable Description Default <code>HUSKYCAT_MODE</code> Override product mode detection Auto-detect <code>HUSKYCAT_CONFIG_DIR</code> Configuration directory <code>~/.huskycat</code> <code>SKIP_HOOKS</code> Skip git hook validation Not set <code>CI</code> CI environment indicator Not set"},{"location":"proposals/documentation-overhaul-2025/#exit-codes","title":"Exit Codes","text":"Code Meaning <code>0</code> Success <code>1</code> Validation failures <code>2</code> Command error <code>3</code> Configuration error"},{"location":"proposals/documentation-overhaul-2025/#performance-tips","title":"Performance Tips","text":""},{"location":"proposals/documentation-overhaul-2025/#git-hooks-mode","title":"Git Hooks Mode","text":"<ul> <li>Validates only staged files by default (fast)</li> <li>Use <code>SKIP_HOOKS=1 git commit</code> to bypass temporarily</li> </ul>"},{"location":"proposals/documentation-overhaul-2025/#ci-mode","title":"CI Mode","text":"<ul> <li>Use <code>--all</code> for comprehensive validation</li> <li>Cache <code>~/.huskycat</code> directory for faster schema loading</li> </ul>"},{"location":"proposals/documentation-overhaul-2025/#container-mode","title":"Container Mode","text":"<ul> <li>First run downloads images (slow)</li> <li>Subsequent runs use cached images (fast)</li> <li>Use <code>--json</code> for machine-readable output <pre><code>**Effort**: 4-5 hours\n**Files**: 1 new file, update mkdocs.yml\n\n---\n\n## Priority 4: Update CI/CD Documentation\n\n### 4.1 Update `docs/gitlab-ci-cd.md`\n\n**Add Rocky Linux 10 Section**:\n\n```markdown\n## Rocky Linux 10 Builds\n\nHuskyCat binaries are built on Rocky Linux 10 for long-term enterprise support.\n\n### Why Rocky Linux 10?\n\n- **Support**: Through May 2035 (10-year lifecycle)\n- **Compatibility**: RHEL-compatible, glibc-based\n- **Modern**: x86-64-v3 architecture requirement\n- **Enterprise-Ready**: Suitable for production deployments\n\n### Binary Build Example\n\n```yaml\nbinary:build:linux:\n  stage: package\n  image: rockylinux/rockylinux:10\n  before_script:\n    - dnf install -y epel-release\n    - dnf install -y git curl gcc python3 python3-pip zlib-devel\n    - dnf install -y upx || echo \"UPX not available\"\n  script:\n    - uv run pyinstaller --onefile huskycat_main.py\n    - upx --best --lzma dist/huskycat || true\n</code></pre></li> </ul>"},{"location":"proposals/documentation-overhaul-2025/#macos-code-signing","title":"macOS Code Signing","text":"<p>Binaries are ad-hoc signed for development use:</p> <pre><code>sign:darwin-arm64:\n  stage: sign\n  extends: .macos_saas_runners\n  script:\n    - codesign --force --sign - dist/huskycat-darwin-arm64\n    - codesign --verify --verbose dist/huskycat-darwin-arm64\n</code></pre> <p>For production signing, configure these CI/CD variables: - <code>APPLE_CERTIFICATE_BASE64</code> - Developer ID Application cert - <code>APPLE_CERTIFICATE_PASSWORD</code> - Certificate password - <code>APPLE_DEVELOPER_ID_CA_G2</code> - Intermediate certificate - <code>APPLE_DEVELOPER_ID_APPLICATION</code> - Certificate name</p> <p>See macOS Code Signing for details. <pre><code>**Update Container Registry References**:\n\n```diff\n- image: registry.gitlab.com/bates-ils/projects/.../husky-lint:latest\n+ image: registry.gitlab.com/tinyland/ai/huskycat/validator:latest\n</code></pre></p> <p>Effort: 2-3 hours Files: 1 update</p>"},{"location":"proposals/documentation-overhaul-2025/#42-create-docsgithub-actionsmd","title":"4.2 Create <code>docs/github-actions.md</code>","text":"<p>Purpose: Document GitHub Actions integration</p> <p>Content Structure: <pre><code># GitHub Actions Integration\n\nUse HuskyCat in GitHub Actions workflows.\n\n## Quick Start\n\n```yaml\nname: Validate\n\non: [push, pull_request]\n\njobs:\n  validate:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v3\n\n      - name: Install HuskyCat\n        run: |\n          curl -L https://gitlab.com/tinyland/ai/huskycat/-/releases/permalink/latest/downloads/huskycat-linux-amd64 -o huskycat\n          chmod +x huskycat\n          sudo mv huskycat /usr/local/bin/\n\n      - name: Validate Code\n        run: huskycat validate --all\n</code></pre></p>"},{"location":"proposals/documentation-overhaul-2025/#advanced-examples","title":"Advanced Examples","text":""},{"location":"proposals/documentation-overhaul-2025/#validate-pull-requests-only","title":"Validate Pull Requests Only","text":"<p>(examples...)</p>"},{"location":"proposals/documentation-overhaul-2025/#matrix-builds","title":"Matrix Builds","text":"<p>(examples...)</p>"},{"location":"proposals/documentation-overhaul-2025/#cache-binary-downloads","title":"Cache Binary Downloads","text":"<p>(examples...) <pre><code>**Effort**: 2-3 hours\n**Files**: 1 new file, update mkdocs.yml\n\n---\n\n## Priority 5: MkDocs Navigation Reorganization\n\n### Update `mkdocs.yml`\n\n**Current Problems**:\n- Git hooks documentation not linked\n- No CLI reference\n- No troubleshooting guide\n- Architecture section fragmented\n\n**Proposed Changes**:\n```yaml\nnav:\n  - Home: index.md\n  - Getting Started:\n      - Quick Start: quickstart.md\n      - Installation: installation.md\n      - Configuration: configuration.md\n  - User Guides:\n      - CLI Reference: cli-reference.md\n      - Git Hooks: git-hooks.md\n      - Binary Downloads: binary-downloads.md\n  - Features:\n      - MCP Server: features/mcp-server.md\n      - Auto-Fix: features/auto-fix.md (if implemented)\n  - API Reference:\n      - MCP Tools: api/mcp-tools.md\n      - CLI API: api/cli-api.md\n  - CI/CD:\n      - GitLab CI/CD: gitlab-ci-cd.md\n      - GitHub Actions: github-actions.md\n      - Auto-DevOps: gitlab-auto-devops-complete.md\n      - Code Signing: macos-code-signing.md\n  - Architecture:\n      - Overview: architecture/overview.md\n      - Product Modes: architecture/product-modes.md\n      - MCP Protocol: architecture/mcp-protocol.md\n  - Troubleshooting: troubleshooting.md\n</code></pre></p> <p>Effort: 1 hour Files: mkdocs.yml update</p>"},{"location":"proposals/documentation-overhaul-2025/#implementation-plan","title":"Implementation Plan","text":""},{"location":"proposals/documentation-overhaul-2025/#phase-1-critical-fixes-week-1","title":"Phase 1: Critical Fixes (Week 1)","text":"<ul> <li> Delete/archive <code>docs/mcp-architecture.md</code></li> <li> Fix <code>--port</code> flag references (2 files)</li> <li> Document container fallback (3 files)</li> <li> Update container registry paths (2 files)</li> </ul> <p>Deliverable: No broken/misleading documentation</p>"},{"location":"proposals/documentation-overhaul-2025/#phase-2-binary-documentation-week-1-2","title":"Phase 2: Binary Documentation (Week 1-2)","text":"<ul> <li> Create <code>docs/binary-downloads.md</code></li> <li> Update <code>docs/installation.md</code> with binary quick start</li> <li> Test all download links and installation instructions</li> <li> Verify checksums work correctly</li> </ul> <p>Deliverable: Users can easily download and install binaries</p>"},{"location":"proposals/documentation-overhaul-2025/#phase-3-cli-reference-week-2","title":"Phase 3: CLI Reference (Week 2)","text":"<ul> <li> Create <code>docs/cli-reference.md</code></li> <li> Document all commands with examples</li> <li> Verify CLI help output matches documentation</li> <li> Add troubleshooting for common CLI issues</li> </ul> <p>Deliverable: Complete CLI documentation</p>"},{"location":"proposals/documentation-overhaul-2025/#phase-4-cicd-updates-week-2-3","title":"Phase 4: CI/CD Updates (Week 2-3)","text":"<ul> <li> Update <code>docs/gitlab-ci-cd.md</code> with Rocky Linux 10</li> <li> Create <code>docs/github-actions.md</code></li> <li> Update signing documentation</li> <li> Add CI/CD troubleshooting section</li> </ul> <p>Deliverable: Accurate CI/CD integration docs</p>"},{"location":"proposals/documentation-overhaul-2025/#phase-5-navigation-polish-week-3","title":"Phase 5: Navigation &amp; Polish (Week 3)","text":"<ul> <li> Reorganize mkdocs.yml navigation</li> <li> Create <code>docs/troubleshooting.md</code></li> <li> Add cross-references between docs</li> <li> Review all docs for consistency</li> </ul> <p>Deliverable: Professional documentation site</p>"},{"location":"proposals/documentation-overhaul-2025/#testing-verification","title":"Testing &amp; Verification","text":""},{"location":"proposals/documentation-overhaul-2025/#before-merging","title":"Before Merging","text":"<ul> <li> Test all download links work</li> <li> Verify all code examples execute correctly</li> <li> Check all internal doc links resolve</li> <li> Build mkdocs locally and review</li> <li> Spell check all new/updated docs</li> </ul>"},{"location":"proposals/documentation-overhaul-2025/#user-acceptance","title":"User Acceptance","text":"<ul> <li> Can a new user download binary in &lt;5 min?</li> <li> Can a new user set up git hooks in &lt;10 min?</li> <li> Are all CLI commands documented accurately?</li> <li> Do CI/CD examples work in actual pipelines?</li> </ul>"},{"location":"proposals/documentation-overhaul-2025/#success-metrics","title":"Success Metrics","text":"Metric Current Target Documentation accuracy 60% 95% Critical inaccuracies 5 0 Missing sections 6 0 User setup time Unknown &lt;10 min CI/CD example success rate Unknown 100%"},{"location":"proposals/documentation-overhaul-2025/#open-questions","title":"Open Questions","text":"<ol> <li>Binary Distribution:</li> <li>Should we also publish to GitHub Releases for wider distribution?</li> <li> <p>Do we need Windows binaries (WSL support)?</p> </li> <li> <p>Documentation Hosting:</p> </li> <li>Is GitLab Pages working correctly?</li> <li> <p>Should we mirror docs on GitHub?</p> </li> <li> <p>CLI Stability:</p> </li> <li>Are all CLI commands finalized or might they change?</li> <li> <p>Should we version the CLI API?</p> </li> <li> <p>MCP Server:</p> </li> <li>What are the actual tool names generated by the validator registry?</li> <li>Should we stabilize tool names or document dynamic generation?</li> </ol>"},{"location":"proposals/documentation-overhaul-2025/#approval-required","title":"Approval Required","text":"<p>This proposal requires approval for: 1. Deletion of <code>docs/mcp-architecture.md</code> (outdated) 2. Creation of 6 new documentation files 3. Updates to 8 existing files 4. MkDocs navigation reorganization</p> <p>Estimated Total Effort: 20-25 hours over 3 weeks</p> <p>Next Steps: 1. Review and approve this proposal 2. Prioritize which phases to implement 3. Begin Phase 1 (critical fixes)</p> <p>Proposal Status: Awaiting Review Last Updated: 2025-12-05</p>"},{"location":"proposals/git-tracked-hooks/","title":"Git-Tracked Husky-Style Hooks with UV Venv Integration","text":"<p>Status: IMPLEMENTED</p>"},{"location":"proposals/git-tracked-hooks/#summary","title":"Summary","text":"<p>HuskyCat now uses git-tracked hooks in <code>.githooks/</code> that leverage UV's virtual environment for tool execution. This replaces the previous runtime-generated hooks with version-controlled scripts.</p>"},{"location":"proposals/git-tracked-hooks/#design-principles","title":"Design Principles","text":"<ol> <li>UV-Only Execution: No binary fallback, no container fallback. Forces \"eat your own dogfood\" paradigm.</li> <li>Git-Tracked: All hooks are version-controlled, changes reviewed like code.</li> <li>Interactive Auto-Fix: Prompts for fixes when issues found, with auto-approve mode for CI.</li> <li>Zero NPM Dependencies: Removed husky and lint-staged - pure shell + UV.</li> </ol>"},{"location":"proposals/git-tracked-hooks/#architecture","title":"Architecture","text":""},{"location":"proposals/git-tracked-hooks/#directory-structure","title":"Directory Structure","text":"<pre><code>.githooks/                          # Git-tracked hooks\n\u251c\u2500\u2500 README.md                       # Developer documentation\n\u251c\u2500\u2500 _/\n\u2502   \u2514\u2500\u2500 common.sh                   # Shared utilities (logging, prompts, helpers)\n\u251c\u2500\u2500 pre-commit                      # Staged file validation with auto-fix\n\u251c\u2500\u2500 pre-push                        # Full codebase validation\n\u2514\u2500\u2500 commit-msg                      # Conventional commit format validation\n\nsrc/huskycat/commands/hooks.py      # Minimal: just sets core.hooksPath\n</code></pre>"},{"location":"proposals/git-tracked-hooks/#hook-flow","title":"Hook Flow","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                           git commit -m \"...\"                           \u2502\n\u2502                                  \u2502                                      \u2502\n\u2502                                  \u25bc                                      \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n\u2502  \u2502                        PRE-COMMIT HOOK                            \u2502  \u2502\n\u2502  \u2502                                                                   \u2502  \u2502\n\u2502  \u2502   1. Verify UV venv active                                        \u2502  \u2502\n\u2502  \u2502   2. Get staged Python files                                      \u2502  \u2502\n\u2502  \u2502   3. Run Black (format check)                                     \u2502  \u2502\n\u2502  \u2502      \u2514\u2500\u2500 If fail: prompt auto-fix? \u2192 apply &amp; re-stage             \u2502  \u2502\n\u2502  \u2502   4. Run Ruff (lint check)                                        \u2502  \u2502\n\u2502  \u2502      \u2514\u2500\u2500 If fail: prompt auto-fix? \u2192 apply &amp; re-stage             \u2502  \u2502\n\u2502  \u2502   5. Run Flake8 (additional lint - no auto-fix)                   \u2502  \u2502\n\u2502  \u2502                                                                   \u2502  \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n\u2502                                  \u2502                                      \u2502\n\u2502                                  \u25bc                                      \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n\u2502  \u2502                        COMMIT-MSG HOOK                            \u2502  \u2502\n\u2502  \u2502                                                                   \u2502  \u2502\n\u2502  \u2502   Validate conventional commit format:                            \u2502  \u2502\n\u2502  \u2502   &lt;type&gt;(&lt;scope&gt;): &lt;description&gt;                                  \u2502  \u2502\n\u2502  \u2502                                                                   \u2502  \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                   \u2502\n                                   \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                              git push                                   \u2502\n\u2502                                  \u2502                                      \u2502\n\u2502                                  \u25bc                                      \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n\u2502  \u2502                         PRE-PUSH HOOK                             \u2502  \u2502\n\u2502  \u2502                                                                   \u2502  \u2502\n\u2502  \u2502   1. Full Black check on src/ tests/                              \u2502  \u2502\n\u2502  \u2502   2. Full Ruff check on src/ tests/                               \u2502  \u2502\n\u2502  \u2502   3. Full Flake8 check on src/ tests/                             \u2502  \u2502\n\u2502  \u2502   4. GitLab CI validation (if glab available)                     \u2502  \u2502\n\u2502  \u2502                                                                   \u2502  \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"proposals/git-tracked-hooks/#setup","title":"Setup","text":""},{"location":"proposals/git-tracked-hooks/#automatic-on-npm-install","title":"Automatic (on npm install)","text":"<pre><code>{\n  \"scripts\": {\n    \"postinstall\": \"git config core.hooksPath .githooks || true\"\n  }\n}\n</code></pre>"},{"location":"proposals/git-tracked-hooks/#manual","title":"Manual","text":"<pre><code>git config core.hooksPath .githooks\n</code></pre>"},{"location":"proposals/git-tracked-hooks/#via-huskycat","title":"Via HuskyCat","text":"<pre><code>npm run hooks:install\n# or\nuv run python3 -m src.huskycat setup-hooks\n</code></pre>"},{"location":"proposals/git-tracked-hooks/#environment-variables","title":"Environment Variables","text":"Variable Default Description <code>SKIP_HOOKS</code> <code>0</code> Skip all hooks <code>HUSKYCAT_SKIP_HOOKS</code> <code>0</code> Alternative skip variable <code>HUSKYCAT_AUTO_APPROVE</code> <code>0</code> Auto-approve all fixes (for CI/scripts) <code>AUTO_FIX</code> <code>0</code> Alternative auto-approve variable"},{"location":"proposals/git-tracked-hooks/#key-files","title":"Key Files","text":""},{"location":"proposals/git-tracked-hooks/#githooks_commonsh","title":"<code>.githooks/_/common.sh</code>","text":"<p>Shared utilities providing: - Color output (<code>log_info</code>, <code>log_warn</code>, <code>log_error</code>, <code>log_step</code>) - Environment detection (<code>is_ci</code>, <code>is_interactive</code>, <code>is_auto_approve</code>) - UV verification (<code>verify_uv_environment</code>, <code>uv_run</code>) - Git utilities (<code>staged_files</code>, <code>tracked_files</code>, <code>has_staged_files</code>) - Interactive prompts (<code>ask_yes_no</code>) - Auto-fix runner (<code>run_with_autofix</code>)</p>"},{"location":"proposals/git-tracked-hooks/#githookspre-commit","title":"<code>.githooks/pre-commit</code>","text":"<ul> <li>Validates staged Python files</li> <li>Runs Black, Ruff, Flake8 in sequence</li> <li>Interactive auto-fix prompts for Black and Ruff</li> <li>Re-stages fixed files automatically</li> </ul>"},{"location":"proposals/git-tracked-hooks/#githookspre-push","title":"<code>.githooks/pre-push</code>","text":"<ul> <li>Full codebase validation (not just staged files)</li> <li>Black, Ruff, Flake8 on <code>src/</code> and <code>tests/</code></li> <li>GitLab CI configuration validation via <code>glab</code></li> </ul>"},{"location":"proposals/git-tracked-hooks/#githookscommit-msg","title":"<code>.githooks/commit-msg</code>","text":"<ul> <li>Validates conventional commit format</li> <li>Skips merge/revert/fixup commits</li> <li>Clear error messages with examples</li> </ul>"},{"location":"proposals/git-tracked-hooks/#srchuskycatcommandshookspy","title":"<code>src/huskycat/commands/hooks.py</code>","text":"<p>Minimal command that: - Verifies <code>.githooks/</code> directory exists - Sets <code>git config core.hooksPath .githooks</code> - Validates UV and venv availability - Reports available hooks</p>"},{"location":"proposals/git-tracked-hooks/#developer-requirements","title":"Developer Requirements","text":"<p>UV virtual environment MUST be active for development in this repository.</p> <pre><code># First-time setup\nuv sync --dev\nnpm install  # Configures core.hooksPath automatically\n\n# Verify\nuv run black --version\nuv run ruff --version\n</code></pre>"},{"location":"proposals/git-tracked-hooks/#migration-from-previous-hooks","title":"Migration from Previous Hooks","text":"<p>The previous system had: - Runtime-generated hooks embedded in Python code - Binary-first, container fallback execution - Legacy husky v8 files in <code>.git/hooks/_/</code></p> <p>The new system: - Git-tracked hooks in <code>.githooks/</code> - UV-only execution - No external dependencies (removed husky/lint-staged)</p>"},{"location":"proposals/git-tracked-hooks/#cleanup","title":"Cleanup","text":"<pre><code># Remove legacy husky files\nrm -rf .git/hooks/_/\n\n# Remove old runtime-generated hooks (optional, superseded by core.hooksPath)\nrm -f .git/hooks/pre-commit .git/hooks/pre-push .git/hooks/commit-msg\n</code></pre>"},{"location":"proposals/git-tracked-hooks/#benefits","title":"Benefits","text":"Aspect Previous New Version Control Runtime-generated Git-tracked Team Sync Manual setup-hooks Automatic via postinstall Customization Edit Python code Edit shell scripts Dependencies Python + optional binary Just bash + UV Auto-Fix Complex mode detection Simple interactive prompts NPM deps husky + lint-staged None"},{"location":"proposals/llm-friendly-docs-ci/","title":"LLM-Friendly Documentation CI Pipeline Proposal","text":"<p>Date: December 5, 2025 Version: 1.0.0 Status: Proposed Author: Claude Code Analysis</p>"},{"location":"proposals/llm-friendly-docs-ci/#executive-summary","title":"Executive Summary","text":"<p>Propose a GitLab CI job that automatically extracts all MkDocs content and generates LLM-friendly formats (<code>llms.txt</code>, <code>llms.json</code>, <code>llms-full.md</code>) served via GitLab Pages. This provides agents and AI assistants with an authoritative, machine-readable documentation source that stays synchronized with the human-readable docs.</p>"},{"location":"proposals/llm-friendly-docs-ci/#key-benefits","title":"Key Benefits","text":"<ol> <li>Authoritative Source: Single source of truth for both humans and LLMs</li> <li>Automatic Updates: CI pipeline ensures docs stay in sync</li> <li>Multiple Formats: Text, JSON, and markdown for different consumption patterns</li> <li>Version Tracking: Timestamped with commit SHA for cache invalidation</li> <li>Semantic Structure: Preserves hierarchy and cross-references</li> </ol>"},{"location":"proposals/llm-friendly-docs-ci/#metrics","title":"Metrics","text":"Metric Current State Proposed State LLM Doc Access Manual copy-paste Automatic URL fetch Doc Freshness Stale (manual updates) Always current (CI automated) Format Support Markdown only llms.txt, JSON, Markdown Agent Integration None URL-based ingestion Maintenance Burden High (manual sync) None (fully automated)"},{"location":"proposals/llm-friendly-docs-ci/#the-llmstxt-format-standard","title":"The llms.txt Format Standard","text":"<p>The <code>llms.txt</code> format is an emerging convention for making documentation LLM-accessible:</p>"},{"location":"proposals/llm-friendly-docs-ci/#format-specification","title":"Format Specification","text":"<pre><code># Project Name\n&gt; Project tagline\n\nLast Updated: YYYY-MM-DD HH:MM:SS UTC\nVersion: git-commit-sha\nSource: https://gitlab.com/org/repo\n\n## Documentation\n\n### Page Title 1\nURL: https://docs.example.com/page1/\nPath: /page1/\n\nFull markdown content here...\n\n---\n\n### Page Title 2\nURL: https://docs.example.com/page2/\nPath: /page2/\n\nFull markdown content here...\n\n---\n</code></pre>"},{"location":"proposals/llm-friendly-docs-ci/#key-features","title":"Key Features","text":"<ul> <li>Plain text format - Easy parsing, no special dependencies</li> <li>Semantic structure - Headers denote page boundaries</li> <li>Metadata - Timestamps, versions, URLs for traceability</li> <li>Full content - Complete page text, not summaries</li> <li>Markdown preserved - Formatting retained for structure</li> </ul>"},{"location":"proposals/llm-friendly-docs-ci/#proposed-architecture","title":"Proposed Architecture","text":"<pre><code>graph LR\n    A[docs/*.md] --&gt;|MkDocs Build| B[site/ HTML]\n    B --&gt;|Extract| C[llms.txt]\n    B --&gt;|Extract| D[llms.json]\n    B --&gt;|Extract| E[llms-full.md]\n\n    C --&gt; F[GitLab Pages]\n    D --&gt; F\n    E --&gt; F\n\n    F --&gt;|Serve| G[https://org.gitlab.io/repo/llms.txt]\n\n    G --&gt;|Fetch| H[Claude Code]\n    G --&gt;|Fetch| I[Other LLM Agents]\n\n    style C fill:#e8f5e8\n    style D fill:#e3f2fd\n    style E fill:#fff3e0\n    style F fill:#f3e5f5</code></pre>"},{"location":"proposals/llm-friendly-docs-ci/#data-flow","title":"Data Flow","text":"<ol> <li>Source: Markdown files in <code>docs/</code></li> <li>Build: MkDocs generates HTML in <code>site/</code></li> <li>Extract: Python script parses HTML/markdown</li> <li>Generate: Creates <code>llms.txt</code>, <code>llms.json</code>, <code>llms-full.md</code></li> <li>Deploy: GitLab Pages serves at public URL</li> <li>Consume: Agents fetch via HTTPS</li> </ol>"},{"location":"proposals/llm-friendly-docs-ci/#output-formats","title":"Output Formats","text":""},{"location":"proposals/llm-friendly-docs-ci/#format-1-llmstxt-primary","title":"Format 1: llms.txt (Primary)","text":"<p>Purpose: Simple, sequential, plain text Use Case: Direct ingestion by LLMs, context windows Size: ~300-500KB (estimated for current docs)</p> <p>Example Structure: <pre><code># HuskyCat Documentation\n&gt; Universal Code Validation Platform\n\nLast Updated: 2025-12-05 20:15:33 UTC\nVersion: bf7e7d8\nSource: https://gitlab.com/tinyland/ai/huskycat\nDocumentation: https://tinyland.gitlab.io/ai/huskycat\n\n## Table of Contents\n\n1. Home (index.md)\n2. Installation (installation.md)\n3. Binary Downloads (binary-downloads.md)\n4. CLI Reference (cli-reference.md)\n5. GitLab CI/CD (gitlab-ci-cd.md)\n6. GitHub Actions (github-actions.md)\n7. MCP Server (features/mcp-server.md)\n8. Troubleshooting (troubleshooting.md)\n\n---\n\n### Home\nURL: https://tinyland.gitlab.io/ai/huskycat/\nPath: /\nSource: docs/index.md\n\n# HuskyCat Universal Code Validation Platform\n\nWelcome to HuskyCat, the **Universal Code Validation Platform** with integrated **MCP (Model Context Protocol) Server** support...\n\n[Full content of index.md]\n\n---\n\n### Installation\nURL: https://tinyland.gitlab.io/ai/huskycat/installation/\nPath: /installation/\nSource: docs/installation.md\n\n# Installation Guide\n\nThis guide covers installing HuskyCat locally and in development projects...\n\n[Full content of installation.md]\n\n---\n</code></pre></p>"},{"location":"proposals/llm-friendly-docs-ci/#format-2-llmsjson-structured","title":"Format 2: llms.json (Structured)","text":"<p>Purpose: Structured, machine-parseable Use Case: Programmatic access, search indexing Size: ~400-600KB (estimated)</p> <p>Schema: <pre><code>{\n  \"metadata\": {\n    \"project\": \"HuskyCat\",\n    \"tagline\": \"Universal Code Validation Platform\",\n    \"version\": \"bf7e7d8\",\n    \"updated\": \"2025-12-05T20:15:33Z\",\n    \"source_repo\": \"https://gitlab.com/tinyland/ai/huskycat\",\n    \"docs_url\": \"https://tinyland.gitlab.io/ai/huskycat\",\n    \"generator\": \"llms-txt-generator v1.0.0\"\n  },\n  \"pages\": [\n    {\n      \"title\": \"Home\",\n      \"path\": \"/\",\n      \"url\": \"https://tinyland.gitlab.io/ai/huskycat/\",\n      \"source_file\": \"docs/index.md\",\n      \"content\": \"# HuskyCat Universal Code Validation Platform\\n\\nWelcome to HuskyCat...\",\n      \"word_count\": 1234,\n      \"sections\": [\n        {\"level\": 1, \"title\": \"HuskyCat Universal Code Validation Platform\"},\n        {\"level\": 2, \"title\": \"What is HuskyCat?\"},\n        {\"level\": 2, \"title\": \"Quick Start\"}\n      ]\n    },\n    {\n      \"title\": \"Installation\",\n      \"path\": \"/installation/\",\n      \"url\": \"https://tinyland.gitlab.io/ai/huskycat/installation/\",\n      \"source_file\": \"docs/installation.md\",\n      \"content\": \"# Installation Guide\\n\\nThis guide covers...\",\n      \"word_count\": 2345,\n      \"sections\": [...]\n    }\n  ],\n  \"stats\": {\n    \"total_pages\": 18,\n    \"total_words\": 25000,\n    \"total_size_bytes\": 300000\n  }\n}\n</code></pre></p>"},{"location":"proposals/llm-friendly-docs-ci/#format-3-llms-fullmd-complete-markdown","title":"Format 3: llms-full.md (Complete Markdown)","text":"<p>Purpose: Single concatenated markdown file Use Case: Offline reading, single-file distribution Size: ~250-400KB (estimated)</p> <p>Structure: <pre><code># HuskyCat Documentation\n&gt; Universal Code Validation Platform\n\n**Last Updated**: 2025-12-05 20:15:33 UTC\n**Version**: bf7e7d8\n**Source**: https://gitlab.com/tinyland/ai/huskycat\n\n---\n\n# Table of Contents\n\n- [Home](#home)\n- [Installation](#installation)\n- [Binary Downloads](#binary-downloads)\n- [CLI Reference](#cli-reference)\n...\n\n---\n\n&lt;div id=\"home\"&gt;&lt;/div&gt;\n\n# Home\n\n[Full content of index.md]\n\n---\n\n&lt;div id=\"installation\"&gt;&lt;/div&gt;\n\n# Installation\n\n[Full content of installation.md]\n\n---\n</code></pre></p>"},{"location":"proposals/llm-friendly-docs-ci/#implementation-plan","title":"Implementation Plan","text":""},{"location":"proposals/llm-friendly-docs-ci/#phase-1-script-development","title":"Phase 1: Script Development","text":"<p>File: <code>scripts/generate-llms-docs.py</code></p> <p>Responsibilities: 1. Parse <code>mkdocs.yml</code> to get navigation structure 2. Read markdown source files from <code>docs/</code> 3. Extract metadata (title, path, content) 4. Generate three output formats 5. Write to <code>site/</code> directory</p> <p>Dependencies: - Python 3.11+ - <code>pyyaml</code> - Parse mkdocs.yml - <code>markdown</code> - Parse markdown content - Standard library (<code>json</code>, <code>pathlib</code>, <code>datetime</code>)</p> <p>Key Functions:</p> <pre><code>def extract_metadata() -&gt; dict:\n    \"\"\"Extract project metadata from mkdocs.yml and git\"\"\"\n\ndef parse_markdown_files() -&gt; list[Page]:\n    \"\"\"Read all markdown files, extract content and structure\"\"\"\n\ndef generate_llms_txt(pages: list[Page]) -&gt; str:\n    \"\"\"Generate llms.txt format\"\"\"\n\ndef generate_llms_json(pages: list[Page]) -&gt; dict:\n    \"\"\"Generate llms.json format\"\"\"\n\ndef generate_llms_full_md(pages: list[Page]) -&gt; str:\n    \"\"\"Generate single markdown file\"\"\"\n\ndef main():\n    \"\"\"Orchestrate generation pipeline\"\"\"\n</code></pre>"},{"location":"proposals/llm-friendly-docs-ci/#phase-2-ci-job-implementation","title":"Phase 2: CI Job Implementation","text":"<p>File: <code>.gitlab-ci.yml</code></p> <p>New Job: <code>generate:llms-docs</code></p> <pre><code>generate:llms-docs:\n  stage: deploy\n  image: python:3.11-slim\n  needs:\n    - job: docs:build\n      artifacts: true\n  before_script:\n    - pip install pyyaml markdown\n  script:\n    # Generate LLM-friendly documentation formats\n    - python scripts/generate-llms-docs.py\n\n    # Verify outputs were created\n    - ls -lh site/llms.txt site/llms.json site/llms-full.md\n\n    # Show file sizes\n    - du -h site/llms.txt site/llms.json site/llms-full.md\n  artifacts:\n    paths:\n      - site/llms.txt\n      - site/llms.json\n      - site/llms-full.md\n    expire_in: never\n  rules:\n    - if: $CI_COMMIT_BRANCH == $CI_DEFAULT_BRANCH\n    - if: $CI_COMMIT_TAG\n</code></pre> <p>New Job: <code>pages</code> (GitLab Pages deployment)</p> <pre><code>pages:\n  stage: deploy\n  image: alpine:latest\n  needs:\n    - job: docs:build\n      artifacts: true\n    - job: generate:llms-docs\n      artifacts: true\n  script:\n    # GitLab Pages requires artifacts in 'public/' directory\n    - mv site public\n\n    # Verify LLM docs are included\n    - ls -la public/llms*\n\n    # Show index for debugging\n    - ls -lah public/ | head -20\n  artifacts:\n    paths:\n      - public\n  rules:\n    - if: $CI_COMMIT_BRANCH == $CI_DEFAULT_BRANCH\n</code></pre> <p>New Job: <code>docs:build</code> (if doesn't exist)</p> <pre><code>docs:build:\n  stage: build\n  image: python:3.11-slim\n  before_script:\n    - pip install mkdocs-material mkdocs-mermaid2-plugin\n  script:\n    - mkdocs build --strict\n  artifacts:\n    paths:\n      - site/\n    expire_in: 1 hour\n  rules:\n    - if: $CI_COMMIT_BRANCH == $CI_DEFAULT_BRANCH\n    - if: $CI_COMMIT_TAG\n    - if: $CI_PIPELINE_SOURCE == \"merge_request_event\"\n</code></pre>"},{"location":"proposals/llm-friendly-docs-ci/#phase-3-documentation-updates","title":"Phase 3: Documentation Updates","text":"<p>Files to Update:</p> <ol> <li> <p>docs/index.md - Add LLM docs section: <pre><code>## For AI Agents\n\nHuskyCat documentation is available in LLM-friendly formats:\n\n- **llms.txt**: https://tinyland.gitlab.io/ai/huskycat/llms.txt\n- **llms.json**: https://tinyland.gitlab.io/ai/huskycat/llms.json\n- **llms-full.md**: https://tinyland.gitlab.io/ai/huskycat/llms-full.md\n\nThese files are automatically generated from the documentation and updated with each commit to main.\n</code></pre></p> </li> <li> <p>README.md - Add agent integration section</p> </li> <li>CLAUDE.md - Update with llms.txt URL for future agents</li> </ol>"},{"location":"proposals/llm-friendly-docs-ci/#access-patterns","title":"Access Patterns","text":""},{"location":"proposals/llm-friendly-docs-ci/#for-claude-code-agents","title":"For Claude Code Agents","text":"<pre><code># In future agent prompts / MCP tools\nHUSKYCAT_DOCS_URL = \"https://tinyland.gitlab.io/ai/huskycat/llms.txt\"\n\n# Agent can fetch authoritative docs:\nimport requests\ndocs = requests.get(HUSKYCAT_DOCS_URL).text\n# Use docs as context for questions\n</code></pre>"},{"location":"proposals/llm-friendly-docs-ci/#for-other-llm-tools","title":"For Other LLM Tools","text":"<pre><code># Fetch latest docs\ncurl https://tinyland.gitlab.io/ai/huskycat/llms.txt &gt; huskycat-docs.txt\n\n# Parse JSON format\ncurl https://tinyland.gitlab.io/ai/huskycat/llms.json | jq '.pages[] | .title'\n</code></pre>"},{"location":"proposals/llm-friendly-docs-ci/#for-manual-usage","title":"For Manual Usage","text":"<pre><code># Download offline copy\nwget https://tinyland.gitlab.io/ai/huskycat/llms-full.md\n\n# View in terminal\ncurl https://tinyland.gitlab.io/ai/huskycat/llms.txt | less\n</code></pre>"},{"location":"proposals/llm-friendly-docs-ci/#example-script-implementation","title":"Example Script Implementation","text":"<p>File: <code>scripts/generate-llms-docs.py</code></p> <pre><code>#!/usr/bin/env python3\n\"\"\"Generate LLM-friendly documentation formats from MkDocs build\"\"\"\n\nimport json\nimport subprocess\nfrom datetime import datetime\nfrom pathlib import Path\nfrom typing import Any\n\nimport yaml\n\n\nclass Page:\n    \"\"\"Represents a documentation page\"\"\"\n\n    def __init__(self, title: str, path: str, source_file: str, content: str):\n        self.title = title\n        self.path = path\n        self.source_file = source_file\n        self.content = content\n        self.word_count = len(content.split())\n\n    def to_dict(self) -&gt; dict[str, Any]:\n        \"\"\"Convert to dictionary for JSON output\"\"\"\n        return {\n            \"title\": self.title,\n            \"path\": self.path,\n            \"url\": f\"https://tinyland.gitlab.io/ai/huskycat{self.path}\",\n            \"source_file\": self.source_file,\n            \"content\": self.content,\n            \"word_count\": self.word_count,\n        }\n\n\ndef get_git_commit_sha() -&gt; str:\n    \"\"\"Get current git commit SHA\"\"\"\n    try:\n        return (\n            subprocess.check_output([\"git\", \"rev-parse\", \"--short\", \"HEAD\"])\n            .decode()\n            .strip()\n        )\n    except Exception:\n        return \"unknown\"\n\n\ndef extract_metadata() -&gt; dict[str, Any]:\n    \"\"\"Extract project metadata\"\"\"\n    with open(\"mkdocs.yml\") as f:\n        mkdocs_config = yaml.safe_load(f)\n\n    return {\n        \"project\": mkdocs_config.get(\"site_name\", \"HuskyCat\"),\n        \"tagline\": mkdocs_config.get(\n            \"site_description\", \"Universal Code Validation Platform\"\n        ),\n        \"version\": get_git_commit_sha(),\n        \"updated\": datetime.utcnow().strftime(\"%Y-%m-%d %H:%M:%S UTC\"),\n        \"source_repo\": mkdocs_config.get(\"repo_url\", \"\"),\n        \"docs_url\": mkdocs_config.get(\"site_url\", \"\"),\n        \"generator\": \"llms-txt-generator v1.0.0\",\n    }\n\n\ndef parse_navigation(mkdocs_config: dict) -&gt; list[tuple[str, str]]:\n    \"\"\"Extract navigation structure from mkdocs.yml\"\"\"\n    nav = mkdocs_config.get(\"nav\", [])\n    pages = []\n\n    def extract_pages(items, prefix=\"\"):\n        for item in items:\n            if isinstance(item, dict):\n                for key, value in item.items():\n                    if isinstance(value, str):\n                        # Leaf node: title -&gt; file\n                        pages.append((key, value))\n                    elif isinstance(value, list):\n                        # Nested section\n                        extract_pages(value, prefix=key)\n            elif isinstance(item, str):\n                # Direct file reference\n                pages.append((item, item))\n\n    extract_pages(nav)\n    return pages\n\n\ndef read_markdown_file(filepath: str) -&gt; str:\n    \"\"\"Read markdown file content\"\"\"\n    path = Path(\"docs\") / filepath\n    if not path.exists():\n        print(f\"Warning: File not found: {path}\")\n        return \"\"\n    return path.read_text(encoding=\"utf-8\")\n\n\ndef parse_markdown_files(metadata: dict) -&gt; list[Page]:\n    \"\"\"Parse all markdown files from navigation\"\"\"\n    with open(\"mkdocs.yml\") as f:\n        mkdocs_config = yaml.safe_load(f)\n\n    nav_pages = parse_navigation(mkdocs_config)\n    pages = []\n\n    for title, source_file in nav_pages:\n        content = read_markdown_file(source_file)\n        if not content:\n            continue\n\n        # Convert file path to URL path\n        path = \"/\" + source_file.replace(\"index.md\", \"\").replace(\".md\", \"/\")\n        if path.endswith(\"//\"):\n            path = path[:-1]\n\n        page = Page(\n            title=title, path=path, source_file=f\"docs/{source_file}\", content=content\n        )\n        pages.append(page)\n\n    return pages\n\n\ndef generate_llms_txt(metadata: dict, pages: list[Page]) -&gt; str:\n    \"\"\"Generate llms.txt format\"\"\"\n    lines = [\n        f\"# {metadata['project']}\",\n        f\"&gt; {metadata['tagline']}\",\n        \"\",\n        f\"Last Updated: {metadata['updated']}\",\n        f\"Version: {metadata['version']}\",\n        f\"Source: {metadata['source_repo']}\",\n        f\"Documentation: {metadata['docs_url']}\",\n        \"\",\n        \"## Table of Contents\",\n        \"\",\n    ]\n\n    # Add table of contents\n    for i, page in enumerate(pages, 1):\n        lines.append(f\"{i}. {page.title} ({page.source_file.replace('docs/', '')})\")\n\n    lines.append(\"\")\n    lines.append(\"---\")\n    lines.append(\"\")\n\n    # Add each page\n    for page in pages:\n        lines.extend(\n            [\n                f\"### {page.title}\",\n                f\"URL: {metadata['docs_url']}{page.path}\",\n                f\"Path: {page.path}\",\n                f\"Source: {page.source_file}\",\n                \"\",\n                page.content,\n                \"\",\n                \"---\",\n                \"\",\n            ]\n        )\n\n    return \"\\n\".join(lines)\n\n\ndef generate_llms_json(metadata: dict, pages: list[Page]) -&gt; dict:\n    \"\"\"Generate llms.json format\"\"\"\n    return {\n        \"metadata\": metadata,\n        \"pages\": [page.to_dict() for page in pages],\n        \"stats\": {\n            \"total_pages\": len(pages),\n            \"total_words\": sum(p.word_count for p in pages),\n            \"total_size_bytes\": sum(len(p.content.encode()) for p in pages),\n        },\n    }\n\n\ndef generate_llms_full_md(metadata: dict, pages: list[Page]) -&gt; str:\n    \"\"\"Generate single concatenated markdown file\"\"\"\n    lines = [\n        f\"# {metadata['project']} Documentation\",\n        f\"&gt; {metadata['tagline']}\",\n        \"\",\n        f\"**Last Updated**: {metadata['updated']}\",\n        f\"**Version**: {metadata['version']}\",\n        f\"**Source**: {metadata['source_repo']}\",\n        \"\",\n        \"---\",\n        \"\",\n        \"# Table of Contents\",\n        \"\",\n    ]\n\n    # Add TOC with anchors\n    for page in pages:\n        anchor = page.title.lower().replace(\" \", \"-\")\n        lines.append(f\"- [{page.title}](#{anchor})\")\n\n    lines.append(\"\")\n    lines.append(\"---\")\n    lines.append(\"\")\n\n    # Add each page with anchor\n    for page in pages:\n        anchor = page.title.lower().replace(\" \", \"-\")\n        lines.extend(\n            [\n                f'&lt;div id=\"{anchor}\"&gt;&lt;/div&gt;',\n                \"\",\n                page.content,\n                \"\",\n                \"---\",\n                \"\",\n            ]\n        )\n\n    return \"\\n\".join(lines)\n\n\ndef main():\n    \"\"\"Generate all LLM-friendly documentation formats\"\"\"\n    print(\"Generating LLM-friendly documentation formats...\")\n\n    # Extract metadata\n    print(\"1. Extracting metadata...\")\n    metadata = extract_metadata()\n\n    # Parse markdown files\n    print(\"2. Parsing markdown files...\")\n    pages = parse_markdown_files(metadata)\n    print(f\"   Found {len(pages)} pages\")\n\n    # Generate llms.txt\n    print(\"3. Generating llms.txt...\")\n    llms_txt = generate_llms_txt(metadata, pages)\n    Path(\"site/llms.txt\").write_text(llms_txt, encoding=\"utf-8\")\n    print(f\"   Written: site/llms.txt ({len(llms_txt)} bytes)\")\n\n    # Generate llms.json\n    print(\"4. Generating llms.json...\")\n    llms_json_data = generate_llms_json(metadata, pages)\n    llms_json = json.dumps(llms_json_data, indent=2)\n    Path(\"site/llms.json\").write_text(llms_json, encoding=\"utf-8\")\n    print(f\"   Written: site/llms.json ({len(llms_json)} bytes)\")\n\n    # Generate llms-full.md\n    print(\"5. Generating llms-full.md...\")\n    llms_full_md = generate_llms_full_md(metadata, pages)\n    Path(\"site/llms-full.md\").write_text(llms_full_md, encoding=\"utf-8\")\n    print(f\"   Written: site/llms-full.md ({len(llms_full_md)} bytes)\")\n\n    print(\"\")\n    print(\"\u2713 LLM documentation generation complete!\")\n    print(\"\")\n    print(\"Files generated:\")\n    print(\"  - site/llms.txt\")\n    print(\"  - site/llms.json\")\n    print(\"  - site/llms-full.md\")\n\n\nif __name__ == \"__main__\":\n    main()\n</code></pre>"},{"location":"proposals/llm-friendly-docs-ci/#testing-plan","title":"Testing Plan","text":""},{"location":"proposals/llm-friendly-docs-ci/#local-testing","title":"Local Testing","text":"<pre><code># Build docs\nmkdocs build\n\n# Generate LLM docs\npython scripts/generate-llms-docs.py\n\n# Verify outputs\nls -lh site/llms*\n\n# Test llms.txt format\nhead -50 site/llms.txt\ntail -50 site/llms.txt\n\n# Test llms.json validity\ncat site/llms.json | jq '.metadata'\n\n# Serve locally\ncd site &amp;&amp; python -m http.server 8000\n# Access: http://localhost:8000/llms.txt\n</code></pre>"},{"location":"proposals/llm-friendly-docs-ci/#ci-testing","title":"CI Testing","text":"<pre><code># Push to test branch\ngit checkout -b test/llms-docs-ci\ngit add .gitlab-ci.yml scripts/generate-llms-docs.py\ngit commit -m \"test: add LLM docs CI job\"\ngit push origin test/llms-docs-ci\n\n# Check CI pipeline\n# Verify artifacts are created\n# Check Pages deployment (if on main)\n</code></pre>"},{"location":"proposals/llm-friendly-docs-ci/#integration-testing","title":"Integration Testing","text":"<pre><code># After deployment, test URLs\ncurl https://tinyland.gitlab.io/ai/huskycat/llms.txt | head -100\ncurl https://tinyland.gitlab.io/ai/huskycat/llms.json | jq '.stats'\ncurl https://tinyland.gitlab.io/ai/huskycat/llms-full.md | wc -l\n</code></pre>"},{"location":"proposals/llm-friendly-docs-ci/#success-criteria","title":"Success Criteria","text":""},{"location":"proposals/llm-friendly-docs-ci/#must-have","title":"Must Have","text":"<ul> <li>\u2705 CI job runs successfully after MkDocs build</li> <li>\u2705 Three formats generated: llms.txt, llms.json, llms-full.md</li> <li>\u2705 Files served via GitLab Pages at public URLs</li> <li>\u2705 Content includes all navigation pages from mkdocs.yml</li> <li>\u2705 Metadata includes version (git SHA) and timestamp</li> <li>\u2705 Total size &lt; 1MB per file</li> </ul>"},{"location":"proposals/llm-friendly-docs-ci/#should-have","title":"Should Have","text":"<ul> <li>\u2705 Word count and statistics in JSON format</li> <li>\u2705 Table of contents in all formats</li> <li>\u2705 Proper markdown preservation</li> <li>\u2705 No binary or generated content included</li> <li>\u2705 Caching headers for efficient updates</li> </ul>"},{"location":"proposals/llm-friendly-docs-ci/#nice-to-have","title":"Nice to Have","text":"<ul> <li>\ud83c\udfaf RSS feed for documentation updates</li> <li>\ud83c\udfaf Diff/changelog between versions</li> <li>\ud83c\udfaf Search index for JSON format</li> <li>\ud83c\udfaf Multiple language support</li> </ul>"},{"location":"proposals/llm-friendly-docs-ci/#rollout-plan","title":"Rollout Plan","text":""},{"location":"proposals/llm-friendly-docs-ci/#week-1-development","title":"Week 1: Development","text":"<ul> <li>Day 1: Implement <code>generate-llms-docs.py</code> script</li> <li>Day 2: Add CI jobs to <code>.gitlab-ci.yml</code></li> <li>Day 3: Local testing and refinement</li> <li>Day 4: Update documentation with URLs</li> <li>Day 5: Code review and adjustments</li> </ul>"},{"location":"proposals/llm-friendly-docs-ci/#week-2-deployment","title":"Week 2: Deployment","text":"<ul> <li>Day 1: Merge to main branch</li> <li>Day 2: Verify GitLab Pages deployment</li> <li>Day 3: Test URLs and file content</li> <li>Day 4: Update agent prompts/MCP tools</li> <li>Day 5: Monitor usage and feedback</li> </ul>"},{"location":"proposals/llm-friendly-docs-ci/#maintenance","title":"Maintenance","text":""},{"location":"proposals/llm-friendly-docs-ci/#automatic-maintenance","title":"Automatic Maintenance","text":"<ul> <li>CI job runs on every commit to main</li> <li>No manual intervention required</li> <li>Files automatically updated</li> </ul>"},{"location":"proposals/llm-friendly-docs-ci/#manual-maintenance-optional","title":"Manual Maintenance (Optional)","text":"<ul> <li>Review file sizes quarterly</li> <li>Optimize content extraction if needed</li> <li>Add new formats based on usage</li> </ul>"},{"location":"proposals/llm-friendly-docs-ci/#future-enhancements","title":"Future Enhancements","text":""},{"location":"proposals/llm-friendly-docs-ci/#phase-2-advanced-features","title":"Phase 2: Advanced Features","text":"<ol> <li>Vector Embeddings - Pre-compute embeddings for semantic search</li> <li>API Endpoints - REST API for querying specific pages</li> <li>Versioning - Keep historical versions of docs</li> <li>Search Index - Full-text search capabilities</li> <li>Analytics - Track which pages/formats are most accessed</li> </ol>"},{"location":"proposals/llm-friendly-docs-ci/#phase-3-multi-format-support","title":"Phase 3: Multi-Format Support","text":"<ol> <li>JSONLD - Schema.org structured data</li> <li>OpenAPI Spec - Machine-readable API docs</li> <li>Sitemap - Enhanced SEO and discoverability</li> <li>RSS/Atom - Syndication for updates</li> </ol>"},{"location":"proposals/llm-friendly-docs-ci/#risks-and-mitigations","title":"Risks and Mitigations","text":"Risk Impact Probability Mitigation File size exceeds 1MB Medium Low Implement pagination or compression CI job timeout Medium Low Optimize script, use faster image GitLab Pages quota Low Low Monitor usage, optimize assets Breaking changes to format High Low Version the format, maintain backwards compatibility Sensitive info in docs Critical Very Low Audit docs, add exclusion patterns"},{"location":"proposals/llm-friendly-docs-ci/#cost-analysis","title":"Cost Analysis","text":""},{"location":"proposals/llm-friendly-docs-ci/#ci-resource-usage","title":"CI Resource Usage","text":"<ul> <li>Build Time: ~30 seconds (Python 3.11-slim)</li> <li>Storage: ~3MB (3 files \u00d7 ~1MB each)</li> <li>Bandwidth: Minimal (static files)</li> </ul>"},{"location":"proposals/llm-friendly-docs-ci/#gitlab-pages","title":"GitLab Pages","text":"<ul> <li>Storage: Included in GitLab plan</li> <li>Bandwidth: Generous limits for static content</li> <li>Cost: $0 additional cost</li> </ul>"},{"location":"proposals/llm-friendly-docs-ci/#maintenance_1","title":"Maintenance","text":"<ul> <li>Developer Time: 0 hours/month (fully automated)</li> <li>Monitoring: 10 minutes/month (check logs)</li> </ul>"},{"location":"proposals/llm-friendly-docs-ci/#references","title":"References","text":""},{"location":"proposals/llm-friendly-docs-ci/#standards","title":"Standards","text":"<ul> <li>llms.txt: https://llmstxt.org/</li> <li>GitLab Pages: https://docs.gitlab.com/ee/user/project/pages/</li> <li>MkDocs: https://www.mkdocs.org/</li> </ul>"},{"location":"proposals/llm-friendly-docs-ci/#similar-implementations","title":"Similar Implementations","text":"<ul> <li>Anthropic Claude Docs: Uses similar approach</li> <li>OpenAI API Docs: Provides llms.txt</li> <li>Vercel AI SDK: Offers machine-readable docs</li> </ul>"},{"location":"proposals/llm-friendly-docs-ci/#approval-and-next-steps","title":"Approval and Next Steps","text":""},{"location":"proposals/llm-friendly-docs-ci/#decision-points","title":"Decision Points","text":"<ol> <li>Approve Format Specification? - llms.txt, JSON, Markdown</li> <li>Approve CI Implementation? - New jobs in .gitlab-ci.yml</li> <li>Approve Public URLs? - Serve via GitLab Pages</li> <li>Approve Timeline? - 2-week implementation</li> </ol>"},{"location":"proposals/llm-friendly-docs-ci/#next-actions","title":"Next Actions","text":"<p>Upon approval:</p> <ol> <li>Create feature branch: <code>feature/llms-docs-ci</code></li> <li>Implement script: <code>scripts/generate-llms-docs.py</code></li> <li>Add CI jobs to <code>.gitlab-ci.yml</code></li> <li>Test locally and in CI</li> <li>Merge to main and deploy</li> <li>Update agent integrations with URLs</li> </ol> <p>Ready for Implementation \u2705</p> <p>This proposal provides a complete, production-ready solution for LLM-friendly documentation that scales with the project and requires zero maintenance.</p>"}]}